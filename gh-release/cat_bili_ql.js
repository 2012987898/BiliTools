"use strict";var u=require("path"),e=require("fs");require("crypto");var t=require("zlib"),n=require("nodemailer"),r=require("tunnel"),i=require("got");function o(u){return u&&"object"==typeof u&&"default"in u?u:{default:u}}function a(u){if(u&&u.__esModule)return u;var e=Object.create(null);return u&&Object.keys(u).forEach((function(t){if("default"!==t){var n=Object.getOwnPropertyDescriptor(u,t);Object.defineProperty(e,t,n.get?n:{enumerable:!0,get:function(){return u[t]}})}})),e.default=u,Object.freeze(e)}var s,c=a(u),D=a(e),f=a(n),l=a(r),d=o(i);!function(u){u[u.SUCCESS=0]="SUCCESS",u[u["应用程序不存在或已被封禁"]=-1]="应用程序不存在或已被封禁",u[u["Access Key错误"]=-2]="Access Key错误",u[u["API校验密匙错误"]=-3]="API校验密匙错误",u[u["调用方对该Method没有权限"]=-4]="调用方对该Method没有权限",u[u["账号未登录"]=-101]="账号未登录",u[u["账号被封停"]=-102]="账号被封停",u[u["积分不足"]=-103]="积分不足",u[u["硬币不足"]=-104]="硬币不足",u[u["验证码错误"]=-105]="验证码错误",u[u["账号非正式会员或在适应期"]=-106]="账号非正式会员或在适应期",u[u["应用不存在或者被封禁"]=-107]="应用不存在或者被封禁",u[u["未绑定手机?"]=-108]="未绑定手机?",u[u["未绑定手机"]=-110]="未绑定手机",u[u["csrf 校验失败"]=-111]="csrf 校验失败",u[u["系统升级中"]=-112]="系统升级中",u[u["账号尚未实名认证"]=-113]="账号尚未实名认证",u[u["请先绑定手机"]=-114]="请先绑定手机",u[u["请先完成实名认证"]=-115]="请先完成实名认证"}(s||(s={}));const C="https://account.bilibili.com",p="https://live.bilibili.com",F="https://space.bilibili.com",E="https://message.bilibili.com",A="https://www.bilibili.com",g="https://www.bilibili.com/",m="https://account.bilibili.com",h="https://api.live.bilibili.com",y="https://api.bilibili.com",B="https://manga.bilibili.com",v="https://api.vc.bilibili.com",w={"user-agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/101.0.4951.41 Safari/537.36 Edg/101.0.1210.32","content-type":"application/x-www-form-urlencoded; charset=UTF-8","accept-language":"zh-CN,zh;q=0.9","accept-encoding":"gzip, deflate, br"},_=["棒","棒唉","棒耶","加油~","UP加油!","支持~","支持支持！","催更啦","顶顶","留下脚印~","干杯","bilibili干杯","o(*￣▽￣*)o","(｡･∀･)ﾉﾞ嗨","(●ˇ∀ˇ●)","( •̀ ω •́ )y","(ง •_•)ง",">.<","^_~"],b=Object.prototype.toString;function $(u,e){return b.call(u)===`[object ${e}]`}function T(u){return null!==u&&$(u,"Object")}function S(u){return $(u,"String")}function I(u){return u&&Array.isArray(u)}function O(){const u=new Date,e=u.getTime(),t=u.getTimezoneOffset()/60;return new Date(e+36e5*(t+8))}function P(u,e){return Math.ceil(e/u)}function L(u,e,t){if(t&&"boolean"!=typeof t&&(e=t=void 0),void 0===t&&("boolean"==typeof e?(t=e,e=void 0):"boolean"==typeof u&&(t=u,u=void 0)),void 0===u&&void 0===e?(u=0,e=1):void 0===e&&(e=u,u=0),u>e){const t=u;u=e,e=t}if(t||u%1||e%1){const t=Math.random();return Math.min(u+t*(e-u+parseFloat("1e-"+((t+"").length-1))),e)}return u+Math.floor(Math.random()*(e-u+1))}function x(){return`${L(1,9)}${function(u,e){let t="";for(let e=0;e<u;e++)t+=j("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ");return e?t.toLowerCase():t}(10,!0)}0`}function N(u,e){u.includes(e)||u.push(e)}function k(u,e=!1){return T(u)?Array.isArray(u)?u.map((u=>k(u,e))):e?Object.keys(u).reduce(((t,n)=>(t[n]=k(u[n],e),t)),{}):Object.assign({},u):u}function U(u,e){return void 0===u||void 0===e?u||e:T(u)&&T(e)?Array.isArray(u)&&Array.isArray(e)?u.concat(e):Object.keys(e).reduce(((t,n)=>(t[n]=U(u[n],e[n]),t)),u):e}function R(u){if(!T(u)&&!I(u))return u;const e=new URLSearchParams;return Array.isArray(u)||(u=Object.entries(u)),u.forEach((([u,t])=>{T(t)?e.append(u,JSON.stringify(t)):e.append(u,String(t))})),e.toString()}function j(u){return u[L(u.length-1)]}function G(u){return u&&u.map((u=>Number(u))).filter((u=>u>0&&u%1==0))}var M="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},H=function(u){return u&&u.Math==Math&&u},q=H("object"==typeof globalThis&&globalThis)||H("object"==typeof window&&window)||H("object"==typeof self&&self)||H("object"==typeof M&&M)||function(){return this}()||Function("return this")(),J={},K=function(u){try{return!!u()}catch(u){return!0}},Y=!K((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),z=!K((function(){var u=function(){}.bind();return"function"!=typeof u||u.hasOwnProperty("prototype")})),Q=z,V=Function.prototype.call,W=Q?V.bind(V):function(){return V.apply(V,arguments)},X={},Z={}.propertyIsEnumerable,uu=Object.getOwnPropertyDescriptor,eu=uu&&!Z.call({1:2},1);X.f=eu?function(u){var e=uu(this,u);return!!e&&e.enumerable}:Z;var tu,nu,ru=function(u,e){return{enumerable:!(1&u),configurable:!(2&u),writable:!(4&u),value:e}},iu=z,ou=Function.prototype,au=ou.bind,su=ou.call,cu=iu&&au.bind(su,su),Du=iu?function(u){return u&&cu(u)}:function(u){return u&&function(){return su.apply(u,arguments)}},fu=Du,lu=fu({}.toString),du=fu("".slice),Cu=function(u){return du(lu(u),8,-1)},pu=K,Fu=Cu,Eu=Object,Au=Du("".split),gu=pu((function(){return!Eu("z").propertyIsEnumerable(0)}))?function(u){return"String"==Fu(u)?Au(u,""):Eu(u)}:Eu,mu=TypeError,hu=function(u){if(null==u)throw mu("Can't call method on "+u);return u},yu=gu,Bu=hu,vu=function(u){return yu(Bu(u))},wu=function(u){return"function"==typeof u},_u=wu,bu=function(u){return"object"==typeof u?null!==u:_u(u)},$u=q,Tu=wu,Su=function(u){return Tu(u)?u:void 0},Iu=function(u,e){return arguments.length<2?Su($u[u]):$u[u]&&$u[u][e]},Ou=Du({}.isPrototypeOf),Pu=q,Lu=Iu("navigator","userAgent")||"",xu=Pu.process,Nu=Pu.Deno,ku=xu&&xu.versions||Nu&&Nu.version,Uu=ku&&ku.v8;Uu&&(nu=(tu=Uu.split("."))[0]>0&&tu[0]<4?1:+(tu[0]+tu[1])),!nu&&Lu&&(!(tu=Lu.match(/Edge\/(\d+)/))||tu[1]>=74)&&(tu=Lu.match(/Chrome\/(\d+)/))&&(nu=+tu[1]);var Ru=nu,ju=K,Gu=!!Object.getOwnPropertySymbols&&!ju((function(){var u=Symbol();return!String(u)||!(Object(u)instanceof Symbol)||!Symbol.sham&&Ru&&Ru<41})),Mu=Gu&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Hu=Iu,qu=wu,Ju=Ou,Ku=Object,Yu=Mu?function(u){return"symbol"==typeof u}:function(u){var e=Hu("Symbol");return qu(e)&&Ju(e.prototype,Ku(u))},zu=String,Qu=wu,Vu=function(u){try{return zu(u)}catch(u){return"Object"}},Wu=TypeError,Xu=function(u){if(Qu(u))return u;throw Wu(Vu(u)+" is not a function")},Zu=W,ue=wu,ee=bu,te=TypeError,ne={exports:{}},re=q,ie=Object.defineProperty,oe=function(u,e){try{ie(re,u,{value:e,configurable:!0,writable:!0})}catch(t){re[u]=e}return e},ae=oe,se=q["__core-js_shared__"]||ae("__core-js_shared__",{}),ce=se;(ne.exports=function(u,e){return ce[u]||(ce[u]=void 0!==e?e:{})})("versions",[]).push({version:"3.22.8",mode:"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.22.8/LICENSE",source:"https://github.com/zloirock/core-js"});var De=hu,fe=Object,le=function(u){return fe(De(u))},de=Du({}.hasOwnProperty),Ce=Object.hasOwn||function(u,e){return de(le(u),e)},pe=Du,Fe=0,Ee=Math.random(),Ae=pe(1..toString),ge=function(u){return"Symbol("+(void 0===u?"":u)+")_"+Ae(++Fe+Ee,36)},me=q,he=ne.exports,ye=Ce,Be=ge,ve=Gu,we=Mu,_e=he("wks"),be=me.Symbol,$e=be&&be.for,Te=we?be:be&&be.withoutSetter||Be,Se=function(u){if(!ye(_e,u)||!ve&&"string"!=typeof _e[u]){var e="Symbol."+u;ve&&ye(be,u)?_e[u]=be[u]:_e[u]=we&&$e?$e(e):Te(e)}return _e[u]},Ie=W,Oe=bu,Pe=Yu,Le=function(u,e){var t=u[e];return null==t?void 0:Xu(t)},xe=function(u,e){var t,n;if("string"===e&&ue(t=u.toString)&&!ee(n=Zu(t,u)))return n;if(ue(t=u.valueOf)&&!ee(n=Zu(t,u)))return n;if("string"!==e&&ue(t=u.toString)&&!ee(n=Zu(t,u)))return n;throw te("Can't convert object to primitive value")},Ne=TypeError,ke=Se("toPrimitive"),Ue=function(u,e){if(!Oe(u)||Pe(u))return u;var t,n=Le(u,ke);if(n){if(void 0===e&&(e="default"),t=Ie(n,u,e),!Oe(t)||Pe(t))return t;throw Ne("Can't convert object to primitive value")}return void 0===e&&(e="number"),xe(u,e)},Re=Yu,je=function(u){var e=Ue(u,"string");return Re(e)?e:e+""},Ge=bu,Me=q.document,He=Ge(Me)&&Ge(Me.createElement),qe=function(u){return He?Me.createElement(u):{}},Je=!Y&&!K((function(){return 7!=Object.defineProperty(qe("div"),"a",{get:function(){return 7}}).a})),Ke=Y,Ye=W,ze=X,Qe=ru,Ve=vu,We=je,Xe=Ce,Ze=Je,ut=Object.getOwnPropertyDescriptor;J.f=Ke?ut:function(u,e){if(u=Ve(u),e=We(e),Ze)try{return ut(u,e)}catch(u){}if(Xe(u,e))return Qe(!Ye(ze.f,u,e),u[e])};var et={},tt=Y&&K((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),nt=bu,rt=String,it=TypeError,ot=function(u){if(nt(u))return u;throw it(rt(u)+" is not an object")},at=Y,st=Je,ct=tt,Dt=ot,ft=je,lt=TypeError,dt=Object.defineProperty,Ct=Object.getOwnPropertyDescriptor;et.f=at?ct?function(u,e,t){if(Dt(u),e=ft(e),Dt(t),"function"==typeof u&&"prototype"===e&&"value"in t&&"writable"in t&&!t.writable){var n=Ct(u,e);n&&n.writable&&(u[e]=t.value,t={configurable:"configurable"in t?t.configurable:n.configurable,enumerable:"enumerable"in t?t.enumerable:n.enumerable,writable:!1})}return dt(u,e,t)}:dt:function(u,e,t){if(Dt(u),e=ft(e),Dt(t),st)try{return dt(u,e,t)}catch(u){}if("get"in t||"set"in t)throw lt("Accessors not supported");return"value"in t&&(u[e]=t.value),u};var pt=et,Ft=ru,Et=Y?function(u,e,t){return pt.f(u,e,Ft(1,t))}:function(u,e,t){return u[e]=t,u},At={exports:{}},gt=Y,mt=Ce,ht=Function.prototype,yt=gt&&Object.getOwnPropertyDescriptor,Bt=mt(ht,"name"),vt={EXISTS:Bt,PROPER:Bt&&"something"===function(){}.name,CONFIGURABLE:Bt&&(!gt||gt&&yt(ht,"name").configurable)},wt=wu,_t=se,bt=Du(Function.toString);wt(_t.inspectSource)||(_t.inspectSource=function(u){return bt(u)});var $t,Tt,St,It=_t.inspectSource,Ot=wu,Pt=It,Lt=q.WeakMap,xt=Ot(Lt)&&/native code/.test(Pt(Lt)),Nt=ne.exports,kt=ge,Ut=Nt("keys"),Rt={},jt=xt,Gt=q,Mt=Du,Ht=bu,qt=Et,Jt=Ce,Kt=se,Yt=function(u){return Ut[u]||(Ut[u]=kt(u))},zt=Rt,Qt=Gt.TypeError,Vt=Gt.WeakMap;if(jt||Kt.state){var Wt=Kt.state||(Kt.state=new Vt),Xt=Mt(Wt.get),Zt=Mt(Wt.has),un=Mt(Wt.set);$t=function(u,e){if(Zt(Wt,u))throw new Qt("Object already initialized");return e.facade=u,un(Wt,u,e),e},Tt=function(u){return Xt(Wt,u)||{}},St=function(u){return Zt(Wt,u)}}else{var en=Yt("state");zt[en]=!0,$t=function(u,e){if(Jt(u,en))throw new Qt("Object already initialized");return e.facade=u,qt(u,en,e),e},Tt=function(u){return Jt(u,en)?u[en]:{}},St=function(u){return Jt(u,en)}}var tn={set:$t,get:Tt,has:St,enforce:function(u){return St(u)?Tt(u):$t(u,{})},getterFor:function(u){return function(e){var t;if(!Ht(e)||(t=Tt(e)).type!==u)throw Qt("Incompatible receiver, "+u+" required");return t}}},nn=K,rn=wu,on=Ce,an=Y,sn=vt.CONFIGURABLE,cn=It,Dn=tn.enforce,fn=tn.get,ln=Object.defineProperty,dn=an&&!nn((function(){return 8!==ln((function(){}),"length",{value:8}).length})),Cn=String(String).split("String"),pn=At.exports=function(u,e,t){"Symbol("===String(e).slice(0,7)&&(e="["+String(e).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),t&&t.getter&&(e="get "+e),t&&t.setter&&(e="set "+e),(!on(u,"name")||sn&&u.name!==e)&&ln(u,"name",{value:e,configurable:!0}),dn&&t&&on(t,"arity")&&u.length!==t.arity&&ln(u,"length",{value:t.arity});try{t&&on(t,"constructor")&&t.constructor?an&&ln(u,"prototype",{writable:!1}):u.prototype&&(u.prototype=void 0)}catch(u){}var n=Dn(u);return on(n,"source")||(n.source=Cn.join("string"==typeof e?e:"")),u};Function.prototype.toString=pn((function(){return rn(this)&&fn(this).source||cn(this)}),"toString");var Fn=wu,En=Et,An=At.exports,gn=oe,mn={},hn=Math.ceil,yn=Math.floor,Bn=Math.trunc||function(u){var e=+u;return(e>0?yn:hn)(e)},vn=function(u){var e=+u;return e!=e||0===e?0:Bn(e)},wn=vn,_n=Math.max,bn=Math.min,$n=vn,Tn=Math.min,Sn=function(u){return u>0?Tn($n(u),9007199254740991):0},In=vu,On=function(u,e){var t=wn(u);return t<0?_n(t+e,0):bn(t,e)},Pn=function(u){return Sn(u.length)},Ln=function(u){return function(e,t,n){var r,i=In(e),o=Pn(i),a=On(n,o);if(u&&t!=t){for(;o>a;)if((r=i[a++])!=r)return!0}else for(;o>a;a++)if((u||a in i)&&i[a]===t)return u||a||0;return!u&&-1}},xn={includes:Ln(!0),indexOf:Ln(!1)},Nn=Ce,kn=vu,Un=xn.indexOf,Rn=Rt,jn=Du([].push),Gn=function(u,e){var t,n=kn(u),r=0,i=[];for(t in n)!Nn(Rn,t)&&Nn(n,t)&&jn(i,t);for(;e.length>r;)Nn(n,t=e[r++])&&(~Un(i,t)||jn(i,t));return i},Mn=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"].concat("length","prototype");mn.f=Object.getOwnPropertyNames||function(u){return Gn(u,Mn)};var Hn={};Hn.f=Object.getOwnPropertySymbols;var qn=Iu,Jn=mn,Kn=Hn,Yn=ot,zn=Du([].concat),Qn=qn("Reflect","ownKeys")||function(u){var e=Jn.f(Yn(u)),t=Kn.f;return t?zn(e,t(u)):e},Vn=Ce,Wn=Qn,Xn=J,Zn=et,ur=function(u,e,t){for(var n=Wn(e),r=Zn.f,i=Xn.f,o=0;o<n.length;o++){var a=n[o];Vn(u,a)||t&&Vn(t,a)||r(u,a,i(e,a))}},er=K,tr=wu,nr=/#|\.prototype\./,rr=function(u,e){var t=or[ir(u)];return t==sr||t!=ar&&(tr(e)?er(e):!!e)},ir=rr.normalize=function(u){return String(u).replace(nr,".").toLowerCase()},or=rr.data={},ar=rr.NATIVE="N",sr=rr.POLYFILL="P",cr=rr,Dr=q,fr=J.f,lr=Et,dr=function(u,e,t,n){n||(n={});var r=n.enumerable,i=void 0!==n.name?n.name:e;return Fn(t)&&An(t,i,n),n.global?r?u[e]=t:gn(e,t):(n.unsafe?u[e]&&(r=!0):delete u[e],r?u[e]=t:En(u,e,t)),u},Cr=oe,pr=ur,Fr=cr,Er=z,Ar=Function.prototype,gr=Ar.apply,mr=Ar.call,hr="object"==typeof Reflect&&Reflect.apply||(Er?mr.bind(gr):function(){return mr.apply(gr,arguments)}),yr=wu,Br=String,vr=TypeError,wr=Du,_r=ot,br=function(u){if("object"==typeof u||yr(u))return u;throw vr("Can't set "+Br(u)+" as a prototype")},$r=Object.setPrototypeOf||("__proto__"in{}?function(){var u,e=!1,t={};try{(u=wr(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(t,[]),e=t instanceof Array}catch(u){}return function(t,n){return _r(t),br(n),e?u(t,n):t.__proto__=n,t}}():void 0),Tr=et.f,Sr=wu,Ir=bu,Or=$r,Pr={};Pr[Se("toStringTag")]="z";var Lr="[object z]"===String(Pr),xr=wu,Nr=Cu,kr=Se("toStringTag"),Ur=Object,Rr="Arguments"==Nr(function(){return arguments}()),jr=Lr?Nr:function(u){var e,t,n;return void 0===u?"Undefined":null===u?"Null":"string"==typeof(t=function(u,e){try{return u[e]}catch(u){}}(e=Ur(u),kr))?t:Rr?Nr(e):"Object"==(n=Nr(e))&&xr(e.callee)?"Arguments":n},Gr=jr,Mr=String,Hr=function(u){if("Symbol"===Gr(u))throw TypeError("Cannot convert a Symbol value to a string");return Mr(u)},qr=bu,Jr=Et,Kr=Error,Yr=Du("".replace),zr=String(Kr("zxcasd").stack),Qr=/\n\s*at [^:]*:[^\n]*/,Vr=Qr.test(zr),Wr=ru,Xr=!K((function(){var u=Error("a");return!("stack"in u)||(Object.defineProperty(u,"stack",Wr(1,7)),7!==u.stack)})),Zr=Iu,ui=Ce,ei=Et,ti=Ou,ni=$r,ri=ur,ii=function(u,e,t){t in u||Tr(u,t,{configurable:!0,get:function(){return e[t]},set:function(u){e[t]=u}})},oi=function(u,e,t){var n,r;return Or&&Sr(n=e.constructor)&&n!==t&&Ir(r=n.prototype)&&r!==t.prototype&&Or(u,r),u},ai=function(u,e){return void 0===u?arguments.length<2?"":e:Hr(u)},si=function(u,e){qr(e)&&"cause"in e&&Jr(u,"cause",e.cause)},ci=function(u,e){if(Vr&&"string"==typeof u&&!Kr.prepareStackTrace)for(;e--;)u=Yr(u,Qr,"");return u},Di=Xr,fi=Y,li=function(u,e){var t,n,r,i,o,a=u.target,s=u.global,c=u.stat;if(t=s?Dr:c?Dr[a]||Cr(a,{}):(Dr[a]||{}).prototype)for(n in e){if(i=e[n],r=u.dontCallGetSet?(o=fr(t,n))&&o.value:t[n],!Fr(s?n:a+(c?".":"#")+n,u.forced)&&void 0!==r){if(typeof i==typeof r)continue;pr(i,r)}(u.sham||r&&r.sham)&&lr(i,"sham",!0),dr(t,n,i,u)}},di=hr,Ci=function(u,e,t,n){var r="stackTraceLimit",i=n?2:1,o=u.split("."),a=o[o.length-1],s=Zr.apply(null,o);if(s){var c=s.prototype;if(ui(c,"cause")&&delete c.cause,!t)return s;var D=Zr("Error"),f=e((function(u,e){var t=ai(n?e:u,void 0),r=n?new s(u):new s;return void 0!==t&&ei(r,"message",t),Di&&ei(r,"stack",ci(r.stack,2)),this&&ti(c,this)&&oi(r,this,f),arguments.length>i&&si(r,arguments[i]),r}));f.prototype=c,"Error"!==a?ni?ni(f,D):ri(f,D,{name:!0}):fi&&r in s&&(ii(f,s,r),ii(f,s,"prepareStackTrace")),ri(f,s);try{c.name!==a&&ei(c,"name",a),c.constructor=f}catch(u){}return f}},pi=q.WebAssembly,Fi=7!==Error("e",{cause:7}).cause,Ei=function(u,e){var t={};t[u]=Ci(u,e,Fi),li({global:!0,constructor:!0,arity:1,forced:Fi},t)},Ai=function(u,e){if(pi&&pi[u]){var t={};t[u]=Ci("WebAssembly."+u,e,Fi),li({target:"WebAssembly",stat:!0,constructor:!0,arity:1,forced:Fi},t)}};Ei("Error",(function(u){return function(e){return di(u,this,arguments)}})),Ei("EvalError",(function(u){return function(e){return di(u,this,arguments)}})),Ei("RangeError",(function(u){return function(e){return di(u,this,arguments)}})),Ei("ReferenceError",(function(u){return function(e){return di(u,this,arguments)}})),Ei("SyntaxError",(function(u){return function(e){return di(u,this,arguments)}})),Ei("TypeError",(function(u){return function(e){return di(u,this,arguments)}})),Ei("URIError",(function(u){return function(e){return di(u,this,arguments)}})),Ai("CompileError",(function(u){return function(e){return di(u,this,arguments)}})),Ai("LinkError",(function(u){return function(e){return di(u,this,arguments)}})),Ai("RuntimeError",(function(u){return function(e){return di(u,this,arguments)}}));function gi(u,e=!0){return e?u.toLocaleString("zh-CN",{hour12:!1}):u.toLocaleString("zh-CN",{hour12:!1,hour:"numeric",minute:"numeric",second:"numeric"})}function mi(u="info"){const e=["error","warn","info","verbose","debug"],t=e.indexOf(u);return t>0?e.slice(0,t+1):e}function hi(u){return c.resolve(process.cwd(),u)}class yi{static pushValue="";month=O().getMonth()+1;errorFile=hi(`./logs/bt_error-${this.month}.log`);logFile=hi(`./logs/bt_combined-${this.month}.log`);noFile=!1;constructor(u={console:"info",file:"info",push:"info"},e="default"){this.options=u,this.name=e,this.consoleLeval=mi(this.options.console),this.fileLeval=mi(this.options.file),this.pushLeval=mi(this.options.push),this.noFile=!0,this.noFile||this.createLogFile()}log({level:u},e){const t=O(),n=`[${u} ${gi(t,!1)}] ${e}\n`,r=["error","warn"].includes(u);this.consoleLeval.includes(u)&&this.Conslole(n,r),!this.noFile&&this.fileLeval.includes(u)&&this.File(`[${u} ${gi(t,!1)}] ${e}\n`,r),this.pushLeval.includes(u)&&this.Push(n)}error(u){this.log({level:"error"},u)}warn(u){this.log({level:"warn"},u)}info(u){this.log({level:"info"},u)}verbose(u){this.log({level:"verbose"},u)}debug(u){this.log({level:"debug"},u)}Conslole(u,e){e?process.stderr.write(u):process.stdout.write(u)}File(u,e){e&&D.appendFileSync(this.errorFile,u,"utf-8"),D.appendFileSync(this.logFile,u,"utf-8")}Push(u){yi.pushValue+=u}createLogFile(){const u=hi("./logs");D.existsSync(u)||D.mkdirSync(u)}}const Bi=new yi({console:"debug",file:"debug",push:"debug"});function vi(u){try{const e=t.unzipSync(Buffer.from(u,"base64")).toString();try{return decodeURIComponent(function(u){return u.replace(/\\u([\d\w]{4})/gi,((u,e)=>String.fromCodePoint(parseInt(e,16))))}(e))}catch(u){return unescape(e)}}catch(u){throw new Error("Error: 当前字符串不能被Gzip解压")}}class wi{static configFileName=function(){const u=".json",{BILITOOLS_FILE_NAME:e}=process.env;return e?e.endsWith(u)?e:`${e}.json`:"cat_bili_config"+u}();static isQingLongPanel=!0}var _i={Space_Separator:/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,ID_Start:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,ID_Continue:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/},bi={isSpaceSeparator:u=>"string"==typeof u&&_i.Space_Separator.test(u),isIdStartChar:u=>"string"==typeof u&&(u>="a"&&u<="z"||u>="A"&&u<="Z"||"$"===u||"_"===u||_i.ID_Start.test(u)),isIdContinueChar:u=>"string"==typeof u&&(u>="a"&&u<="z"||u>="A"&&u<="Z"||u>="0"&&u<="9"||"$"===u||"_"===u||"‌"===u||"‍"===u||_i.ID_Continue.test(u)),isDigit:u=>"string"==typeof u&&/[0-9]/.test(u),isHexDigit:u=>"string"==typeof u&&/[0-9A-Fa-f]/.test(u)};let $i,Ti,Si,Ii,Oi,Pi,Li,xi,Ni;function ki(u,e,t){const n=u[e];if(null!=n&&"object"==typeof n)for(const u in n){const e=ki(n,u,t);void 0===e?delete n[u]:n[u]=e}return t.call(u,e,n)}let Ui,Ri,ji,Gi,Mi;function Hi(){for(Ui="default",Ri="",ji=!1,Gi=1;;){Mi=qi();const u=Ki[Ui]();if(u)return u}}function qi(){if($i[Ii])return String.fromCodePoint($i.codePointAt(Ii))}function Ji(){const u=qi();return"\n"===u?(Oi++,Pi=0):u?Pi+=u.length:Pi++,u&&(Ii+=u.length),u}const Ki={default(){switch(Mi){case"\t":case"\v":case"\f":case" ":case" ":case"\ufeff":case"\n":case"\r":case"\u2028":case"\u2029":return void Ji();case"/":return Ji(),void(Ui="comment");case void 0:return Ji(),Yi("eof")}if(!bi.isSpaceSeparator(Mi))return Ki[Ti]();Ji()},comment(){switch(Mi){case"*":return Ji(),void(Ui="multiLineComment");case"/":return Ji(),void(Ui="singleLineComment")}throw Zi(Ji())},multiLineComment(){switch(Mi){case"*":return Ji(),void(Ui="multiLineCommentAsterisk");case void 0:throw Zi(Ji())}Ji()},multiLineCommentAsterisk(){switch(Mi){case"*":return void Ji();case"/":return Ji(),void(Ui="default");case void 0:throw Zi(Ji())}Ji(),Ui="multiLineComment"},singleLineComment(){switch(Mi){case"\n":case"\r":case"\u2028":case"\u2029":return Ji(),void(Ui="default");case void 0:return Ji(),Yi("eof")}Ji()},value(){switch(Mi){case"{":case"[":return Yi("punctuator",Ji());case"n":return Ji(),zi("ull"),Yi("null",null);case"t":return Ji(),zi("rue"),Yi("boolean",!0);case"f":return Ji(),zi("alse"),Yi("boolean",!1);case"-":case"+":return"-"===Ji()&&(Gi=-1),void(Ui="sign");case".":return Ri=Ji(),void(Ui="decimalPointLeading");case"0":return Ri=Ji(),void(Ui="zero");case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return Ri=Ji(),void(Ui="decimalInteger");case"I":return Ji(),zi("nfinity"),Yi("numeric",1/0);case"N":return Ji(),zi("aN"),Yi("numeric",NaN);case'"':case"'":return ji='"'===Ji(),Ri="",void(Ui="string")}throw Zi(Ji())},identifierNameStartEscape(){if("u"!==Mi)throw Zi(Ji());Ji();const u=Qi();switch(u){case"$":case"_":break;default:if(!bi.isIdStartChar(u))throw eo()}Ri+=u,Ui="identifierName"},identifierName(){switch(Mi){case"$":case"_":case"‌":case"‍":return void(Ri+=Ji());case"\\":return Ji(),void(Ui="identifierNameEscape")}if(!bi.isIdContinueChar(Mi))return Yi("identifier",Ri);Ri+=Ji()},identifierNameEscape(){if("u"!==Mi)throw Zi(Ji());Ji();const u=Qi();switch(u){case"$":case"_":case"‌":case"‍":break;default:if(!bi.isIdContinueChar(u))throw eo()}Ri+=u,Ui="identifierName"},sign(){switch(Mi){case".":return Ri=Ji(),void(Ui="decimalPointLeading");case"0":return Ri=Ji(),void(Ui="zero");case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return Ri=Ji(),void(Ui="decimalInteger");case"I":return Ji(),zi("nfinity"),Yi("numeric",Gi*(1/0));case"N":return Ji(),zi("aN"),Yi("numeric",NaN)}throw Zi(Ji())},zero(){switch(Mi){case".":return Ri+=Ji(),void(Ui="decimalPoint");case"e":case"E":return Ri+=Ji(),void(Ui="decimalExponent");case"x":case"X":return Ri+=Ji(),void(Ui="hexadecimal")}return Yi("numeric",0*Gi)},decimalInteger(){switch(Mi){case".":return Ri+=Ji(),void(Ui="decimalPoint");case"e":case"E":return Ri+=Ji(),void(Ui="decimalExponent")}if(!bi.isDigit(Mi))return Yi("numeric",Gi*Number(Ri));Ri+=Ji()},decimalPointLeading(){if(bi.isDigit(Mi))return Ri+=Ji(),void(Ui="decimalFraction");throw Zi(Ji())},decimalPoint(){switch(Mi){case"e":case"E":return Ri+=Ji(),void(Ui="decimalExponent")}return bi.isDigit(Mi)?(Ri+=Ji(),void(Ui="decimalFraction")):Yi("numeric",Gi*Number(Ri))},decimalFraction(){switch(Mi){case"e":case"E":return Ri+=Ji(),void(Ui="decimalExponent")}if(!bi.isDigit(Mi))return Yi("numeric",Gi*Number(Ri));Ri+=Ji()},decimalExponent(){switch(Mi){case"+":case"-":return Ri+=Ji(),void(Ui="decimalExponentSign")}if(bi.isDigit(Mi))return Ri+=Ji(),void(Ui="decimalExponentInteger");throw Zi(Ji())},decimalExponentSign(){if(bi.isDigit(Mi))return Ri+=Ji(),void(Ui="decimalExponentInteger");throw Zi(Ji())},decimalExponentInteger(){if(!bi.isDigit(Mi))return Yi("numeric",Gi*Number(Ri));Ri+=Ji()},hexadecimal(){if(bi.isHexDigit(Mi))return Ri+=Ji(),void(Ui="hexadecimalInteger");throw Zi(Ji())},hexadecimalInteger(){if(!bi.isHexDigit(Mi))return Yi("numeric",Gi*Number(Ri));Ri+=Ji()},string(){switch(Mi){case"\\":return Ji(),void(Ri+=function(){switch(qi()){case"b":return Ji(),"\b";case"f":return Ji(),"\f";case"n":return Ji(),"\n";case"r":return Ji(),"\r";case"t":return Ji(),"\t";case"v":return Ji(),"\v";case"0":if(Ji(),bi.isDigit(qi()))throw Zi(Ji());return"\0";case"x":return Ji(),function(){let u="",e=qi();if(!bi.isHexDigit(e))throw Zi(Ji());if(u+=Ji(),e=qi(),!bi.isHexDigit(e))throw Zi(Ji());return u+=Ji(),String.fromCodePoint(parseInt(u,16))}();case"u":return Ji(),Qi();case"\n":case"\u2028":case"\u2029":return Ji(),"";case"\r":return Ji(),"\n"===qi()&&Ji(),"";case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case void 0:throw Zi(Ji())}return Ji()}());case'"':return ji?(Ji(),Yi("string",Ri)):void(Ri+=Ji());case"'":return ji?void(Ri+=Ji()):(Ji(),Yi("string",Ri));case"\n":case"\r":throw Zi(Ji());case"\u2028":case"\u2029":!function(u){console.warn(`JSON5: '${to(u)}' in strings is not valid ECMAScript; consider escaping`)}(Mi);break;case void 0:throw Zi(Ji())}Ri+=Ji()},start(){switch(Mi){case"{":case"[":return Yi("punctuator",Ji())}Ui="value"},beforePropertyName(){switch(Mi){case"$":case"_":return Ri=Ji(),void(Ui="identifierName");case"\\":return Ji(),void(Ui="identifierNameStartEscape");case"}":return Yi("punctuator",Ji());case'"':case"'":return ji='"'===Ji(),void(Ui="string")}if(bi.isIdStartChar(Mi))return Ri+=Ji(),void(Ui="identifierName");throw Zi(Ji())},afterPropertyName(){if(":"===Mi)return Yi("punctuator",Ji());throw Zi(Ji())},beforePropertyValue(){Ui="value"},afterPropertyValue(){switch(Mi){case",":case"}":return Yi("punctuator",Ji())}throw Zi(Ji())},beforeArrayValue(){if("]"===Mi)return Yi("punctuator",Ji());Ui="value"},afterArrayValue(){switch(Mi){case",":case"]":return Yi("punctuator",Ji())}throw Zi(Ji())},end(){throw Zi(Ji())}};function Yi(u,e){return{type:u,value:e,line:Oi,column:Pi}}function zi(u){for(const e of u){if(qi()!==e)throw Zi(Ji());Ji()}}function Qi(){let u="",e=4;for(;e-- >0;){const e=qi();if(!bi.isHexDigit(e))throw Zi(Ji());u+=Ji()}return String.fromCodePoint(parseInt(u,16))}const Vi={start(){if("eof"===Li.type)throw uo();Wi()},beforePropertyName(){switch(Li.type){case"identifier":case"string":return xi=Li.value,void(Ti="afterPropertyName");case"punctuator":return void Xi();case"eof":throw uo()}},afterPropertyName(){if("eof"===Li.type)throw uo();Ti="beforePropertyValue"},beforePropertyValue(){if("eof"===Li.type)throw uo();Wi()},beforeArrayValue(){if("eof"===Li.type)throw uo();"punctuator"!==Li.type||"]"!==Li.value?Wi():Xi()},afterPropertyValue(){if("eof"===Li.type)throw uo();switch(Li.value){case",":return void(Ti="beforePropertyName");case"}":Xi()}},afterArrayValue(){if("eof"===Li.type)throw uo();switch(Li.value){case",":return void(Ti="beforeArrayValue");case"]":Xi()}},end(){}};function Wi(){let u;switch(Li.type){case"punctuator":switch(Li.value){case"{":u={};break;case"[":u=[]}break;case"null":case"boolean":case"numeric":case"string":u=Li.value}if(void 0===Ni)Ni=u;else{const e=Si[Si.length-1];Array.isArray(e)?e.push(u):e[xi]=u}if(null!==u&&"object"==typeof u)Si.push(u),Ti=Array.isArray(u)?"beforeArrayValue":"beforePropertyName";else{const u=Si[Si.length-1];Ti=null==u?"end":Array.isArray(u)?"afterArrayValue":"afterPropertyValue"}}function Xi(){Si.pop();const u=Si[Si.length-1];Ti=null==u?"end":Array.isArray(u)?"afterArrayValue":"afterPropertyValue"}function Zi(u){return no(void 0===u?`JSON5: invalid end of input at ${Oi}:${Pi}`:`JSON5: invalid character '${to(u)}' at ${Oi}:${Pi}`)}function uo(){return no(`JSON5: invalid end of input at ${Oi}:${Pi}`)}function eo(){return Pi-=5,no(`JSON5: invalid identifier character at ${Oi}:${Pi}`)}function to(u){const e={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};if(e[u])return e[u];if(u<" "){const e=u.charCodeAt(0).toString(16);return"\\x"+("00"+e).substring(e.length)}return u}function no(u){const e=new SyntaxError(u);return e.lineNumber=Oi,e.columnNumber=Pi,e}const ro={parse:function(u,e){$i=String(u),Ti="start",Si=[],Ii=0,Oi=1,Pi=0,Li=void 0,xi=void 0,Ni=void 0;do{Li=Hi(),Vi[Ti]()}while("eof"!==Li.type);return"function"==typeof e?ki({"":Ni},"",e):Ni},stringify:function(u,e,t){const n=[];let r,i,o,a="",s="";if(null==e||"object"!=typeof e||Array.isArray(e)||(t=e.space,o=e.quote,e=e.replacer),"function"==typeof e)i=e;else if(Array.isArray(e)){r=[];for(const u of e){let e;"string"==typeof u?e=u:("number"==typeof u||u instanceof String||u instanceof Number)&&(e=String(u)),void 0!==e&&r.indexOf(e)<0&&r.push(e)}}return t instanceof Number?t=Number(t):t instanceof String&&(t=String(t)),"number"==typeof t?t>0&&(t=Math.min(10,Math.floor(t)),s="          ".substr(0,t)):"string"==typeof t&&(s=t.substr(0,10)),c("",{"":u});function c(u,e){let t=e[u];switch(null!=t&&("function"==typeof t.toJSON5?t=t.toJSON5(u):"function"==typeof t.toJSON&&(t=t.toJSON(u))),i&&(t=i.call(e,u,t)),t instanceof Number?t=Number(t):t instanceof String?t=String(t):t instanceof Boolean&&(t=t.valueOf()),t){case null:return"null";case!0:return"true";case!1:return"false"}return"string"==typeof t?D(t):"number"==typeof t?String(t):"object"==typeof t?Array.isArray(t)?function(u){if(n.indexOf(u)>=0)throw TypeError("Converting circular structure to JSON5");n.push(u);let e=a;a+=s;let t,r=[];for(let e=0;e<u.length;e++){const t=c(String(e),u);r.push(void 0!==t?t:"null")}if(0===r.length)t="[]";else if(""===s){t="["+r.join(",")+"]"}else{let u=",\n"+a,n=r.join(u);t="[\n"+a+n+",\n"+e+"]"}return n.pop(),a=e,t}(t):function(u){if(n.indexOf(u)>=0)throw TypeError("Converting circular structure to JSON5");n.push(u);let e=a;a+=s;let t,i=r||Object.keys(u),o=[];for(const e of i){const t=c(e,u);if(void 0!==t){let u=f(e)+":";""!==s&&(u+=" "),u+=t,o.push(u)}}if(0===o.length)t="{}";else{let u;if(""===s)u=o.join(","),t="{"+u+"}";else{let n=",\n"+a;u=o.join(n),t="{\n"+a+u+",\n"+e+"}"}}return n.pop(),a=e,t}(t):void 0}function D(u){const e={"'":.1,'"':.2},t={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};let n="";for(let r=0;r<u.length;r++){const i=u[r];switch(i){case"'":case'"':e[i]++,n+=i;continue;case"\0":if(bi.isDigit(u[r+1])){n+="\\x00";continue}}if(t[i])n+=t[i];else if(i<" "){let u=i.charCodeAt(0).toString(16);n+="\\x"+("00"+u).substring(u.length)}else n+=i}const r=o||Object.keys(e).reduce(((u,t)=>e[u]<e[t]?u:t));return n=n.replace(new RegExp(r,"g"),t[r]),r+n+r}function f(u){if(0===u.length)return D(u);const e=String.fromCodePoint(u.codePointAt(0));if(!bi.isIdStartChar(e))return D(u);for(let t=e.length;t<u.length;t++)if(!bi.isIdContinueChar(String.fromCodePoint(u.codePointAt(t))))return D(u);return u}}};var io=ro;const oo=io||Object.freeze({__proto__:null,default:io});function ao(u){try{let t;if((e.existsSync(u)||e.existsSync(u+="5"))&&(t=e.readFileSync(u,"utf-8")),!t)return;return Bi.verbose(`读取配置文件 ${u}`),oo.parse(t)}catch(u){!function(u){if(!S(u))return;if(u.includes("SyntaxError: JSON5"))throw Bi.error(u),new SyntaxError("配置文件存在，但是无法解析！可能 JSON5 格式不正确！");throw new Error(u)}(u.message)}}const so=u=>c.resolve(process.cwd(),u),co=u=>c.resolve(__dirname,"../",u),Do=Array.from(new Set([so("./config/config.dev.json"),so(`./config/${wi.configFileName}`),so(`./${wi.configFileName}`),co(`./config/${wi.configFileName}`),co(`./${wi.configFileName}`)])),fo=["./config.json",so("./config/config.json")];function lo(u){let e;if(e=Array.isArray(u)?u:u.account.filter((u=>u.cookie)),0!==e.length)return function(u){const e=process.argv.find((u=>u.includes("--item")||u.includes("-i")||u.includes("-I")));if(!e)return u[0];const t=Number(e.split("=")[1])-1;return!t||t>=u.length||t<0?(Bi.warn("似乎想要指定一个不存在的用户，我们将指定第一个用户"),u[0]):u[t]}(e)}function Co(){if(globalThis.BILITOOLS_CONFIG)return globalThis.BILITOOLS_CONFIG;Do.splice(0,1,...fo);for(let u=0;u<Do.length;u++){const e=ao(Do[u]);if(e)return e}return(()=>{const{BILITOOLS_CONFIG:u,BILI_SCF_CONFIG:e,BILI_CONFIG:t}=process.env,n=u||e||t;if(n)try{return oo.parse(vi(n))}catch{throw new Error("环境中的配置不是有效的 JSON 字符串！")}})()}function po(u){if(!u)throw new Error("获取配置失败！未找到配置文件！");if(function(u){if(Array.isArray(u))return!0;return Boolean(u.account&&u.account.length)}(u)){const e=lo(u);if(e)return e}if(!u.cookie)throw new Error("配置文件中没有 cookie！");return u}function Fo(u){return u?u.split("; ").map((u=>u.split("="))):[]}function Eo(u,e){return u?e&&0!==e.length?function(u){const e=Object.keys(u).reduce(((e,t)=>e+`${t}=${u[t]}; `),"");return e.substring(0,e.length-2||0)}(function(u,e){const t=Fo(null==e?void 0:e[0]).filter((u=>2===u.length)),n=Fo(u).concat(t).filter((u=>2===u.length)),r={};for(const u of n)r[u[0]]?r[u[0]]=u[1]:Object.defineProperty(r,u[0],{value:u[1],enumerable:!0,writable:!0});return r}(u,e)):u:""}function Ao(u,e){if(!u)return null;const t=`(?:^|)${e}=([^;]*)(?:;|$)`,n=u.match(t);return n?n[1]:null}const go={cookie:"",message:{email:{host:"smtp.163.com",port:465},pushplusToken:process.env.PUSHPLUS_TOKEN,api:void 0},function:{silver2Coin:!0,liveSignTask:!0,addCoins:!0,mangaSign:!1,shareAndWatch:!0,supGroupSign:!1,liveSendMessage:!1,taskReward:!0,charging:!1,getVipPrivilege:!1,giveGift:!1,matchGame:!1,liveLottery:!1,liveRedPack:!1,liveIntimacy:!1},apiDelay:[2,6],userAgent:"",dailyRunTime:"17:30:00-23:40:00",targetLevel:void 0,stayCoins:void 0,targetCoins:void 0,customizeUp:void 0,giftUp:void 0,coinRetryNum:void 0,chargeUpId:void 0,chargePresetTime:void 0,matchCoins:void 0,matchSelection:void 0,matchDiff:void 0,match:{coins:5,selection:1,diff:0},charge:{mid:0,presetTime:31},gift:{mids:[]},coin:{customizeUp:[],retryNum:4,targetLevel:6,stayCoins:0,targetCoins:5},sls:{name:"",description:"",region:"ap-chengdu",dailyRunTime:"17:30:00-23:40:00"},lottery:{excludeAward:["舰","船","航海","代金券","优惠券","自拍","照","写真","图","提督","车车一局","再来一局","游戏道具"],includeAward:["谢"],blackUid:[65566781,1277481241,1643654862,603676925],isMoveTag:!1,moveTag:"天选时刻",pageNum:0,actFollowMsg:"delete"},intimacy:{liveSendMessage:!0,liveShare:!0,liveLike:!0,whiteList:[],blackList:[]},BILIJCT:"",USERID:0};function mo(){return k(go,!0)}function ho(u){return function(u){!function(u){u.BILIJCT=function(u){return Ao(u,"bili_jct")||""}(u.cookie),u.USERID=function(u){return Number(Ao(u,"DedeUserID"))||0}(u.cookie)}(u);const{coin:e,gift:t,charge:n}=u;I(u.apiDelay)?u.apiDelay=G(u.apiDelay):u.apiDelay=[Number(u.apiDelay)];e.customizeUp=G(e.customizeUp),t.mids=G(t.mids),0===t.mids.length&&(t.mids=e.customizeUp);n.mid||(n.mid=u.USERID);return u}(function(u){return Object.keys(yo).forEach((e=>{if(void 0!==u[e]){const[t,n]=yo[e];u[t]=u[t]||{},u[t][n]=u[e]}delete u[e]})),u}(U(mo(),u)))}const yo={targetLevel:["coin","targetLevel"],stayCoins:["coin","stayCoins"],targetCoins:["coin","targetCoins"],customizeUp:["coin","customizeUp"],coinRetryNum:["coin","retryNum"],giftUp:["gift","mids"],chargeUpId:["charge","mid"],chargePresetTime:["charge","presetTime"],matchCoins:["match","coins"],matchSelection:["match","selection"],matchDiff:["match","diff"]};class Bo{constructor(u){this.config=u,this.COOKIE=u.cookie,this.BILIJCT=u.BILIJCT,this.USERID=u.USERID,this.USER_AGENT=u.userAgent,this.BILI_API_DELAY=u.apiDelay;const e=u.message;this.MESSAGE_API=null==e?void 0:e.api,this.PUSHPLUS_TOKEN=e.pushplusToken;const t=u.coin;this.BILI_CUSTOMIZE_UP=t.customizeUp,this.BILI_COIN_RETRY_NUM=t.retryNum,this.BILI_TARGET_LEVEL=t.targetLevel,this.BILI_STAY_COINS=t.stayCoins,this.BILI_TARGET_COINS=t.targetCoins;const n=u.gift;this.BILI_GIFT_UP=n.mids;const r=u.charge;this.CHARGE_ID=r.mid,this.CHARGE_PRESET_TIME=r.presetTime;const i=u.match;this.MATCH_COINS=i.coins,this.MATCH_SELECTION=i.selection,this.MATCH_DIFF=i.diff;const o=u.lottery;this.LOTTERY_EXCLUDE=o.excludeAward,this.LOTTERY_INCLUDE=o.includeAward,this.LOTTERY_UP_BLACKLIST=o.blackUid,this.LOTTERY_MOVE_TAG=o.moveTag,this.LOTTERY_PAGE_NUM=o.pageNum}}let vo;const wo=new Proxy({},{get:(u,e)=>(vo||bo(),Reflect.get(vo,e)),set:(u,e,t)=>"config"===e&&t?(bo(t),!0):Reflect.set(vo,e,t)});let _o=null;function bo(u){u||(u=po(Co()));const e=ho(u);vo={...new Bo(po(e)),...e},_o=class extends class{static money=0;static coinsTask=5;static share=!1;static watch=!1;static currentStartFun=0;static bCoinCouponBalance=0;static vipType=0;static userLevel=0}{},_o.coinsTask=vo.BILI_TARGET_COINS}const $o=(u,e)=>{const{isTransformResponse:t,isReturnNativeResponse:n}=e;if(n)return u;if(!1===t)return u.body;const{body:r}=u;if(e.isJsonp&&S(r))return function(u){const e=u.replace(/^\w+\(/,"").replace(/\)$/,"");return JSON.parse(e)}(r);try{if(S(r)&&r.startsWith("{"))return JSON.parse(r)}catch{}return r};class To{name="VGot";constructor(u){u.baseURL&&(u.prefixUrl=u.baseURL),this.options=u,this.gotInstance=d.default.extend(u,{hooks:{afterResponse:[u=>{const{requestOptions:e}=u.request.options;var t;null!=e&&e.withBiliCookie&&(wo.COOKIE=Eo(wo.COOKIE,(null===(t=u.headers)||void 0===t?void 0:t["set-cookie"])||[]));return u}]}})}request(u){const{requestOptions:e={},headers:t={}}=this.options;return u.requestOptions=Object.assign({},e,u.requestOptions),u.headers=Object.assign({},t,u.headers),e.withBiliCookie&&(u.headers.Cookie=wo.COOKIE),e.retry&&(u.retry=e.retry),u=function(u){var e;function t(e){u.agent||(u.agent={}),u.agent[e]=u[`${e}Agent`]}return S(u.url)||(u.url=u.url.toString()),T(u.params)&&!S(u.searchParams)&&(u.searchParams={...u.searchParams,...u.params}),T(u.data)&&(null!==(e=u.headers["content-type"])&&void 0!==e&&e.startsWith("application/x-www-form-urlencoded")?u.body=R(u.data):u.json=u.data),u.httpAgent&&t("http"),u.httpsAgent&&t("https"),u.url&&u.url.startsWith("/")&&(u.url=u.url.substring(1)),u}(u),new Promise(((e,t)=>{this.gotInstance(u).then((n=>{{"function"!=typeof $o;try{const t=$o(n,u.requestOptions);e(t)}catch(u){t(u||new Error("请求错误!"))}}})).catch((u=>{t(u)}))}))}get(u,e){return S(u)?this.request({...e,method:"GET",url:u}):this.request({...u,method:"GET"})}post(u,e,t){return S(u)?this.request({...t,method:"POST",url:u,data:e}):this.request({...u,method:"POST"})}put(u,e,t){return this.request({...t,method:"PUT",url:u,data:e})}delete(u,e,t){return this.request({...t,method:"DELETE",url:u,data:e})}patch(u,e,t){return this.request({...t,method:"PATCH",url:u,data:e})}}function So(u){return new To(U({timeout:1e4,headers:{"content-type":w["content-type"],"user-agent":w["user-agent"],"accept-language":w["accept-language"],"accept-encoding":w["accept-encoding"]},requestOptions:{isTransformResponse:!0,ignoreCancelToken:!0,withBiliCookie:!0}},u||{}))}const Io=So({requestOptions:{withBiliCookie:!1}}),Oo=So();async function Po(){let u="v0.5.0";u.includes(".")?Bi.info("当前版本【v0.5.0】"):u=void 0;try{if(u||(u=function(){try{return require("../../package.json").version}catch{}}()||function(){try{return D.readFileSync(c.resolve(__dirname,"../version.txt"),"utf8").trim()}catch{}}(),Bi.info(`当前版本【v${u}】`)),!u)return;const e=await async function(){const u={timeout:6e3};try{return(await Promise.any([Io.get("https://api.github.com/repos/catlair/BiliTools/releases/latest",u),Io.get("https://gitee.com/api/v5/repos/catlair/BiliTools/releases/latest",u)])).tag_name}catch(u){return}}();e&&e!==`v${u}`&&Bi.info(`可更新：最新版本【${e}】`)}catch{}}function Lo(u){const e=function(){const u=wo.function;return u.addCoins||u.shareAndWatch||(u.taskReward=!1),u.liveIntimacy&&(u.liveSendMessage=!1),u}();return u.map((u=>e[u.name]?u:null)).filter((u=>u))}function xo(u,e){const t=function(u,e){if(u&&e)return L(u,e);if(u)return u;const t=wo.BILI_API_DELAY;if(1===t.length)return 1e3*t[0];return 1e3*L(t[0]||2,t[1]||6)}(u,e);return new Promise((u=>{setTimeout((()=>{u(t)}),t)}))}function No(){var u;const e=(null===(u=wo.config)||void 0===u?void 0:u.message)||{};["GOBOT_URL","GOBOT_TOKEN","GOBOT_QQ","SCKEY","QQ_SKEY","QQ_MODE","BARK_PUSH","BARK_SOUND","BARK_GROUP","TG_BOT_TOKEN","TG_USER_ID","TG_PROXY_AUTH","TG_PROXY_HOST","TG_PROXY_PORT","TG_API_HOST","DD_BOT_TOKEN","DD_BOT_SECRET","QYWX_KEY","QYWX_AM","IGOT_PUSH_KEY","PUSH_PLUS_TOKEN","PUSH_PLUS_USER"].forEach((u=>{const t=e[(n=u,n.toLowerCase().replace(/_(\w)/g,((u,e)=>e.toUpperCase())))]||e[u]||process.env[u];var n;t&&(process.env[u]=t)})),wo.PUSHPLUS_TOKEN&&(process.env.PUSH_PLUS_TOKEN=wo.PUSHPLUS_TOKEN),function(){process.env.PUSH_KEY&&(ko=process.env.PUSH_KEY);process.env.QQ_SKEY&&(ua=process.env.QQ_SKEY);process.env.QQ_MODE&&(ea=process.env.QQ_MODE);process.env.BARK_PUSH?(Uo=process.env.BARK_PUSH.indexOf("https")>-1||process.env.BARK_PUSH.indexOf("http")>-1?process.env.BARK_PUSH:`https://api.day.app/${process.env.BARK_PUSH}`,process.env.BARK_SOUND&&(Ro=process.env.BARK_SOUND),process.env.BARK_GROUP&&(jo=process.env.BARK_GROUP)):Uo&&-1===Uo.indexOf("https")&&-1===Uo.indexOf("http")&&(Uo=`https://api.day.app/${Uo}`);process.env.TG_BOT_TOKEN&&(Go=process.env.TG_BOT_TOKEN);process.env.TG_USER_ID&&(Mo=process.env.TG_USER_ID);process.env.TG_PROXY_AUTH&&(Jo=process.env.TG_PROXY_AUTH);process.env.TG_PROXY_HOST&&(Ho=process.env.TG_PROXY_HOST);process.env.TG_PROXY_PORT&&(qo=process.env.TG_PROXY_PORT);process.env.TG_API_HOST&&(Ko=process.env.TG_API_HOST);process.env.DD_BOT_TOKEN&&(Yo=process.env.DD_BOT_TOKEN,process.env.DD_BOT_SECRET&&(zo=process.env.DD_BOT_SECRET));process.env.QYWX_KEY&&(Qo=process.env.QYWX_KEY);process.env.QYWX_AM&&(Vo=process.env.QYWX_AM);process.env.IGOT_PUSH_KEY&&(Wo=process.env.IGOT_PUSH_KEY);process.env.PUSH_PLUS_TOKEN&&(Xo=process.env.PUSH_PLUS_TOKEN);process.env.PUSH_PLUS_USER&&(Zo=process.env.PUSH_PLUS_USER)}()}process.env.IS_LOCAL="true",async function(){const{dailyTasks:u}=await Promise.resolve().then((function(){return ks}));await Po(),await u()}();let ko="",Uo="",Ro="",jo="QingLong",Go="",Mo="",Ho="",qo="",Jo="",Ko="api.telegram.org",Yo="",zo="",Qo="",Vo="",Wo="",Xo="",Zo="",ua="",ea="";async function ta(u,e){var t;const n=null===(t=wo.config.message)||void 0===t?void 0:t.email;if(!(n&&n.pass&&n.from&&n.host))return;const r=Number(n.port)||465,i=f.createTransport({host:n.host,port:r,secure:465===r,auth:{user:n.from,pass:n.pass}}),o=await i.sendMail({from:`${u} <${n.from}>`,to:n.to,subject:u,headers:{"Content-Type":"text/plain; charset=utf-8"},text:e.replace(/\n/g,"\r\n")});Bi.info(`邮件消息已发送: ${o.messageId}`)}async function na(u,e){try{const t=wo.MESSAGE_API;if(!t)return;const n=t.replace("{title}",u).replace("{text}",e);await Io.get(n)}catch(u){Bi.info(`自定义接口消息发送失败: ${u}`),Bi.error(u)}}function ra(u,e,t=2100){return new Promise((n=>{if(ko){e=e.replace(/[\n\r]/g,"\n\n");const r={url:ko.includes("SCT")?`https://sctapi.ftqq.com/${ko}.send`:`https://sc.ftqq.com/${ko}.send`,params:`text=${u}&desp=${e}`,headers:{"Content-Type":"application/x-www-form-urlencoded"},timeout:15e3};setTimeout((()=>{Io.post(r).then((u=>{0===u.errno||0===u.data.errno?Bi.info("server酱发送通知消息成功🎉"):1024===u.errno?Bi.info(`server酱发送通知消息异常: ${u.errmsg}`):Bi.info(`server酱发送通知消息异常\n${JSON.stringify(u)}`)})).catch((u=>{Bi.info("发送通知调用API失败！！"),Bi.info(u)})).finally((()=>{n("")}))}),t)}else n("")}))}function ia(u,e){return new Promise((t=>{if(ua){const n={url:`https://push.xuthus.cc/${ea}/${ua}`,headers:{"Content-Type":"application/json"},data:{},params:{}};u=u.replace(/京豆/g,"豆豆"),e=(e=(e=e.replace(/京豆/g,"")).replace(/🐶/g,"")).replace(/红包/g,"H包"),"email"===ea?n.data={t:u,c:e}:n.params=`${u}\n\n${e}`;const r=function(u){switch(u){case"send":return"个人";case"group":return"QQ群";case"wx":return"微信";case"ww":return"企业微信";case"email":return"邮件";default:return"未知方式"}};Io.post(n).then((u=>{200===u.code?Bi.info(`酷推发送${r(ea)}通知消息成功🎉`):400===u.code?Bi.info(`QQ酷推(Cool Push)发送${r(ea)}推送失败：${u.msg}`):503===u.code?Bi.info(`QQ酷推出错，${u.message}：${u.data}`):Bi.info(`酷推推送异常: ${JSON.stringify(u)}`)})).catch((u=>{Bi.info(`发送${r(ea)}通知调用API失败！！`),Bi.info(u)})).finally((()=>{t("")}))}else t("")}))}function oa(u,e,t={}){return new Promise((n=>{if(Uo){const r={url:`${Uo}/${encodeURIComponent(u)}/${encodeURIComponent(e)}?sound=${Ro}&group=${jo}&${R(t)}`,headers:{"Content-Type":"application/x-www-form-urlencoded"},timeout:15e3};Io.get(r).then((u=>{200===u.code?Bi.info("Bark APP发送通知消息成功🎉"):Bi.info(`Bark APP发送通失败：${u.message}`)})).catch((u=>{Bi.info("Bark APP发送通知调用API失败！！"),Bi.error(u)})).finally((()=>{n("")}))}n("")}))}function aa(u,e){return new Promise((t=>{if(Go&&Mo){const n={url:`https://${Ko}/bot${Go}/sendMessage`,params:`chat_id=${Mo}&text=${u}\n\n${e}&disable_web_page_preview=true`,headers:{"Content-Type":"application/x-www-form-urlencoded"},timeout:15e3};if(Ho&&qo){const u=l.httpsOverHttp({proxy:{host:Ho,port:+qo,proxyAuth:Jo},maxSockets:1});Object.assign(n,{httpsAgent:u})}Io.post(n).then((u=>{u.ok?Bi.info("Telegram发送通知消息成功🎉。"):400===u.error_code?Bi.info("请主动给bot发送一条消息并检查接收用户ID是否正确。"):401===u.error_code&&Bi.info("Telegram bot token 填写错误。")})).catch((u=>{Bi.info("telegram发送通知消息失败！！"),Bi.info(u)})).finally((()=>{t("")}))}else t("")}))}function sa(u,e){return new Promise((t=>{const n={url:`https://oapi.dingtalk.com/robot/send?access_token=${Yo}`,data:{msgtype:"text",text:{content:` ${u}\n\n${e}`}},headers:{"Content-Type":"application/json"},timeout:15e3};if(Yo){if(zo){const u=require("crypto"),e=Date.now(),t=u.createHmac("sha256",zo);t.update(`${e}\n${zo}`);const r=encodeURIComponent(t.digest("base64"));n.url=`${n.url}&timestamp=${e}&sign=${r}`}Io.post(n).then((u=>{0===u.errcode?Bi.info("钉钉发送通知消息成功🎉。"):Bi.info(`钉钉发送通知失败：${u.errmsg}`)})).catch((u=>{Bi.info("钉钉发送通知消息失败！！"),Bi.info(u)})),t("")}else t("")}))}function ca(u,e){return new Promise((t=>{const n={url:`https://qyapi.weixin.qq.com/cgi-bin/webhook/send?key=${Qo}`,data:{msgtype:"text",text:{content:` ${u}\n\n${e}`}},headers:{"Content-Type":"application/json"},timeout:15e3};Qo&&Io.post(n).then((u=>{0===u.errcode?Bi.info("企业微信发送通知消息成功🎉。"):Bi.info(`企业微信发送通知失败：${u.errmsg}`)})).catch((u=>{Bi.info("企业微信发送通知消息失败！！"),Bi.info(u)})).finally((()=>{t("")})),t("")}))}function Da(u){const e=Vo.split(",");if(e[2]){const t=e[2].split("|");let n="";for(let e=0;e<t.length;e++){const r="签到号 "+(e+1);u.match(r)&&(n=t[e])}return n||(n=e[2]),n}return"@all"}function fa(u,e){return new Promise((t=>{if(Vo){const n=Vo.split(","),r={url:"https://qyapi.weixin.qq.com/cgi-bin/gettoken",data:{corpid:`${n[0]}`,corpsecret:`${n[1]}`},headers:{"Content-Type":"application/json"},timeout:15e3};Io.post(r).then((r=>{const i=e.replace(/\n/g,"<br/>"),o=JSON.parse(r).access_token;let a;switch(n[4]){case"0":a={msgtype:"textcard",textcard:{title:`${u}`,description:`${e}`,url:"https://github.com/whyour/qinglong",btntxt:"更多"}};break;case"1":a={msgtype:"text",text:{content:`${u}\n\n${e}`}};break;default:a={msgtype:"mpnews",mpnews:{articles:[{title:`${u}`,thumb_media_id:`${n[4]}`,author:"智能助手",content_source_url:"",content:`${i}`,digest:`${e}`}]}}}n[4]||(a={msgtype:"text",text:{content:`${u}\n\n${e}`}}),a={url:`https://qyapi.weixin.qq.com/cgi-bin/message/send?access_token=${o}`,data:{touser:`${Da(e)}`,agentid:`${n[3]}`,safe:"0",...a},headers:{"Content-Type":"application/json"}},Io.post(a).then((u=>{0===u.errcode?Bi.info("成员ID:"+Da(e)+"企业微信应用消息发送通知消息成功🎉。"):Bi.info(`企业微信应用：${u.errmsg}`)})).catch((u=>{Bi.info("成员ID:"+Da(e)+"企业微信应用消息发送通知消息失败！！"),Bi.info(u)})).finally((()=>{t("")}))})).catch((u=>{Bi.error("企业微信应用消息发送通知消息失败！！")}))}else t("")}))}function la(u,e,t={}){return new Promise((n=>{if(Wo){if(!new RegExp("^[a-zA-Z0-9]{24}$").test(Wo))return Bi.info("您所提供的IGOT_PUSH_KEY无效"),void n("");const r={url:`https://push.hellyw.com/${Wo.toLowerCase()}`,params:`title=${u}&content=${e}&${R(t)}`,headers:{"Content-Type":"application/x-www-form-urlencoded"},timeout:15e3};Io.post(r).then((u=>{"string"==typeof u&&(u=JSON.parse(u)),0===u.ret?Bi.info("iGot发送通知消息成功🎉"):Bi.info(`iGot发送通知消息失败：${u.errMsg}`)})).catch((u=>{Bi.info("发送通知调用API失败！！"),Bi.info(u)})).finally((()=>{n("")}))}else n("")}))}function da(u,e){return new Promise((t=>{if(Xo){e=e.replace(/[\n\r]/g,"<br>");const n={url:"https://www.pushplus.plus/send",params:{token:`${Xo}`,title:`${u}`,content:`${e}`,topic:`${Zo}`},headers:{"Content-Type":" application/json"},timeout:15e3};Io.post(n).then((u=>{200===u.code?Bi.info(`push+发送${Zo?"一对多":"一对一"}通知消息完成。`):Bi.info(`push+发送${Zo?"一对多":"一对一"}通知消息失败：${u.msg}`)})).catch((u=>{Bi.info(`push+发送${Zo?"一对多":"一对一"}通知消息失败！！`),Bi.info(u)})).finally((()=>{t("")}))}else t("")}))}async function Ca(u,e){Bi.info("----【消息推送】----"),u=`Bili-${_o.nickname}-${u}`,await async function(u,e,t={},n="\n\n本通知 By：https://github.com/catlair/BiliTools"){No(),e+=n,await Promise.all([ra(u,e),da(u,e)]),await Promise.all([oa(u,e,t),aa(u,e),sa(u,e),ca(u,e),fa(u,e),la(u,e,t),ta(u,e),na(u,e),ia(u,e)])}(u,e,void 0,"")}const pa=So({baseURL:m,headers:{"user-agent":wo.USER_AGENT}}),Fa=So({baseURL:h,headers:{Referer:g,"user-agent":wo.USER_AGENT}}),Ea=So({baseURL:y,headers:{Referer:g,"user-agent":wo.USER_AGENT}}),Aa=So({baseURL:B,headers:{"user-agent":wo.USER_AGENT}}),ga=So({baseURL:v,headers:{"user-agent":wo.USER_AGENT}});function ma(u=1,e=50,t=1){return Fa.get(`/xlive/app-ucenter/v1/fansMedal/panel?page=${u}&page_size=${e}&target_id=${t}`)}function ha({ruid:u,gift_num:e,bag_id:t,gift_id:n,roomid:r}){const i=wo.BILIJCT,o=i,a={gift_id:n,ruid:u,gift_num:e,bag_id:t,biz_id:r,rnd:(new Date).getTime(),send_ruid:0,storm_beat_id:0,metadata:"",price:0,visit_id:"",csrf:i,platform:"pc",biz_code:"Live",csrf_token:o,uid:wo.USERID};return Fa.post("/xlive/revenue/v2/gift/sendBag",a,{headers:{Origin:p}})}function ya(){return Ea.get("/x/web-interface/nav",{headers:{Origin:C}})}function Ba(){return Ea.get("/x/web-interface/coin/today/exp")}function va(u=1,e=50,t=-10){return Ea.get("/x/relation/tag",{params:{tagid:t,pn:u,ps:e}})}function wa(u,e){return Ea.post("/x/relation/tags/addUsers?cross_domain=true",{fids:u,tagids:e,csrf:wo.BILIJCT},{headers:{Origin:F}})}function _a(u){const e=u.level_info,t=e.current_level;if(t>=wo.BILI_TARGET_LEVEL&&(_o.coinsTask=0),Bi.info(`当前等级: ${e.current_level}`),t>=6){const u=wo.config.function;u.shareAndWatch=!1,u.addCoins=!1,u.taskReward=!1,Bi.info("已经满级，不需要再投币了，做个白嫖怪吧")}else{const u=e.next_exp-e.current_exp;Bi.info(`距离升级还需要 ${u} 经验，预计 ${function(u){if(wo.BILI_TARGET_COINS<=0)return u/15;const e=10*wo.BILI_TARGET_COINS+15,t=u/e,n=_o.money/(wo.BILI_TARGET_COINS-1);return t<n?Math.floor(t):(u-n*e)/25+n}(u).toFixed(2)} 天`)}}async function ba(u){try{var e;const{data:t}=await pa.get("/site/getCoin");Bi.info(`登录成功: ${u.uname}`),Bi.info(`硬币余额: ${t.money||0}`),_o.nickname=function(u){const e=u.length;return e<=3?u:`${u[0]}**${u[e-1]}`}(u.uname),_o.money=t.money||0,_o.userLevel=u.level_info.current_level,_o.bCoinCouponBalance=(null===(e=u.wallet)||void 0===e?void 0:e.coupon_balance)||0,_a(u),function(u){let e="";switch(_o.vipType=u.vipType,u.vipType){case 0:e="无大会员";break;case 1:e="月度大会员";break;case 2:e="年度大会员"}0===u.vipStatus&&(e="无大会员"===e?e:e+"[已过期]"),Bi.info(`大会员状态: ${e}`)}(u)}catch(u){Bi.error(`获取硬币信息异常: ${u.message}`),Bi.debug(u)}}function $a(u,e,t=1){return Ea.post("/x/web-interface/coin/add",{aid:u,multiply:e,selectLike:t,csrf:wo.BILIJCT})}function Ta(u,e=1){return Oo.post("https://www.bilibili.com/audio/music-service-c/web/coin/add",{sid:u,multiply:e,csrf:wo.BILIJCT})}const Sa="video",Ia="audio",Oa="article";async function Pa(u=!0){try{const e=wo.USERID,{data:t,message:n,code:r}=await(u?function(u=1,e=50){return va(u,e,-10)}():function(u,e=1,t=50,n="desc",r="attention"){return Ea.get("/x/relation/followings",{params:{vmid:u,pn:e,ps:t,order:n,order_type:r}})}(e)),i=u?t:t.list;if(!i||0===i.length)return{msg:"-1",data:{}};if(0===r){await xo();const{mid:u}=j(i)||{};return await Na(u)}return{msg:u?`未获取到特别关注列表: ${r}-${n}`:`未获取到关注列表: ${r}-${n}`,data:{}}}catch(u){return{msg:u.message,data:{}}}}async function La(){const u=j([1,3,4,5,160,22,119]);try{const{data:e,message:t,code:n}=await function(u=1,e=3){return Ea.get("/x/web-interface/ranking/region",{params:{rid:u,day:e}})}(u,3);if(0==n){const{aid:u,title:t,author:n}=j(e);return{msg:"0",data:{id:Number(u),title:t,author:n}}}return{msg:`未获取到排行信息: ${n}-${t}`,data:{}}}catch(u){return{msg:u.message,data:{}}}}async function xa(){const u=wo.BILI_CUSTOMIZE_UP;return 0===u.length?{msg:"-1",data:{}}:await Na(j(u))}async function Na(u){try{const{code:e,data:t,message:n}=await function(u){return Ea.get(`/x/space/navnum?mid=${u}`)}(u);if(e)return{msg:`通过uid获取视频失败: ${e}-${n}`,data:{}};await xo();const{video:r,audio:i,article:o}=t,{type:a,page:s,index:c}=function([u,e,t]){const n=u+e+t;if(!n)return;const r=L(0,n-1);let i=r;if(r<u)return{type:Sa,page:P(30,i+1),index:i%30};const o=u+e;return i=r-u,r<o?{type:Ia,page:P(30,i+1),index:i%30}:(i=r-o,{type:Oa,page:P(12,i+1),index:i%12})}([r,i,o]),D={[Sa]:ka,[Ia]:Ua,[Oa]:Ra},f=await D[a](u,s,c);return f.message?{msg:f.message,data:{}}:{msg:"0",data:f}}catch(u){return Bi.debug(u),{msg:u.message,data:{}}}}async function ka(u,e,t){const{code:n,data:r,message:i}=await function(u,e=30,t=1,n=""){return Ea.get("/x/space/arc/search",{params:{jsonp:"jsonp",order:"pubdate",keyword:n,pn:t,tid:0,ps:e,mid:u}})}(u,30,e);if(n)return{message:i};const{aid:o,title:a,author:s}=r.list.vlist[t];return{type:Sa,id:o,title:a,author:s}}async function Ua(u,e,t){const{code:n,data:r,msg:i}=await function(u,e=30,t=1){return Ea.get("/audio/music-service/web/song/upper",{params:{jsonp:"jsonp",order:1,pn:t,ps:e,uid:u}})}(u,30,e);if(n)return{message:i};const{data:o}=r,{id:a,uname:s,title:c}=o[t];return{type:Ia,id:a,title:c,author:s}}async function Ra(u,e,t){const{code:n,data:r,message:i}=await function(u,e=12,t=1){return Ea.get("/x/space/article",{params:{callback:"__test",jsonp:"jsonp",sort:"publish_time",pn:t,ps:e,mid:u},requestOptions:{isJsonp:!0}})}(u,12,e);if(n)return{message:i};const{articles:o}=r,{id:a,title:s,author:{name:c}}=o[t];return{type:Oa,id:a,title:s,author:c,mid:u}}const ja=function(){const u=[xa,Pa,()=>Pa(!1),La];return wo.BILI_CUSTOMIZE_UP||u.shift(),u}();async function Ga(u=0){ja.splice(0,_o.currentStartFun+u);for(let u=0;u<ja.length;u++){const e=ja[u];let t=Number(wo.BILI_COIN_RETRY_NUM??4);for(t=t<1?1:t>8?8:t;t--;){await xo();const u=await e();if("-1"===u.msg&&(t=0),"0"===u.msg)return u}t<=0&&(_o.currentStartFun=u)}return{msg:"-1",data:{id:0}}}async function Ma({id:u,coin:e=1,type:t="video",mid:n}){const r={[Sa]:$a,[Ia]:Ta,[Oa]:(u,e=1)=>function(u,e,t=1){return Ea.post("/x/web-interface/coin/add",{aid:e,upid:u,avtype:2,multiply:t,csrf:wo.BILIJCT})}(n,u,e)},i=await r[t](Number(u),e);return{code:i.code,message:i.message||i.msg}}async function Ha(u){if(await async function(){try{const{data:u,code:e}=await Ba();if(0==e){const e=wo.BILI_TARGET_COINS-u/10;_o.coinsTask=e>0?e:0}}catch(u){}}(),_o.coinsTask<=0||_o.money<=0)return!0;const{data:e,msg:t}=await Ga(u.priority);return null!=e&&e.id&&"0"==t?(await xo(),await async function(u,e){const{id:t,title:n,author:r,type:i,mid:o}=u;try{const u=await Ma({id:t,type:i,mid:o});if(0===u.code)_o.money--,_o.coinsTask--,e.num++,Bi.info(`给[${n}--up【${r}】]投币成功`);else if(34005===u.code)e.fillCount++,Bi.verbose(`当前稿件[${t}]不能再投币了`),e.fillCount>=3&&(Bi.warn("自定义用户组投币似乎没有币可投了"),e.priority++);else{if(-111===u.code||-104===u.code)return Bi.warn(`${t} ${u.message} 无法继续进行投币`),!0;if(e.eCount++,Bi.warn(`给${t}投币失败 ${u.code} ${u.message}`),e.prevCode===u.code)return!0;e.prevCode=u.code}}catch(u){e.eCount++,Bi.error(`投币异常 ${u.message}`)}finally{await xo(1500)}return!1}(e,u)):(u.eCount++,!1)}async function qa(){try{const{data:u,code:e,message:t}=await ga.get("/link_group/v1/member/my_groups");return 0===e?(null==u?void 0:u.list)||[]:(Bi.warn(`获取自己的应援团异常失败: ${t}`),[])}catch(u){Bi.error(`获取自己的应援团异常: ${u}`)}}const Ja=["(⌒▽⌒)","（￣▽￣）","(=・ω・=)","(｀・ω・´)","(〜￣△￣)〜","(･∀･)","(°∀°)ﾉ","(￣3￣)","╮(￣▽￣)╭","_(:3」∠)_","( ´_ゝ｀)","←_←","→_→","(<_<)","(>_>)","(;¬_¬)","(ﾟДﾟ≡ﾟдﾟ)!?","Σ(ﾟдﾟ;)","Σ( ￣□￣||)","(´；ω；`)","（/TДT)/","(^・ω・^ )","(｡･ω･｡)","(●￣(ｴ)￣●)","ε=ε=(ノ≧∇≦)ノ","(´･_･`)","(-_-#)","（￣へ￣）","(￣ε(#￣) Σ","ヽ(`Д´)ﾉ","（#-_-)┯━┯","(╯°口°)╯(┴—┴","←◡←","( ♥д♥)","Σ>―(〃°ω°〃)♡→","⁄(⁄ ⁄•⁄ω⁄•⁄ ⁄)⁄","(╬ﾟдﾟ)▄︻┻┳═一","･*･:≡(　ε:)","(汗)","(苦笑)"].concat("1","2","3","4","5","6","7","8","9","签到","哈哈"),Ka=new yi({console:"debug",file:"debug"},"live");async function Ya(){let u=99,e=0;const t=[];try{for(;e<u;){const{code:n,message:r,data:i}=await ma(e+1,50,wo.USERID);if(0!==n)return Bi.verbose(`获取勋章信息失败 ${n} ${r}`),null;if(!i)return t;u=i.page_info.total_page,e=i.page_info.current_page,t.push(...i.list,...i.special_list)}return t}catch(u){return Bi.error(`获取勋章异常 ${u.message}`),null}}function za({room_info:u,medal:e}){if(null==u||!u.room_id)return!1;if(e.level>=20)return!1;if(e.today_feed>=e.day_limit)return!1;const{whiteList:t,blackList:n}=wo.intimacy;return t&&t.length?!!t.includes(u.room_id):!n||!n.includes(u.room_id)}async function Qa(u,e){const t=Ja[L(Ja.length-1)];try{const{code:n,message:r}=await function(u,e){const t=wo.BILIJCT,n=t;return e||(e=L(10).toString()),Fa.post("/msg/send",{color:5566168,fontsize:25,mode:1,msg:e,rnd:Date.now(),roomid:u,bubble:0,csrf:t,csrf_token:n})}(u,t);return 0===n||(11e3===n?(Bi.warn(`【${e}】${u}-可能未开启评论`),!1):(Bi.warn(`【${e}】${u}-发送失败 ${r}`),Bi.verbose(`code: ${n}`),!1))}catch(u){Bi.verbose(`发送弹幕异常 ${u.message}`)}}async function Va(u){try{const{code:t,message:n,data:r}=await(e=u,Fa.post("xlive/web-room/v1/index/TrigerInteract",{roomid:e,interact_type:3,csrf:wo.BILIJCT,csrf_token:wo.BILIJCT,visit_id:""}));if(0===t)return r;Bi.info(`【${u}】直播间分享失败 ${t} ${n}`)}catch(e){Bi.warn(`分享直播间 [${u}] 异常 ${e.message}`)}var e}async function Wa(u){try{const{code:t,message:n,data:r}=await(e=u,Fa.post("xlive/web-ucenter/v1/interact/likeInteract",{roomid:e,csrf:wo.BILIJCT,csrf_token:wo.BILIJCT}));if(0===t)return r;Bi.info(`【${u}】直播间点赞失败 ${t} ${n}`)}catch(u){Bi.warn(`点赞直播间异常 ${u.message}`)}var e}async function Xa(){const u=(e=await Ya())&&0!==e.length?e.filter(za):[];var e;for(let e=0;e<u.length;e++){const t=u[e];await Za(t)}}async function Za(u){const{room_info:e,anchor_info:t}=u;if(!e||!t)return;const{liveLike:n,liveSendMessage:r,liveShare:i}=wo.intimacy,o=t.nick_name,a=e.room_id;r&&(Ka.verbose(`【${o}】开始发送直播弹幕`),await Qa(a,o)),i&&async function(){await xo(100,300);for(let u=0;u<5;u++)Ka.verbose(`分享 [${o}] 直播间`),await Va(a),await xo(4e3)}().catch((u=>Bi.error(u))),n&&async function(){await xo(100,300);for(let u=0;u<3;u++)Ka.verbose(`给 [${o}] 直播间点赞`),await Wa(a),await xo(6500)}().catch((u=>Bi.error(u))),await xo(22e3)}async function us(){try{const{data:u,message:e,code:t}=await ya();if(0!==t)return void Bi.warn(`获取用户信息失败：${t} ${e}`);!function(u){var e;_o.bCoinCouponBalance=(null===(e=u.wallet)||void 0===e?void 0:e.coupon_balance)||0}(u)}catch(u){Bi.error(`获取用户信息异常：${u.message}`)}}var es;function ts(){const u=O(),e=u.getDate(),t=function(u){const e=u||O(),t=e.getFullYear(),n=e.getMonth()+1;return 2===n?t%4==0&&t%100!=0||t%400==0?29:28:[4,6,9,11].includes(n)?30:31}(u),n=wo.CHARGE_PRESET_TIME;return _o.bCoinCouponBalance<2?(Bi.info(`剩余券为${_o.bCoinCouponBalance}，不足2跳过充电`),!1):t===e?(Bi.info("今天是最后一天了"),!0):!(n>e)||(Bi.info(`预设时间为${n}，不符合条件`),!1)}async function ns(){try{const{data:u,code:e,message:t}=await Ea.get("/x/vip/privilege/my",{headers:{origin:C,referer:g}});if(0!==e)return void Bi.info(`获取领取状态失败：${e} ${t}`);const{list:n}=u;return n.slice(0,2).filter((u=>{const e=parseInt(((new Date).getTime()/1e3).toString());return 0===u.state&&e>u.period_end_unix}))}catch(u){Bi.error(`获取领取状态出现异常：${u.message}`)}}async function rs(u){try{const e=function(u){switch(u){case 1:return"B 币券";case 2:return"大会员优惠券";default:return""}}(u),{code:t,message:n}=await function(u=1){return Ea.post("/x/vip/privilege/receive",{csrf:wo.BILIJCT,type:u},{headers:{origin:A,referer:g}})}(u);let r="成功";return 0===t&&(r=`失败 ${n}`),Bi.info(`领取${e} ${r}`),!0}catch(u){Bi.error(`领取权益出现异常：${u.message}`)}return!1}async function is(u){let e=0,t=!1;for(;!(t||(t=await rs(u),e>2));)e++;return t}!function(u){u[u["成功"]=4]="成功",u[u["低于20电池"]=-2]="低于20电池",u[u["B币不足"]=-4]="B币不足"}(es||(es={}));let os=0;async function as(){try{const{data:{list:u}}=await function(u=3394945){const e=(new Date).getTime();return Fa.get(`/xlive/web-room/v1/gift/bag_list?t=${e}&room_id=${u}`)}();return u.filter((u=>{if(u.expire_at<=0)return!1;const e=(1e3*u.expire_at-(new Date).getTime())/864e5<2,t=![1,30607].includes(u.gift_id);return t&&e&&Bi.info(`${u.gift_name} 即将过期请尽快投喂`),!t&&e}))}catch(u){if(os)return null;await as(),os++}}async function ss(u){try{const{data:{live_room:e,name:t}}=await function(u){return Ea.get(`/x/space/acc/info?mid=${u}&jsonp=jsonp`)}(u);if(await xo(),e.roomStatus)return{roomid:e.roomid,name:t}}catch{}}function cs(u,e,t,n){const r=wo.BILIJCT,i={is_fav:0,main_id:e,oid:u,detail_id:t,count:n,csrf:r,csrf_token:r};return Ea.post("/x/esports/guess/add",i)}function Ds(){return _o.money-wo.MATCH_COINS<wo.BILI_TARGET_COINS&&(Bi.info(`需要保留${wo.BILI_TARGET_COINS}个硬币，任务结束`),!0)}async function fs(){const{data:u,code:e}=await va(1,1,0);if(0!==e)throw new Error(`获取最后一个关注失败: ${e}`);return u[0]}async function ls(u){const{data:e,code:t}=await Ea.get("/x/relation/tags?jsonp=jsonp&callback=__jp3",{headers:{Referer:"https://space.bilibili.com/1/fans/follow?tagid=0"},requestOptions:{isJsonp:!0}});if(0===t)return e.find((e=>e.name===u));Bi.warn(`获取分组列表失败: ${t}`)}async function ds(u){const e=await ls(u);if(e)return e.tagid;await xo(300);const{data:t,code:n,message:r}=await(i=u,Ea.post("/x/relation/tag/create",{tag:i,jsonp:"jsonp",csrf:wo.BILIJCT}));var i;if(22106===n){await xo(300);const e=await ls(u);return e&&e.tagid}return 0!==n&&Bi.warn(`创建分组失败: ${n}-${r}`),t.tagid}async function Cs(u,e="天选时刻"){if(0===u.length)return;const t=await ds(e);if(t)for(const e of u){const{code:u,message:n}=await wa(e.mid,t);0!==u&&Bi.warn(`移动【${e.uname}】失败: ${u}-${n}`),await xo()}}async function ps(u,e,t,n=1){if(u.length>e.length)return;const{data:r,code:i,message:o}=await va(n,20,0);if(0===i){for(const{mid:n,uname:i}of r){if(u.length>=e.length)return;if(n===t)return;(e.includes(n)||e.includes(i))&&u.push({mid:n,uname:i})}if(!(r.length<20))return await ps(u,e,t,n+1)}else Bi.warn(`获取关注用户失败: ${i}-${o}`)}const Fs=0,Es=1,As=5,gs=1,ms=504,hs=1096;let ys;async function Bs(){try{const{data:u,code:e,message:t}=await Fa.get("/xlive/web-interface/v1/index/getWebAreaList?source_id=2");return 0!==e&&Bi.info(`获取直播分区失败: ${e}-${t}`),u.data.map((u=>u.list)).map((u=>u.map((u=>({areaId:u.id,parentId:u.parent_id})))))}catch(u){throw Bi.error(`获取直播分区异常: ${u.message}`),u}}async function vs(u,e,t=1,n="lottery"){try{await xo(100);const{data:r,code:i,message:o}=await function(u,e,t=1){return Fa.get(`/xlive/web-interface/v1/second/getList?platform=web&parent_area_id=${u}&area_id=${e}&page=${t}`)}(e,u,t);return 0!==i&&Bi.info(`获取直播间列表失败: ${i}-${o}`),function(u){const e=[],t=[];return u.forEach((u=>{const n=u.pendant_info[2];n&&(n.pendent_id===ms?e.push(u):n.pendent_id===hs&&t.push(u))})),{lotteryTime:e,lotteryPacket:t}}(r.list)["lottery"===n?"lotteryTime":"lotteryPacket"]}catch(u){throw Bi.error(`获取直播间列表异常: ${u.message}`),u}}async function ws(u,e,t=1){const n=await vs(u,e,t),r=[];for(const u of n){const e=await _s(u);e&&(r.push({...e,uid:u.uid,uname:u.uname}),await xo(100))}return r}async function _s(u){if(wo.LOTTERY_UP_BLACKLIST.includes(u.uid))return void Bi.info(`跳过黑名单用户: ${u.uname}`);let e,t,n;try{({data:t,code:e,message:n}=await(r=u.roomid,Fa.get(`/xlive/lottery-interface/v1/Anchor/Check?roomid=${r}`)))}catch(e){return void Bi.info(`直播间${u.roomid}检测异常: ${e.message}`)}var r;if(0!==e)return void Bi.debug(`直播间${u.roomid}检测失败: ${e}-${n}`);if(null===t)return;const i=wo.LOTTERY_EXCLUDE.some((u=>t.award_name.match(u)));if(!wo.LOTTERY_INCLUDE.some((u=>t.award_name.match(u)))&&i)Bi.info(`跳过屏蔽奖品: ${t.award_name}`);else if(t.status!==gs);else if(t.gift_price>0);else{if(t.require_type===Fs||t.require_type===Es)return t;if(t.require_type===As&&_o.userLevel>=t.require_value)return t}}async function bs(u){try{const{id:t,gift_id:n,gift_num:r,award_name:i,uid:o,uname:a,require_type:s,require_text:c}=u;Bi.info(`天选主播：【${a}】`),Bi.info(`奖品：${i}`);const{code:D,message:f}=await(e={id:t,gift_id:n,gift_num:r},Fa.post("/xlive/lottery-interface/v1/Anchor/Join",{...e,csrf:wo.BILIJCT,csrf_token:wo.BILIJCT,visit_id:x(),platform:"pc"}));if(0!==D)return void Bi.info(`天选失败: ${D}-${f}`);if(Bi.info("天选成功 √"),s===Es){N(ys,o);(function(u){const e=(u=u.replace("关注主播","")).split(/\s*\+\s*/);return e.shift(),e})(c).forEach((u=>N(ys,u)))}}catch(u){Bi.info(`天选异常: ${u.message}`)}var e}async function $s(u,e,t=2){for(let n=1;n<=t;n++){const t=await ws(u,e,n);for(const u of t)await bs(u),await xo(300)}}async function Ts(u){try{const{data:e,code:t}=await function(u){return Fa.get(`/xlive/lottery-interface/v1/lottery/getLotteryInfoWeb?roomid=${u}`)}(u);if(0!==t)return;const{popularity_red_pocket:n}=e;if(!n)return;const{lot_id:r,lot_status:i}=n[0];if(2===i)return;return r}catch(u){}}async function Ss(u,e,t=1){const n=await vs(u,e,t,"redPack"),r=[];for(const u of n){const e=await Ts(u.roomid);e&&(r.push({uid:u.uid,uname:u.uname,lot_id:e,room_id:u.roomid}),await xo(100))}return r}async function Is(u){try{const{lot_id:t,uid:n,uname:r,room_id:i}=u;Bi.info(`红包主播：【${r}】`);const{code:o,message:a}=await(e={room_id:i,lot_id:t,ruid:n},Fa.post("/xlive/lottery-interface/v1/popularityRedPocket/RedPocketDraw",{...e,spm_id:"444.8.red_envelope.extract",jump_from:"",session_id:"",csrf_token:wo.BILIJCT,csrf:wo.BILIJCT,visit_id:""}));if(0!==o)return void Bi.info(`红包失败: ${o}-${a}`);ys.push(n),Bi.info("红包成功 √")}catch(u){Bi.info(`红包异常: ${u.message}`)}var e}async function Os(u,e,t=2){for(let n=1;n<=t;n++){const t=await Ss(u,e,n);for(const u of t)await Is(u),await xo(200)}}async function Ps(u){try{const{code:e,message:t,data:n}=await function({session_type:u}={session_type:1}){return ga.get(`/session_svr/v1/session_svr/get_sessions?session_type=${u}&group_fold=1&unfollow_fold=1&sort_rule=2&build=0&mobi_app=web`)}();if(0!==e)return void Bi.warn(`获取会话失败：${e}-${t}`);const{session_list:r}=n;if(r.length<=0)return;return r.filter((({unread_count:e,talker_id:t,is_follow:n,last_msg:r})=>{return u.find((u=>u.mid===t))&&e>0&&t===r.sender_uid&&1===n&&(i=r.timestamp,Date.now()-1e3*i<36e5);var i}))}catch(u){Bi.error(`获取会话异常：${u.message}`)}}async function Ls(u){const e=await Ps(u);await xo(200);try{for(let u=0;u<e.length;u++){const t=e[u];await xs(t)}}catch(u){Bi.error(`更新会话异常：${u.message}`)}e.length>=19&&await Ls(u)}async function xs(u){switch(wo.lottery.actFollowMsg){case"del":case"delete":await function({talker_id:u,session_type:e}){return ga.post("/session_svr/v1/session_svr/remove_session",{talker_id:u,session_type:e,build:0,mobi_app:"web",csrf_token:wo.BILIJCT,csrf:wo.BILIJCT})}(u);break;case"read":await function({talker_id:u,session_type:e,ack_seqno:t}){return ga.post("/session_svr/v1/session_svr/update_ack",{talker_id:u,session_type:e,ack_seqno:t,build:0,mobi_app:"web",csrf_token:wo.BILIJCT,csrf:wo.BILIJCT},{headers:{origin:E}})}(u)}await xo(50)}var Ns={taskReward:async function(){Bi.info("----【每日任务完成情况】----");try{const{data:u,message:e,code:t}=await Ea.get("/x/member/web/exp/reward");await xo();const{data:n}=await Ba();if(0!=t)return void Bi.warn(`状态获取失败: ${t} ${e}`);const r=_o.money-wo.BILI_STAY_COINS;let i=0;0===_o.coinsTask?Bi.info(`今日投币获取经验: ${n}，还需投币0颗，经验够了，不想投了`):r<=0?Bi.info(`今日投币获取经验: ${n}，还需投币0颗，硬币不够了，不投币了`):r<_o.coinsTask?(i=_o.coinsTask-r,Bi.info(`投币获取经验: ${n}，还需投币数量: ${i}颗;(目标${_o.coinsTask}颗，忽略部分投币)`)):(i=_o.coinsTask-n/10,Bi.info(`投币获取经验: ${n}，还需投币数量: ${i}颗;(目标${_o.coinsTask}颗)`)),_o.coinsTask=i,Bi.info("每日分享: "+(u.share?"已完成":"[未完成]")),Bi.info("每日播放: "+(u.watch?"已完成":"[未完成]")),_o.share=u.share,_o.watch=u.watch}catch(u){Bi.error(`状态获取异常 ${u.message}`)}},liveSignTask:async function(){Bi.info("----【直播签到】----");try{const{data:u}=await Fa.get("/xlive/web-ucenter/v1/sign/WebGetSignInfo");if(1===u.status)return Bi.info("已签到，跳过签到"),void Bi.info(`已经签到${u.hadSignDays}天，${u.specialText}`)}catch(u){}try{const{code:u,data:e,message:t}=await Fa.get("/xlive/web-ucenter/v1/sign/DoSign");0===u?Bi.info(`直播签到成功: ${e.text}，特别信息: ${e.specialText}，本月签到天数: ${e.hadSignDays}天;`):Bi.warn(`直播签到失败: ${u} ${t}`)}catch(u){Bi.error(`直播签到异常: ${u.message}`)}},shareAndWatch:async function(){if(Bi.info("----【分享/播放视频】----"),_o.share&&_o.watch)return void Bi.info("已完成，跳过分享/播放");let u=0;try{let e=await Ga();if("-1"===e.msg&&(e=await La()),"0"!==e.msg)return Bi.warn(`获取视频失败 ${e.msg}`),!1;{const{id:t,author:n,title:r}=e.data;u=t,Bi.info(`获取视频: ${r} --up【${n}】`)}}catch(u){return Bi.error(`获取视频出现异常: ${u.message}`),!1}if(!_o.share){await xo();try{const{code:e,message:t}=await function(u){const e={csrf:wo.BILIJCT,aid:u};return Ea.post("/x/web-interface/share/add",e)}(u);0===e?Bi.info("分享视频成功!"):Bi.warn(`分享视频失败: ${e} ${t}`)}catch(u){Bi.error(`分享视频异常: ${u.message}`)}}if(!_o.watch){await xo();try{const{code:n,message:r}=await(e=u,t=L(4,60),Ea.post("/x/click-interface/web/heartbeat",{aid:e,played_time:t}));0===n?Bi.info("播放视频成功!"):Bi.warn(`播放视频失败: ${n} ${r}`)}catch(u){Bi.error(`播放视频异常: ${u.message}`)}}var e,t},silver2Coin:async function(){Bi.info("----【银瓜子兑换硬币】----");try{const{data:u,code:e,message:t}=await Fa.get("/xlive/revenue/v1/wallet/getStatus");if(0!=e&&Bi.info(`获取瓜子详情失败 ${t}`),0===u.silver_2_coin_left)Bi.info("今日已兑换一次");else if(u.silver<700)Bi.info("兑换失败，你瓜子不够了");else{const{message:u}=await Fa.post("/xlive/revenue/v1/wallet/silver2coin",{csrf_token:wo.BILIJCT,csrf:wo.BILIJCT});Bi.info(`兑换硬币： ${u}`),await Fa.get("/xlive/revenue/v1/wallet/myWallet?need_bp=1&need_metal=1&platform=pc")}}catch(u){Bi.error(`操作异常 ${u.message}`)}},addCoins:async function(){if(Bi.info("----【视频投币】----"),!_o.coinsTask)return void Bi.info("跳过投币，今日已完成");const u={eCount:0,num:0,prevCode:0,fillCount:0,priority:0};let e=!1;for(;_o.coinsTask&&!e&&u.eCount<5;)e=await Ha(u);u.eCount>=5&&Bi.info("出现异常/错误5次，自动退出投币"),Bi.info(`一共成功投币${u.num}颗`),Bi.info(`硬币还剩${_o.money}颗`)},mangaSign:async function(){Bi.info("----【漫画签到】----");try{const{code:u}=await function(u="android"){return Aa.post("/twirp/activity.v1.Activity/ClockIn",{platform:u})}();0==u?Bi.info("漫画签到成功"):Bi.warn("漫画签到失败")}catch(e){var u;400===(null===(u=e.response)||void 0===u?void 0:u.status)?Bi.info("已经签到过了，跳过任务"):Bi.error(`漫画签到异常 ${e.message}`)}},supGroupSign:async function(){Bi.info("----【应援团签到】----");const u=await qa();await xo();let e=0;for(let r=0;r<u.length;){const i=u[r];try{const{data:u,code:r,message:o}=await(t=i.group_id,n=i.owner_uid,ga.get("/link_setting/v1/link_setting/sign_in",{params:{group_id:t,owner_id:n}}));0===r?0===u.status?e++:Bi.info(o):Bi.warn(`[${i.group_name}]签到失败 ${o}`)}catch(u){Bi.error(`签到异常 ${u.message}`)}finally{await xo()}}var t,n;Bi.info(`签到结束，成功${e}/${u.length}`)},liveSendMessage:async function(){Bi.info("----【发送直播弹幕】----"),Bi.info("该函数即将废弃，请使用 liveIntimacy 替代");try{const u=await Ya(),e=u.length;let t=0,n=0;Bi.info(`一共需要发送${e}个直播间`),Bi.verbose("所需时间可能很长，请耐心等待");for(let r=0;r<e;r++){const{room_info:i,anchor_info:o,medal:a}=u[r];null!=i&&i.room_id?100===a.today_feed||a.level>=20?n++:(await Qa(i.room_id,o.nick_name)&&t++,r<e-1&&await xo(L(1e4,25e3))):(Bi.info(`【${o.nick_name}】没有直播间哦`),n++)}Bi.info(`成功发送${t}个弹幕，跳过${n}个`)}catch(u){Bi.error(`直播间发送弹幕异常: ${u.message}`)}},charging:async function(){if(Bi.info("----【给目标充电】----"),await us(),await xo(),ts())try{const u=_o.bCoinCouponBalance||0,e=wo.CHARGE_ID;let t=0;Bi.info(`b 币券余额${u}`);const n=async()=>{const{code:t,message:n,data:r}=await function(u=50,e=!0,t=wo.USERID,n="up",r=t){return Ea.post("/x/ugcpay/web/v2/trade/elec/pay/quick",{csrf:wo.BILIJCT,bp_num:u,is_bp_remains_prior:e,up_mid:t,otype:n,oid:r})}(u,!0,e);0===t?(Bi.info(`【充值结果】${es[r.status]}`),r.status===es["成功"]&&(_o.chargeOrderNo=r.order_no,await xo(),await async function(){try{if(!_o.chargeOrderNo)return!1;const u=_[L(0,_.length-1)],{code:e}=await function(u,e="支持大佬一波"){return Ea.post("/x/ugcpay/trade/elec/message",{csrf:wo.BILIJCT,message:e,order_id:u})}(_o.chargeOrderNo,u);0===e&&Bi.info("留言成功！")}catch{}}())):Bi.warn(`充电失败：${t} ${n}`)};for(_o.chargeOrderNo="";!(_o.chargeOrderNo||(await n(),await xo(),t++>2)););}catch(u){Bi.error(`充电出现异常：${u.message}`)}},getVipPrivilege:async function(){try{if(Bi.info("----【领取大会员权益】----"),2!==_o.vipType)return Bi.info("账号非年度大会员，不需要领取权益"),!1;const u=await ns();if(0===u.length)return void Bi.info("已经领取过权益，不需要再领取");for(let e=0;e<u.length;e++){const t=u[e];await is(t.type)}}catch(u){Bi.error(`领取大会员权益出现异常：${u.message}`)}},giveGift:async function(){Bi.info("----【投喂过期食物】----");try{const u=await as();if(await xo(),null==u||!u.length)return void Bi.info("没有2天内过期的简单礼物");const e=await async function(){const u=Object.assign([],wo.BILI_GIFT_UP),e=()=>u.splice(L(wo.BILI_GIFT_UP.length-1),1)[0];for(;u.length;){const u=e(),t=await ss(u);if(t)return{mid:u,...t}}return await async function(){const{data:{count:u,items:e}}=await function(u=1,e=10){return u>10&&(u=10),Fa.get(`/xlive/app-ucenter/v1/user/GetMyMedals?page=${u}&page_size=${e}`)}();if(await xo(),!u)return;const t=e[L(e.length-1)];return{mid:t.target_id,roomid:t.roomid||0,name:t.uname}}()}();if(!e)return void Bi.info("没有找到投喂目标");await async function({roomid:u,mid:e,name:t},n){for(const r of n){await xo();try{const{code:n,message:i,data:o}=await ha({roomid:u,ruid:e,bag_id:r.bag_id,gift_id:r.gift_id,gift_num:r.gift_num});if(0!==n){Bi.warn(`向[${t}]投喂[${r.gift_name}]，${i}`);continue}o.gift_list.forEach((u=>{Bi.info(`成功给 [${t}] 投喂${u.gift_name}`)}))}catch{}}}(e,u)}catch(u){Bi.info(`投喂过期食物异常 ${u}`)}},matchGame:async function(){if(Bi.info("----【赛事硬币竞猜】----"),wo.MATCH_COINS<=0)return void Bi.info("硬币数量不能小于 0");if(Ds())return;const u=await async function(){try{const{code:u,message:e,data:{list:t,page:n}}=await function(u="",e=""){return Ea.get(`/x/esports/guess/collection/question?pn=1&ps=50&gid=&sids=&stime=${u}&etime=${e}`)}();return 0!==u?void Bi.warn(`获取赛事错误 ${u} ${e}`):0===n.total?(Bi.info("今日已经无法获取赛事"),null):t}catch(u){}}();if(await xo(),!u)return;const e=await async function(u){let e=0;try{for(const t of u){const{contest:u,questions:n}=t,r=u.id,[{id:i,title:o,details:a,is_guess:s}]=n,[c,D]=a;if(Ds())return e;if(s)continue;Bi.info(`${o} <=> ${c.odds}:${D.odds}`);const f=c.odds>D.odds;let l;l=wo.MATCH_SELECTION>0?f?D:c:f?c:D,Bi.info(`预测[ ${l.option} ] ${wo.MATCH_COINS} 颗硬币`),await xo();const{code:d}=await cs(r,i,l.detail_id,wo.MATCH_COINS);0!==d?Bi.info("预测失败"):(e++,_o.money-=wo.MATCH_COINS)}}catch(u){console.warn(u.message)}return e}(function(u,e){return u.filter((u=>{const{questions:t}=u,[{details:n,is_guess:r}]=t;if(r)return!1;const[i,o]=n;return Math.abs(i.odds-o.odds)>=e}))}(u,wo.MATCH_DIFF));Bi.info(`【竞猜结束】一共参与${e}次预测`)},liveLottery:async function(){Bi.info("----【天选时刻】----");try{const u=await fs();Bi.info(`最后一个关注的UP: ${u.uname}`);const e=await async function(){ys=[];const u=await Bs();for(const e of u)for(const u of e)await $s(u.areaId,u.parentId,wo.LOTTERY_PAGE_NUM);return ys}();Bi.info("扫描完成");const t=[];await ps(t,e,null==u?void 0:u.mid),await Cs(t),Bi.info("移动关注UP到分组成功")}catch(u){Bi.warn(`天选时刻异常: ${u.message}`),Bi.debug(u)}Bi.info("结束天选时刻")},liveRedPack:async function(){Bi.info("----【天选红包】----");try{const u=await fs();Bi.info(`最后一个关注的UP: ${u.uname}`);const e=await async function(){ys=[];const u=await Bs();for(const e of u)for(const u of e)await Os(u.areaId,u.parentId,wo.LOTTERY_PAGE_NUM);return ys}();Bi.info("扫描完成，获取新关注的UP");const t=[];await ps(t,e,null==u?void 0:u.mid),Bi.info("开始读取消息"),await Ls(t),Bi.info("移动关注UP到分组"),await Cs(t),Bi.info("移动关注UP到分组成功")}catch(u){Bi.warn(`天选时刻异常: ${u.message}`),Bi.debug(u)}Bi.info("结束天选红包")},liveIntimacy:async function(){Bi.info("----【直播亲密度】----");try{await Xa(),Bi.info("直播亲密度完成")}catch(u){Bi.error(`直播亲密度: ${u.message}`)}}};var ks=Object.freeze({__proto__:null,dailyTasks:async function(u,...e){yi.pushValue="";try{await async function(){Bi.info("----【登录】----");const{data:u,message:e,code:t}=await ya();if(0!==t)throw Bi.error(`登录错误 ${t} ${e}`),new Error(e);if(!u.isLogin)throw new Error("接口返回为未登录");await xo(),await ba(u)}()}catch(u){return Bi.error(`登录失败: ${u}`),await Ca("登录失败",yi.pushValue),"未完成"}const t=Lo([...Object.values(Ns)]);for(const u of t)try{await u()}catch(e){Bi.error(`${u.name}失败: ${e}`)}finally{await xo()}return u&&await u(...e),await Ca("每日完成",yi.pushValue),"完成"}});
