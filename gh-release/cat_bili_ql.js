"use strict";var u=require("path"),t=require("fs"),e=require("crypto"),n=require("zlib"),r=require("nodemailer"),i=require("tunnel"),o=require("got");function a(u){return u&&"object"==typeof u&&"default"in u?u:{default:u}}function s(u){if(u&&u.__esModule)return u;var t=Object.create(null);return u&&Object.keys(u).forEach((function(e){if("default"!==e){var n=Object.getOwnPropertyDescriptor(u,e);Object.defineProperty(t,e,n.get?n:{enumerable:!0,get:function(){return u[e]}})}})),t.default=u,Object.freeze(t)}var c,D=s(u),f=s(t),l=s(e),C=s(r),d=s(i),p=a(o);!function(u){u[u.SUCCESS=0]="SUCCESS",u[u["应用程序不存在或已被封禁"]=-1]="应用程序不存在或已被封禁",u[u["Access Key错误"]=-2]="Access Key错误",u[u["API校验密匙错误"]=-3]="API校验密匙错误",u[u["调用方对该Method没有权限"]=-4]="调用方对该Method没有权限",u[u["账号未登录"]=-101]="账号未登录",u[u["账号被封停"]=-102]="账号被封停",u[u["积分不足"]=-103]="积分不足",u[u["硬币不足"]=-104]="硬币不足",u[u["验证码错误"]=-105]="验证码错误",u[u["账号非正式会员或在适应期"]=-106]="账号非正式会员或在适应期",u[u["应用不存在或者被封禁"]=-107]="应用不存在或者被封禁",u[u["未绑定手机?"]=-108]="未绑定手机?",u[u["未绑定手机"]=-110]="未绑定手机",u[u["csrf 校验失败"]=-111]="csrf 校验失败",u[u["系统升级中"]=-112]="系统升级中",u[u["账号尚未实名认证"]=-113]="账号尚未实名认证",u[u["请先绑定手机"]=-114]="请先绑定手机",u[u["请先完成实名认证"]=-115]="请先完成实名认证"}(c||(c={}));const A="https://account.bilibili.com",E="https://live.bilibili.com",F="https://space.bilibili.com",g="https://www.bilibili.com/",m="https://account.bilibili.com",h="https://api.live.bilibili.com",y="https://api.bilibili.com",B="https://manga.bilibili.com",v="https://api.vc.bilibili.com",w={"user-agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/101.0.4951.41 Safari/537.36 Edg/101.0.1210.32","content-type":"application/x-www-form-urlencoded; charset=UTF-8","accept-language":"zh-CN,zh;q=0.9","accept-encoding":"gzip, deflate, br"},_=["棒","棒唉","棒耶","加油~","UP加油!","支持~","支持支持！","催更啦","顶顶","留下脚印~","干杯","bilibili干杯","o(*￣▽￣*)o","(｡･∀･)ﾉﾞ嗨","(●ˇ∀ˇ●)","( •̀ ω •́ )y","(ง •_•)ง",">.<","^_~"],b=["舰","船","航海","代金券","优惠券","自拍","照","写真","图","提督","车车一局","再来一局","游戏道具"],$=["谢"],S=[65566781,1277481241,1643654862,603676925],T=Object.prototype.toString;function O(u,t){return T.call(u)===`[object ${t}]`}function I(u){return null!==u&&O(u,"Object")}function x(u){return O(u,"String")}function P(u){const t=u||N(),e=t.getFullYear(),n=t.getMonth()+1;return 2===n?e%4==0&&e%100!=0||e%400==0?29:28:[4,6,9,11].includes(n)?30:31}function N(){const u=new Date,t=u.getTime(),e=u.getTimezoneOffset()/60;return new Date(t+36e5*(e+8))}function L(u,t){return Math.ceil(t/u)}function k(u,t,e){if(e&&"boolean"!=typeof e&&(t=e=void 0),void 0===e&&("boolean"==typeof t?(e=t,t=void 0):"boolean"==typeof u&&(e=u,u=void 0)),void 0===u&&void 0===t?(u=0,t=1):void 0===t&&(t=u,u=0),u>t){const e=u;u=t,t=e}if(e||u%1||t%1){const e=Math.random();return Math.min(u+e*(t-u+parseFloat("1e-"+((e+"").length-1))),t)}return u+Math.floor(Math.random()*(t-u+1))}function R(){return`${k(1,9)}${function(u,t){let e="";for(let t=0;t<u;t++)e+=H("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ");return t?e.toLowerCase():e}(10,!0)}0`}function U(u,t){u.includes(t)||u.push(t)}function j(u){return u||{}}function G(u,t){return void 0===u||void 0===t?u||t:I(u)&&I(t)?Array.isArray(u)&&Array.isArray(t)?u.concat(t):Object.keys(t).reduce(((e,n)=>(e[n]=G(u[n],t[n]),e)),u):t}function M(u){if(!I(u)&&(!(t=u)||!Array.isArray(t)))return u;var t;const e=new URLSearchParams;return Array.isArray(u)||(u=Object.entries(u)),u.forEach((([u,t])=>{I(t)?e.append(u,JSON.stringify(t)):e.append(u,String(t))})),e.toString()}function H(u){return u[k(u.length-1)]}var q="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},K=function(u){return u&&u.Math==Math&&u},J=K("object"==typeof globalThis&&globalThis)||K("object"==typeof window&&window)||K("object"==typeof self&&self)||K("object"==typeof q&&q)||function(){return this}()||Function("return this")(),Y={},z=function(u){try{return!!u()}catch(u){return!0}},Q=!z((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),W=!z((function(){var u=function(){}.bind();return"function"!=typeof u||u.hasOwnProperty("prototype")})),V=W,X=Function.prototype.call,Z=V?X.bind(X):function(){return X.apply(X,arguments)},uu={},tu={}.propertyIsEnumerable,eu=Object.getOwnPropertyDescriptor,nu=eu&&!tu.call({1:2},1);uu.f=nu?function(u){var t=eu(this,u);return!!t&&t.enumerable}:tu;var ru,iu,ou=function(u,t){return{enumerable:!(1&u),configurable:!(2&u),writable:!(4&u),value:t}},au=W,su=Function.prototype,cu=su.bind,Du=su.call,fu=au&&cu.bind(Du,Du),lu=au?function(u){return u&&fu(u)}:function(u){return u&&function(){return Du.apply(u,arguments)}},Cu=lu,du=Cu({}.toString),pu=Cu("".slice),Au=function(u){return pu(du(u),8,-1)},Eu=lu,Fu=z,gu=Au,mu=J.Object,hu=Eu("".split),yu=Fu((function(){return!mu("z").propertyIsEnumerable(0)}))?function(u){return"String"==gu(u)?hu(u,""):mu(u)}:mu,Bu=J.TypeError,vu=function(u){if(null==u)throw Bu("Can't call method on "+u);return u},wu=yu,_u=vu,bu=function(u){return wu(_u(u))},$u=function(u){return"function"==typeof u},Su=$u,Tu=function(u){return"object"==typeof u?null!==u:Su(u)},Ou=J,Iu=$u,xu=function(u){return Iu(u)?u:void 0},Pu=function(u,t){return arguments.length<2?xu(Ou[u]):Ou[u]&&Ou[u][t]},Nu=lu({}.isPrototypeOf),Lu=J,ku=Pu("navigator","userAgent")||"",Ru=Lu.process,Uu=Lu.Deno,ju=Ru&&Ru.versions||Uu&&Uu.version,Gu=ju&&ju.v8;Gu&&(iu=(ru=Gu.split("."))[0]>0&&ru[0]<4?1:+(ru[0]+ru[1])),!iu&&ku&&(!(ru=ku.match(/Edge\/(\d+)/))||ru[1]>=74)&&(ru=ku.match(/Chrome\/(\d+)/))&&(iu=+ru[1]);var Mu=iu,Hu=z,qu=!!Object.getOwnPropertySymbols&&!Hu((function(){var u=Symbol();return!String(u)||!(Object(u)instanceof Symbol)||!Symbol.sham&&Mu&&Mu<41})),Ku=qu&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Ju=Pu,Yu=$u,zu=Nu,Qu=Ku,Wu=J.Object,Vu=Qu?function(u){return"symbol"==typeof u}:function(u){var t=Ju("Symbol");return Yu(t)&&zu(t.prototype,Wu(u))},Xu=J.String,Zu=$u,ut=function(u){try{return Xu(u)}catch(u){return"Object"}},tt=J.TypeError,et=function(u){if(Zu(u))return u;throw tt(ut(u)+" is not a function")},nt=Z,rt=$u,it=Tu,ot=J.TypeError,at={exports:{}},st=J,ct=Object.defineProperty,Dt=function(u,t){try{ct(st,u,{value:t,configurable:!0,writable:!0})}catch(e){st[u]=t}return t},ft=Dt,lt=J["__core-js_shared__"]||ft("__core-js_shared__",{}),Ct=lt;(at.exports=function(u,t){return Ct[u]||(Ct[u]=void 0!==t?t:{})})("versions",[]).push({version:"3.22.7",mode:"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.22.7/LICENSE",source:"https://github.com/zloirock/core-js"});var dt=vu,pt=J.Object,At=function(u){return pt(dt(u))},Et=lu({}.hasOwnProperty),Ft=Object.hasOwn||function(u,t){return Et(At(u),t)},gt=lu,mt=0,ht=Math.random(),yt=gt(1..toString),Bt=function(u){return"Symbol("+(void 0===u?"":u)+")_"+yt(++mt+ht,36)},vt=J,wt=at.exports,_t=Ft,bt=Bt,$t=qu,St=Ku,Tt=wt("wks"),Ot=vt.Symbol,It=Ot&&Ot.for,xt=St?Ot:Ot&&Ot.withoutSetter||bt,Pt=function(u){if(!_t(Tt,u)||!$t&&"string"!=typeof Tt[u]){var t="Symbol."+u;$t&&_t(Ot,u)?Tt[u]=Ot[u]:Tt[u]=St&&It?It(t):xt(t)}return Tt[u]},Nt=Z,Lt=Tu,kt=Vu,Rt=function(u,t){var e=u[t];return null==e?void 0:et(e)},Ut=function(u,t){var e,n;if("string"===t&&rt(e=u.toString)&&!it(n=nt(e,u)))return n;if(rt(e=u.valueOf)&&!it(n=nt(e,u)))return n;if("string"!==t&&rt(e=u.toString)&&!it(n=nt(e,u)))return n;throw ot("Can't convert object to primitive value")},jt=Pt,Gt=J.TypeError,Mt=jt("toPrimitive"),Ht=function(u,t){if(!Lt(u)||kt(u))return u;var e,n=Rt(u,Mt);if(n){if(void 0===t&&(t="default"),e=Nt(n,u,t),!Lt(e)||kt(e))return e;throw Gt("Can't convert object to primitive value")}return void 0===t&&(t="number"),Ut(u,t)},qt=Vu,Kt=function(u){var t=Ht(u,"string");return qt(t)?t:t+""},Jt=Tu,Yt=J.document,zt=Jt(Yt)&&Jt(Yt.createElement),Qt=function(u){return zt?Yt.createElement(u):{}},Wt=!Q&&!z((function(){return 7!=Object.defineProperty(Qt("div"),"a",{get:function(){return 7}}).a})),Vt=Q,Xt=Z,Zt=uu,ue=ou,te=bu,ee=Kt,ne=Ft,re=Wt,ie=Object.getOwnPropertyDescriptor;Y.f=Vt?ie:function(u,t){if(u=te(u),t=ee(t),re)try{return ie(u,t)}catch(u){}if(ne(u,t))return ue(!Xt(Zt.f,u,t),u[t])};var oe={},ae=Q&&z((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),se=J,ce=Tu,De=se.String,fe=se.TypeError,le=function(u){if(ce(u))return u;throw fe(De(u)+" is not an object")},Ce=Q,de=Wt,pe=ae,Ae=le,Ee=Kt,Fe=J.TypeError,ge=Object.defineProperty,me=Object.getOwnPropertyDescriptor;oe.f=Ce?pe?function(u,t,e){if(Ae(u),t=Ee(t),Ae(e),"function"==typeof u&&"prototype"===t&&"value"in e&&"writable"in e&&!e.writable){var n=me(u,t);n&&n.writable&&(u[t]=e.value,e={configurable:"configurable"in e?e.configurable:n.configurable,enumerable:"enumerable"in e?e.enumerable:n.enumerable,writable:!1})}return ge(u,t,e)}:ge:function(u,t,e){if(Ae(u),t=Ee(t),Ae(e),de)try{return ge(u,t,e)}catch(u){}if("get"in e||"set"in e)throw Fe("Accessors not supported");return"value"in e&&(u[t]=e.value),u};var he=oe,ye=ou,Be=Q?function(u,t,e){return he.f(u,t,ye(1,e))}:function(u,t,e){return u[t]=e,u},ve={exports:{}},we=Q,_e=Ft,be=Function.prototype,$e=we&&Object.getOwnPropertyDescriptor,Se=_e(be,"name"),Te={EXISTS:Se,PROPER:Se&&"something"===function(){}.name,CONFIGURABLE:Se&&(!we||we&&$e(be,"name").configurable)},Oe=$u,Ie=lt,xe=lu(Function.toString);Oe(Ie.inspectSource)||(Ie.inspectSource=function(u){return xe(u)});var Pe,Ne,Le,ke=Ie.inspectSource,Re=$u,Ue=ke,je=J.WeakMap,Ge=Re(je)&&/native code/.test(Ue(je)),Me=at.exports,He=Bt,qe=Me("keys"),Ke={},Je=Ge,Ye=J,ze=lu,Qe=Tu,We=Be,Ve=Ft,Xe=lt,Ze=function(u){return qe[u]||(qe[u]=He(u))},un=Ke,tn=Ye.TypeError,en=Ye.WeakMap;if(Je||Xe.state){var nn=Xe.state||(Xe.state=new en),rn=ze(nn.get),on=ze(nn.has),an=ze(nn.set);Pe=function(u,t){if(on(nn,u))throw new tn("Object already initialized");return t.facade=u,an(nn,u,t),t},Ne=function(u){return rn(nn,u)||{}},Le=function(u){return on(nn,u)}}else{var sn=Ze("state");un[sn]=!0,Pe=function(u,t){if(Ve(u,sn))throw new tn("Object already initialized");return t.facade=u,We(u,sn,t),t},Ne=function(u){return Ve(u,sn)?u[sn]:{}},Le=function(u){return Ve(u,sn)}}var cn={set:Pe,get:Ne,has:Le,enforce:function(u){return Le(u)?Ne(u):Pe(u,{})},getterFor:function(u){return function(t){var e;if(!Qe(t)||(e=Ne(t)).type!==u)throw tn("Incompatible receiver, "+u+" required");return e}}},Dn=z,fn=$u,ln=Ft,Cn=Q,dn=Te.CONFIGURABLE,pn=ke,An=cn.enforce,En=cn.get,Fn=Object.defineProperty,gn=Cn&&!Dn((function(){return 8!==Fn((function(){}),"length",{value:8}).length})),mn=String(String).split("String"),hn=ve.exports=function(u,t,e){"Symbol("===String(t).slice(0,7)&&(t="["+String(t).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),e&&e.getter&&(t="get "+t),e&&e.setter&&(t="set "+t),(!ln(u,"name")||dn&&u.name!==t)&&Fn(u,"name",{value:t,configurable:!0}),gn&&e&&ln(e,"arity")&&u.length!==e.arity&&Fn(u,"length",{value:e.arity});try{e&&ln(e,"constructor")&&e.constructor?Cn&&Fn(u,"prototype",{writable:!1}):u.prototype&&(u.prototype=void 0)}catch(u){}var n=An(u);return ln(n,"source")||(n.source=mn.join("string"==typeof t?t:"")),u};Function.prototype.toString=hn((function(){return fn(this)&&En(this).source||pn(this)}),"toString");var yn=$u,Bn=Be,vn=ve.exports,wn=Dt,_n={},bn=Math.ceil,$n=Math.floor,Sn=Math.trunc||function(u){var t=+u;return(t>0?$n:bn)(t)},Tn=function(u){var t=+u;return t!=t||0===t?0:Sn(t)},On=Tn,In=Math.max,xn=Math.min,Pn=Tn,Nn=Math.min,Ln=function(u){return u>0?Nn(Pn(u),9007199254740991):0},kn=bu,Rn=function(u,t){var e=On(u);return e<0?In(e+t,0):xn(e,t)},Un=function(u){return Ln(u.length)},jn=function(u){return function(t,e,n){var r,i=kn(t),o=Un(i),a=Rn(n,o);if(u&&e!=e){for(;o>a;)if((r=i[a++])!=r)return!0}else for(;o>a;a++)if((u||a in i)&&i[a]===e)return u||a||0;return!u&&-1}},Gn={includes:jn(!0),indexOf:jn(!1)},Mn=Ft,Hn=bu,qn=Gn.indexOf,Kn=Ke,Jn=lu([].push),Yn=function(u,t){var e,n=Hn(u),r=0,i=[];for(e in n)!Mn(Kn,e)&&Mn(n,e)&&Jn(i,e);for(;t.length>r;)Mn(n,e=t[r++])&&(~qn(i,e)||Jn(i,e));return i},zn=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"].concat("length","prototype");_n.f=Object.getOwnPropertyNames||function(u){return Yn(u,zn)};var Qn={};Qn.f=Object.getOwnPropertySymbols;var Wn=Pu,Vn=_n,Xn=Qn,Zn=le,ur=lu([].concat),tr=Wn("Reflect","ownKeys")||function(u){var t=Vn.f(Zn(u)),e=Xn.f;return e?ur(t,e(u)):t},er=Ft,nr=tr,rr=Y,ir=oe,or=function(u,t,e){for(var n=nr(t),r=ir.f,i=rr.f,o=0;o<n.length;o++){var a=n[o];er(u,a)||e&&er(e,a)||r(u,a,i(t,a))}},ar=z,sr=$u,cr=/#|\.prototype\./,Dr=function(u,t){var e=lr[fr(u)];return e==dr||e!=Cr&&(sr(t)?ar(t):!!t)},fr=Dr.normalize=function(u){return String(u).replace(cr,".").toLowerCase()},lr=Dr.data={},Cr=Dr.NATIVE="N",dr=Dr.POLYFILL="P",pr=Dr,Ar=J,Er=Y.f,Fr=Be,gr=function(u,t,e,n){n||(n={});var r=n.enumerable,i=void 0!==n.name?n.name:t;return yn(e)&&vn(e,i,n),n.global?r?u[t]=e:wn(t,e):(n.unsafe?u[t]&&(r=!0):delete u[t],r?u[t]=e:Bn(u,t,e)),u},mr=Dt,hr=or,yr=pr,Br=W,vr=Function.prototype,wr=vr.apply,_r=vr.call,br="object"==typeof Reflect&&Reflect.apply||(Br?_r.bind(wr):function(){return _r.apply(wr,arguments)}),$r=J,Sr=$u,Tr=$r.String,Or=$r.TypeError,Ir=lu,xr=le,Pr=function(u){if("object"==typeof u||Sr(u))return u;throw Or("Can't set "+Tr(u)+" as a prototype")},Nr=Object.setPrototypeOf||("__proto__"in{}?function(){var u,t=!1,e={};try{(u=Ir(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(e,[]),t=e instanceof Array}catch(u){}return function(e,n){return xr(e),Pr(n),t?u(e,n):e.__proto__=n,e}}():void 0),Lr=oe.f,kr=$u,Rr=Tu,Ur=Nr,jr={};jr[Pt("toStringTag")]="z";var Gr=J,Mr="[object z]"===String(jr),Hr=$u,qr=Au,Kr=Pt("toStringTag"),Jr=Gr.Object,Yr="Arguments"==qr(function(){return arguments}()),zr=Mr?qr:function(u){var t,e,n;return void 0===u?"Undefined":null===u?"Null":"string"==typeof(e=function(u,t){try{return u[t]}catch(u){}}(t=Jr(u),Kr))?e:Yr?qr(t):"Object"==(n=qr(t))&&Hr(t.callee)?"Arguments":n},Qr=zr,Wr=J.String,Vr=function(u){if("Symbol"===Qr(u))throw TypeError("Cannot convert a Symbol value to a string");return Wr(u)},Xr=Tu,Zr=Be,ui=Error,ti=lu("".replace),ei=String(ui("zxcasd").stack),ni=/\n\s*at [^:]*:[^\n]*/,ri=ni.test(ei),ii=ou,oi=!z((function(){var u=Error("a");return!("stack"in u)||(Object.defineProperty(u,"stack",ii(1,7)),7!==u.stack)})),ai=Pu,si=Ft,ci=Be,Di=Nu,fi=Nr,li=or,Ci=function(u,t,e){e in u||Lr(u,e,{configurable:!0,get:function(){return t[e]},set:function(u){t[e]=u}})},di=function(u,t,e){var n,r;return Ur&&kr(n=t.constructor)&&n!==e&&Rr(r=n.prototype)&&r!==e.prototype&&Ur(u,r),u},pi=function(u,t){return void 0===u?arguments.length<2?"":t:Vr(u)},Ai=function(u,t){Xr(t)&&"cause"in t&&Zr(u,"cause",t.cause)},Ei=function(u,t){if(ri&&"string"==typeof u&&!ui.prepareStackTrace)for(;t--;)u=ti(u,ni,"");return u},Fi=oi,gi=Q,mi=function(u,t){var e,n,r,i,o,a=u.target,s=u.global,c=u.stat;if(e=s?Ar:c?Ar[a]||mr(a,{}):(Ar[a]||{}).prototype)for(n in t){if(i=t[n],r=u.dontCallGetSet?(o=Er(e,n))&&o.value:e[n],!yr(s?n:a+(c?".":"#")+n,u.forced)&&void 0!==r){if(typeof i==typeof r)continue;hr(i,r)}(u.sham||r&&r.sham)&&Fr(i,"sham",!0),gr(e,n,i,u)}},hi=br,yi=function(u,t,e,n){var r="stackTraceLimit",i=n?2:1,o=u.split("."),a=o[o.length-1],s=ai.apply(null,o);if(s){var c=s.prototype;if(si(c,"cause")&&delete c.cause,!e)return s;var D=ai("Error"),f=t((function(u,t){var e=pi(n?t:u,void 0),r=n?new s(u):new s;return void 0!==e&&ci(r,"message",e),Fi&&ci(r,"stack",Ei(r.stack,2)),this&&Di(c,this)&&di(r,this,f),arguments.length>i&&Ai(r,arguments[i]),r}));f.prototype=c,"Error"!==a?fi?fi(f,D):li(f,D,{name:!0}):gi&&r in s&&(Ci(f,s,r),Ci(f,s,"prepareStackTrace")),li(f,s);try{c.name!==a&&ci(c,"name",a),c.constructor=f}catch(u){}return f}},Bi=J.WebAssembly,vi=7!==Error("e",{cause:7}).cause,wi=function(u,t){var e={};e[u]=yi(u,t,vi),mi({global:!0,constructor:!0,arity:1,forced:vi},e)},_i=function(u,t){if(Bi&&Bi[u]){var e={};e[u]=yi("WebAssembly."+u,t,vi),mi({target:"WebAssembly",stat:!0,constructor:!0,arity:1,forced:vi},e)}};function bi(u){return u?u.split("; ").map((u=>u.split("="))):[]}function $i(u,t){return u?t&&0!==t.length?function(u){const t=Object.keys(u).reduce(((t,e)=>t+`${e}=${u[e]}; `),"");return t.substring(0,t.length-2||0)}(function(u,t){const e=bi(null==t?void 0:t[0]).filter((u=>2===u.length)),n=bi(u).concat(e).filter((u=>2===u.length)),r={};for(const u of n)r[u[0]]?r[u[0]]=u[1]:Object.defineProperty(r,u[0],{value:u[1],enumerable:!0,writable:!0});return r}(u,t)):u:""}function Si(u,t){if(!u)return null;const e=`(?:^|)${t}=([^;]*)(?:;|$)`,n=u.match(e);return n?n[1]:null}function Ti(u){return Si(u,"bili_jct")||""}wi("Error",(function(u){return function(t){return hi(u,this,arguments)}})),wi("EvalError",(function(u){return function(t){return hi(u,this,arguments)}})),wi("RangeError",(function(u){return function(t){return hi(u,this,arguments)}})),wi("ReferenceError",(function(u){return function(t){return hi(u,this,arguments)}})),wi("SyntaxError",(function(u){return function(t){return hi(u,this,arguments)}})),wi("TypeError",(function(u){return function(t){return hi(u,this,arguments)}})),wi("URIError",(function(u){return function(t){return hi(u,this,arguments)}})),_i("CompileError",(function(u){return function(t){return hi(u,this,arguments)}})),_i("LinkError",(function(u){return function(t){return hi(u,this,arguments)}})),_i("RuntimeError",(function(u){return function(t){return hi(u,this,arguments)}}));const Oi={value:""},Ii={log:xi,error:function(u){xi("error",u)},warn:function(u){xi("warn",u)},info:function(u){xi("info",u)},verbose:function(u){xi("verbose",u)},debug:function(u){xi("debug",u)}};function xi(u,t){const e=N().toString().match(/\w{2}:\w{2}:\w{2}/)[0];if(function(u="debug"){const t=["error","warn","info","verbose","debug"],e=t.indexOf(u);return e>0?t.slice(0,e+1):t}().includes(u)){const u=`[${e}] ${t}`;Oi.value+=u+"\n"}process.stdout.write(`[${u} ${e}] ${t}\n`)}function Pi(u){try{const t=n.unzipSync(Buffer.from(u,"base64")).toString();try{return decodeURIComponent(function(u){return u.replace(/\\u([\d\w]{4})/gi,((u,t)=>String.fromCodePoint(parseInt(t,16))))}(t))}catch(u){return unescape(t)}}catch(u){throw new Error("Error: 当前字符串不能被Gzip解压")}}class Ni{static configFileName=function(){const u=".json",{BILITOOLS_FILE_NAME:t}=process.env;return t?t.endsWith(u)?t:`${t}.json`:"cat_bili_config"+u}();static isQingLongPanel=!0}var Li={Space_Separator:/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,ID_Start:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,ID_Continue:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/},ki={isSpaceSeparator:u=>"string"==typeof u&&Li.Space_Separator.test(u),isIdStartChar:u=>"string"==typeof u&&(u>="a"&&u<="z"||u>="A"&&u<="Z"||"$"===u||"_"===u||Li.ID_Start.test(u)),isIdContinueChar:u=>"string"==typeof u&&(u>="a"&&u<="z"||u>="A"&&u<="Z"||u>="0"&&u<="9"||"$"===u||"_"===u||"‌"===u||"‍"===u||Li.ID_Continue.test(u)),isDigit:u=>"string"==typeof u&&/[0-9]/.test(u),isHexDigit:u=>"string"==typeof u&&/[0-9A-Fa-f]/.test(u)};let Ri,Ui,ji,Gi,Mi,Hi,qi,Ki,Ji;function Yi(u,t,e){const n=u[t];if(null!=n&&"object"==typeof n)for(const u in n){const t=Yi(n,u,e);void 0===t?delete n[u]:n[u]=t}return e.call(u,t,n)}let zi,Qi,Wi,Vi,Xi;function Zi(){for(zi="default",Qi="",Wi=!1,Vi=1;;){Xi=uo();const u=eo[zi]();if(u)return u}}function uo(){if(Ri[Gi])return String.fromCodePoint(Ri.codePointAt(Gi))}function to(){const u=uo();return"\n"===u?(Mi++,Hi=0):u?Hi+=u.length:Hi++,u&&(Gi+=u.length),u}const eo={default(){switch(Xi){case"\t":case"\v":case"\f":case" ":case" ":case"\ufeff":case"\n":case"\r":case"\u2028":case"\u2029":return void to();case"/":return to(),void(zi="comment");case void 0:return to(),no("eof")}if(!ki.isSpaceSeparator(Xi))return eo[Ui]();to()},comment(){switch(Xi){case"*":return to(),void(zi="multiLineComment");case"/":return to(),void(zi="singleLineComment")}throw co(to())},multiLineComment(){switch(Xi){case"*":return to(),void(zi="multiLineCommentAsterisk");case void 0:throw co(to())}to()},multiLineCommentAsterisk(){switch(Xi){case"*":return void to();case"/":return to(),void(zi="default");case void 0:throw co(to())}to(),zi="multiLineComment"},singleLineComment(){switch(Xi){case"\n":case"\r":case"\u2028":case"\u2029":return to(),void(zi="default");case void 0:return to(),no("eof")}to()},value(){switch(Xi){case"{":case"[":return no("punctuator",to());case"n":return to(),ro("ull"),no("null",null);case"t":return to(),ro("rue"),no("boolean",!0);case"f":return to(),ro("alse"),no("boolean",!1);case"-":case"+":return"-"===to()&&(Vi=-1),void(zi="sign");case".":return Qi=to(),void(zi="decimalPointLeading");case"0":return Qi=to(),void(zi="zero");case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return Qi=to(),void(zi="decimalInteger");case"I":return to(),ro("nfinity"),no("numeric",1/0);case"N":return to(),ro("aN"),no("numeric",NaN);case'"':case"'":return Wi='"'===to(),Qi="",void(zi="string")}throw co(to())},identifierNameStartEscape(){if("u"!==Xi)throw co(to());to();const u=io();switch(u){case"$":case"_":break;default:if(!ki.isIdStartChar(u))throw fo()}Qi+=u,zi="identifierName"},identifierName(){switch(Xi){case"$":case"_":case"‌":case"‍":return void(Qi+=to());case"\\":return to(),void(zi="identifierNameEscape")}if(!ki.isIdContinueChar(Xi))return no("identifier",Qi);Qi+=to()},identifierNameEscape(){if("u"!==Xi)throw co(to());to();const u=io();switch(u){case"$":case"_":case"‌":case"‍":break;default:if(!ki.isIdContinueChar(u))throw fo()}Qi+=u,zi="identifierName"},sign(){switch(Xi){case".":return Qi=to(),void(zi="decimalPointLeading");case"0":return Qi=to(),void(zi="zero");case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return Qi=to(),void(zi="decimalInteger");case"I":return to(),ro("nfinity"),no("numeric",Vi*(1/0));case"N":return to(),ro("aN"),no("numeric",NaN)}throw co(to())},zero(){switch(Xi){case".":return Qi+=to(),void(zi="decimalPoint");case"e":case"E":return Qi+=to(),void(zi="decimalExponent");case"x":case"X":return Qi+=to(),void(zi="hexadecimal")}return no("numeric",0*Vi)},decimalInteger(){switch(Xi){case".":return Qi+=to(),void(zi="decimalPoint");case"e":case"E":return Qi+=to(),void(zi="decimalExponent")}if(!ki.isDigit(Xi))return no("numeric",Vi*Number(Qi));Qi+=to()},decimalPointLeading(){if(ki.isDigit(Xi))return Qi+=to(),void(zi="decimalFraction");throw co(to())},decimalPoint(){switch(Xi){case"e":case"E":return Qi+=to(),void(zi="decimalExponent")}return ki.isDigit(Xi)?(Qi+=to(),void(zi="decimalFraction")):no("numeric",Vi*Number(Qi))},decimalFraction(){switch(Xi){case"e":case"E":return Qi+=to(),void(zi="decimalExponent")}if(!ki.isDigit(Xi))return no("numeric",Vi*Number(Qi));Qi+=to()},decimalExponent(){switch(Xi){case"+":case"-":return Qi+=to(),void(zi="decimalExponentSign")}if(ki.isDigit(Xi))return Qi+=to(),void(zi="decimalExponentInteger");throw co(to())},decimalExponentSign(){if(ki.isDigit(Xi))return Qi+=to(),void(zi="decimalExponentInteger");throw co(to())},decimalExponentInteger(){if(!ki.isDigit(Xi))return no("numeric",Vi*Number(Qi));Qi+=to()},hexadecimal(){if(ki.isHexDigit(Xi))return Qi+=to(),void(zi="hexadecimalInteger");throw co(to())},hexadecimalInteger(){if(!ki.isHexDigit(Xi))return no("numeric",Vi*Number(Qi));Qi+=to()},string(){switch(Xi){case"\\":return to(),void(Qi+=function(){switch(uo()){case"b":return to(),"\b";case"f":return to(),"\f";case"n":return to(),"\n";case"r":return to(),"\r";case"t":return to(),"\t";case"v":return to(),"\v";case"0":if(to(),ki.isDigit(uo()))throw co(to());return"\0";case"x":return to(),function(){let u="",t=uo();if(!ki.isHexDigit(t))throw co(to());if(u+=to(),t=uo(),!ki.isHexDigit(t))throw co(to());return u+=to(),String.fromCodePoint(parseInt(u,16))}();case"u":return to(),io();case"\n":case"\u2028":case"\u2029":return to(),"";case"\r":return to(),"\n"===uo()&&to(),"";case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case void 0:throw co(to())}return to()}());case'"':return Wi?(to(),no("string",Qi)):void(Qi+=to());case"'":return Wi?void(Qi+=to()):(to(),no("string",Qi));case"\n":case"\r":throw co(to());case"\u2028":case"\u2029":!function(u){console.warn(`JSON5: '${lo(u)}' in strings is not valid ECMAScript; consider escaping`)}(Xi);break;case void 0:throw co(to())}Qi+=to()},start(){switch(Xi){case"{":case"[":return no("punctuator",to())}zi="value"},beforePropertyName(){switch(Xi){case"$":case"_":return Qi=to(),void(zi="identifierName");case"\\":return to(),void(zi="identifierNameStartEscape");case"}":return no("punctuator",to());case'"':case"'":return Wi='"'===to(),void(zi="string")}if(ki.isIdStartChar(Xi))return Qi+=to(),void(zi="identifierName");throw co(to())},afterPropertyName(){if(":"===Xi)return no("punctuator",to());throw co(to())},beforePropertyValue(){zi="value"},afterPropertyValue(){switch(Xi){case",":case"}":return no("punctuator",to())}throw co(to())},beforeArrayValue(){if("]"===Xi)return no("punctuator",to());zi="value"},afterArrayValue(){switch(Xi){case",":case"]":return no("punctuator",to())}throw co(to())},end(){throw co(to())}};function no(u,t){return{type:u,value:t,line:Mi,column:Hi}}function ro(u){for(const t of u){if(uo()!==t)throw co(to());to()}}function io(){let u="",t=4;for(;t-- >0;){const t=uo();if(!ki.isHexDigit(t))throw co(to());u+=to()}return String.fromCodePoint(parseInt(u,16))}const oo={start(){if("eof"===qi.type)throw Do();ao()},beforePropertyName(){switch(qi.type){case"identifier":case"string":return Ki=qi.value,void(Ui="afterPropertyName");case"punctuator":return void so();case"eof":throw Do()}},afterPropertyName(){if("eof"===qi.type)throw Do();Ui="beforePropertyValue"},beforePropertyValue(){if("eof"===qi.type)throw Do();ao()},beforeArrayValue(){if("eof"===qi.type)throw Do();"punctuator"!==qi.type||"]"!==qi.value?ao():so()},afterPropertyValue(){if("eof"===qi.type)throw Do();switch(qi.value){case",":return void(Ui="beforePropertyName");case"}":so()}},afterArrayValue(){if("eof"===qi.type)throw Do();switch(qi.value){case",":return void(Ui="beforeArrayValue");case"]":so()}},end(){}};function ao(){let u;switch(qi.type){case"punctuator":switch(qi.value){case"{":u={};break;case"[":u=[]}break;case"null":case"boolean":case"numeric":case"string":u=qi.value}if(void 0===Ji)Ji=u;else{const t=ji[ji.length-1];Array.isArray(t)?t.push(u):t[Ki]=u}if(null!==u&&"object"==typeof u)ji.push(u),Ui=Array.isArray(u)?"beforeArrayValue":"beforePropertyName";else{const u=ji[ji.length-1];Ui=null==u?"end":Array.isArray(u)?"afterArrayValue":"afterPropertyValue"}}function so(){ji.pop();const u=ji[ji.length-1];Ui=null==u?"end":Array.isArray(u)?"afterArrayValue":"afterPropertyValue"}function co(u){return Co(void 0===u?`JSON5: invalid end of input at ${Mi}:${Hi}`:`JSON5: invalid character '${lo(u)}' at ${Mi}:${Hi}`)}function Do(){return Co(`JSON5: invalid end of input at ${Mi}:${Hi}`)}function fo(){return Hi-=5,Co(`JSON5: invalid identifier character at ${Mi}:${Hi}`)}function lo(u){const t={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};if(t[u])return t[u];if(u<" "){const t=u.charCodeAt(0).toString(16);return"\\x"+("00"+t).substring(t.length)}return u}function Co(u){const t=new SyntaxError(u);return t.lineNumber=Mi,t.columnNumber=Hi,t}const po={parse:function(u,t){Ri=String(u),Ui="start",ji=[],Gi=0,Mi=1,Hi=0,qi=void 0,Ki=void 0,Ji=void 0;do{qi=Zi(),oo[Ui]()}while("eof"!==qi.type);return"function"==typeof t?Yi({"":Ji},"",t):Ji},stringify:function(u,t,e){const n=[];let r,i,o,a="",s="";if(null==t||"object"!=typeof t||Array.isArray(t)||(e=t.space,o=t.quote,t=t.replacer),"function"==typeof t)i=t;else if(Array.isArray(t)){r=[];for(const u of t){let t;"string"==typeof u?t=u:("number"==typeof u||u instanceof String||u instanceof Number)&&(t=String(u)),void 0!==t&&r.indexOf(t)<0&&r.push(t)}}return e instanceof Number?e=Number(e):e instanceof String&&(e=String(e)),"number"==typeof e?e>0&&(e=Math.min(10,Math.floor(e)),s="          ".substr(0,e)):"string"==typeof e&&(s=e.substr(0,10)),c("",{"":u});function c(u,t){let e=t[u];switch(null!=e&&("function"==typeof e.toJSON5?e=e.toJSON5(u):"function"==typeof e.toJSON&&(e=e.toJSON(u))),i&&(e=i.call(t,u,e)),e instanceof Number?e=Number(e):e instanceof String?e=String(e):e instanceof Boolean&&(e=e.valueOf()),e){case null:return"null";case!0:return"true";case!1:return"false"}return"string"==typeof e?D(e):"number"==typeof e?String(e):"object"==typeof e?Array.isArray(e)?function(u){if(n.indexOf(u)>=0)throw TypeError("Converting circular structure to JSON5");n.push(u);let t=a;a+=s;let e,r=[];for(let t=0;t<u.length;t++){const e=c(String(t),u);r.push(void 0!==e?e:"null")}if(0===r.length)e="[]";else if(""===s){e="["+r.join(",")+"]"}else{let u=",\n"+a,n=r.join(u);e="[\n"+a+n+",\n"+t+"]"}return n.pop(),a=t,e}(e):function(u){if(n.indexOf(u)>=0)throw TypeError("Converting circular structure to JSON5");n.push(u);let t=a;a+=s;let e,i=r||Object.keys(u),o=[];for(const t of i){const e=c(t,u);if(void 0!==e){let u=f(t)+":";""!==s&&(u+=" "),u+=e,o.push(u)}}if(0===o.length)e="{}";else{let u;if(""===s)u=o.join(","),e="{"+u+"}";else{let n=",\n"+a;u=o.join(n),e="{\n"+a+u+",\n"+t+"}"}}return n.pop(),a=t,e}(e):void 0}function D(u){const t={"'":.1,'"':.2},e={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};let n="";for(let r=0;r<u.length;r++){const i=u[r];switch(i){case"'":case'"':t[i]++,n+=i;continue;case"\0":if(ki.isDigit(u[r+1])){n+="\\x00";continue}}if(e[i])n+=e[i];else if(i<" "){let u=i.charCodeAt(0).toString(16);n+="\\x"+("00"+u).substring(u.length)}else n+=i}const r=o||Object.keys(t).reduce(((u,e)=>t[u]<t[e]?u:e));return n=n.replace(new RegExp(r,"g"),e[r]),r+n+r}function f(u){if(0===u.length)return D(u);const t=String.fromCodePoint(u.codePointAt(0));if(!ki.isIdStartChar(t))return D(u);for(let e=t.length;e<u.length;e++)if(!ki.isIdContinueChar(String.fromCodePoint(u.codePointAt(e))))return D(u);return u}}};var Ao=po;const Eo=Ao||Object.freeze({__proto__:null,default:Ao});function Fo(u){try{let e;if((t.existsSync(u)||t.existsSync(u+="5"))&&(e=t.readFileSync(u,"utf-8")),!e)return;return Ii.verbose(`读取配置文件 ${u}`),Eo.parse(e)}catch(u){!function(u){if(!x(u))return;throw new TypeError("配置文件存在，但是无法解析！可能 JSON5 格式不正确！")}(u.message)}}const go=u=>D.resolve(process.cwd(),u),mo=u=>D.resolve(__dirname,"../",u);function ho(u){throw new Error(u||"获取配置失败！未找到配置文件！")}const yo=Array.from(new Set([go("./config/config.dev.json"),go(`./config/${Ni.configFileName}`),go(`./${Ni.configFileName}`),mo(`./config/${Ni.configFileName}`),mo(`./${Ni.configFileName}`)])),Bo=["./config.json",go("./config/config.json")];function vo(u){let t;if(t=Array.isArray(u)?u:u.account.filter((u=>u.cookie)),0!==t.length)return function(u){const t=process.argv.find((u=>u.includes("--item")||u.includes("-i")||u.includes("-I")));if(!t)return u[0];const e=Number(t.split("=")[1])-1;return!e||e>=u.length||e<0?(Ii.warn("似乎想要指定一个不存在的用户，我们将指定第一个用户"),u[0]):u[e]}(t)}function wo(){if(globalThis.BILITOOLS_CONFIG)return globalThis.BILITOOLS_CONFIG;yo.splice(0,1,...Bo);for(let u=0;u<yo.length;u++){const t=Fo(yo[u]);if(t)return t}return(()=>{const{BILITOOLS_CONFIG:u,BILI_SCF_CONFIG:t,BILI_CONFIG:e}=process.env,n=u||t||e;if(n)try{return Eo.parse(Pi(n))}catch{ho("环境中的配置不是有效的 JSON 字符串！")}})()}function _o(u){if(u||ho(),function(u){if(Array.isArray(u))return!0;return Boolean(u.account&&u.account.length)}(u)){const t=vo(u);if(t)return t}return u.cookie||ho("配置文件中没有 cookie！"),u}function bo(u){return u&&u.map((u=>Number(u))).filter((u=>u>0&&u%1==0))}class $o{constructor(u){var t;this.config=u,this.COOKIE=u.cookie,this.BILIJCT=Ti(u.cookie),this.USERID=(t=u.cookie,Number(Si(t,"DedeUserID"))||0),this.USER_AGENT=u.userAgent;const e=u.apiDelay??[2,6];this.BILI_API_DELAY=Array.isArray(e)?bo(e):[Number(e)];const n=j(u.message);this.MESSAGE_API=n.api,this.PUSHPLUS_TOKEN=n.pushplusToken||process.env.PUSHPLUS_TOKEN;const r=j(u.coin);this.BILI_CUSTOMIZE_UP=bo(r.customizeUp||u.customizeUp)||[],this.BILI_UPPER_ACC_MATCH=!1!==(r.upperAccMatch??u.upperAccMatch),this.BILI_COIN_RETRY_NUM=r.retryNum||u.coinRetryNum||4,this.BILI_TARGET_LEVEL=(r.targetLevel||u.targetLevel)??6,this.BILI_STAY_COINS=(r.stayCoins||u.stayCoins)??0,this.BILI_TARGET_COINS=(r.targetCoins||u.targetCoins)??5;const i=j(u.gift);this.BILI_GIFT_UP=bo(i.mids||u.giftUp)||this.BILI_CUSTOMIZE_UP||[];const o=j(u.charge);this.CHARGE_ID=o.mid||u.chargeUpId||this.USERID,this.CHARGE_PRESET_TIME=o.presetTime||u.chargePresetTime||31;const a=j(u.match);this.MATCH_COINS=(a.coins||u.matchCoins)??5,this.MATCH_SELECTION=(a.selection||u.matchSelection)??1,this.MATCH_DIFF=(a.diff||u.matchDiff)??0;const s=j(u.lottery);this.LOTTERY_EXCLUDE=s.excludeAward||b,this.LOTTERY_INCLUDE=s.includeAward||$,this.LOTTERY_UP_BLACKLIST=s.blackUid||S,this.LOTTERY_MOVE_TAG=s.moveTag,this.LOTTERY_PAGE_NUM=s.pageNum||2}}let So;const To=new Proxy({},{get:(u,t)=>(So||Io(),Reflect.get(So,t)),set:(u,t,e)=>"config"===t&&e?(Io(e),!0):Reflect.set(So,t,e)});let Oo=null;function Io(u){u||(u=_o(wo())),So=new $o(_o(u)),Oo=class extends class{static money=0;static coinsTask=5;static share=!1;static watch=!1;static currentStartFun=0;static bCoinCouponBalance=0;static vipType=0;static userLevel=0}{},Oo.coinsTask=So.BILI_TARGET_COINS}const xo=(u,t)=>{const{isTransformResponse:e,isReturnNativeResponse:n}=t;if(n)return u;if(!1===e)return u.body;const{body:r}=u;if(t.isJsonp&&x(r))return function(u){const t=u.replace(/^\w+\(/,"").replace(/\)$/,"");return JSON.parse(t)}(r);try{if(x(r)&&r.startsWith("{"))return JSON.parse(r)}catch{}return r};class Po{name="VGot";constructor(u){u.baseURL&&(u.prefixUrl=u.baseURL),this.options=u,this.gotInstance=p.default.extend(u,{hooks:{afterResponse:[u=>{const{requestOptions:t}=u.request.options;var e;null!=t&&t.withBiliCookie&&(To.COOKIE=$i(To.COOKIE,(null===(e=u.headers)||void 0===e?void 0:e["set-cookie"])||[]));return u}]}})}request(u){const{requestOptions:t={},headers:e={}}=this.options;return u.requestOptions=Object.assign({},t,u.requestOptions),u.headers=Object.assign({},e,u.headers),t.withBiliCookie&&(u.headers.Cookie=To.COOKIE),t.retry&&(u.retry=t.retry),u=function(u){var t;function e(t){u.agent||(u.agent={}),u.agent[t]=u[`${t}Agent`]}return x(u.url)||(u.url=u.url.toString()),I(u.params)&&!x(u.searchParams)&&(u.searchParams={...u.searchParams,...u.params}),I(u.data)&&(null!==(t=u.headers["content-type"])&&void 0!==t&&t.startsWith("application/x-www-form-urlencoded")?u.body=M(u.data):u.json=u.data),u.httpAgent&&e("http"),u.httpsAgent&&e("https"),u.url&&u.url.startsWith("/")&&(u.url=u.url.substring(1)),u}(u),new Promise(((t,e)=>{this.gotInstance(u).then((n=>{{"function"!=typeof xo;try{const e=xo(n,u.requestOptions);t(e)}catch(u){e(u||new Error("请求错误!"))}}})).catch((u=>{e(u)}))}))}get(u,t){return x(u)?this.request({...t,method:"GET",url:u}):this.request({...u,method:"GET"})}post(u,t,e){return x(u)?this.request({...e,method:"POST",url:u,data:t}):this.request({...u,method:"POST"})}put(u,t,e){return this.request({...e,method:"PUT",url:u,data:t})}delete(u,t,e){return this.request({...e,method:"DELETE",url:u,data:t})}patch(u,t,e){return this.request({...e,method:"PATCH",url:u,data:t})}}function No(u){return new Po(G({timeout:1e4,headers:{"content-type":w["content-type"],"user-agent":w["user-agent"],"accept-language":w["accept-language"],"accept-encoding":w["accept-encoding"]},requestOptions:{isTransformResponse:!0,ignoreCancelToken:!0,withBiliCookie:!0}},u||{}))}const Lo=No({requestOptions:{withBiliCookie:!1}}),ko=No();async function Ro(){let u="v0.5.0-rc0";u.includes(".")?Ii.info("当前版本【v0.5.0-rc0】"):u=void 0;try{if(u||(u=function(){try{return require("../../package.json").version}catch{}}()||function(){try{return f.readFileSync(D.resolve(__dirname,"../version.txt"),"utf8").trim()}catch{}}(),Ii.info(`当前版本【v${u}】`)),!u)return;const t=await async function(){const u={timeout:6e3};try{return(await Promise.any([Lo.get("https://api.github.com/repos/catlair/BiliTools/releases/latest",u),Lo.get("https://gitee.com/api/v5/repos/catlair/BiliTools/releases/latest",u)])).tag_name}catch(u){return}}();t&&t!==`v${u}`&&Ii.info(`可更新：最新版本【${t}】`)}catch{}}process.env.IS_LOCAL="true",async function(){const{dailyTasks:u}=await Promise.resolve().then((function(){return Js}));await Ro(),await u()}();const Uo={silver2Coin:!0,liveSignTask:!0,addCoins:!0,mangaSign:!1,shareAndWatch:!0,supGroupSign:!1,liveSendMessage:!1,taskReward:!0,charging:!1,getVipPrivilege:!1,giveGift:!1,matchGame:!1,liveLottery:!1,liveRedPack:!1};function jo(){return{...Uo}}function Go(u){const t=function(){const u=jo();for(const t in u)if(Object.prototype.hasOwnProperty.call(u,t)){const e=u[t];switch((To.config.function||{})[t]){case!0:!1===e&&(u[t]=!0);break;case!1:!0===e&&(u[t]=!1)}}return u.addCoins||u.shareAndWatch||(u.taskReward=!1),u}();return u.map((u=>t[u.name]?u:null)).filter((u=>u))}function Mo(u){const t=To.BILI_API_DELAY;let e;e=u||(1===t.length?1e3*t[0]:1e3*k(t[0]||2,t[1]||6));const n=(new Date).getTime()+Number(e||0);for(;(new Date).getTime()<n;);return new Promise((u=>{u("done")}))}function Ho(){var u;const t=(null===(u=To.config)||void 0===u?void 0:u.message)||{};["GOBOT_URL","GOBOT_TOKEN","GOBOT_QQ","SCKEY","QQ_SKEY","QQ_MODE","BARK_PUSH","BARK_SOUND","BARK_GROUP","TG_BOT_TOKEN","TG_USER_ID","TG_PROXY_AUTH","TG_PROXY_HOST","TG_PROXY_PORT","TG_API_HOST","DD_BOT_TOKEN","DD_BOT_SECRET","QYWX_KEY","QYWX_AM","IGOT_PUSH_KEY","PUSH_PLUS_TOKEN","PUSH_PLUS_USER"].forEach((u=>{const e=t[(n=u,n.toLowerCase().replace(/_(\w)/g,((u,t)=>t.toUpperCase())))]||t[u]||process.env[u];var n;e&&(process.env[u]=e)})),To.PUSHPLUS_TOKEN&&(process.env.PUSH_PLUS_TOKEN=To.PUSHPLUS_TOKEN),function(){process.env.PUSH_KEY&&(qo=process.env.PUSH_KEY);process.env.QQ_SKEY&&(aa=process.env.QQ_SKEY);process.env.QQ_MODE&&(sa=process.env.QQ_MODE);process.env.BARK_PUSH?(Ko=process.env.BARK_PUSH.indexOf("https")>-1||process.env.BARK_PUSH.indexOf("http")>-1?process.env.BARK_PUSH:`https://api.day.app/${process.env.BARK_PUSH}`,process.env.BARK_SOUND&&(Jo=process.env.BARK_SOUND),process.env.BARK_GROUP&&(Yo=process.env.BARK_GROUP)):Ko&&-1===Ko.indexOf("https")&&-1===Ko.indexOf("http")&&(Ko=`https://api.day.app/${Ko}`);process.env.TG_BOT_TOKEN&&(zo=process.env.TG_BOT_TOKEN);process.env.TG_USER_ID&&(Qo=process.env.TG_USER_ID);process.env.TG_PROXY_AUTH&&(Xo=process.env.TG_PROXY_AUTH);process.env.TG_PROXY_HOST&&(Wo=process.env.TG_PROXY_HOST);process.env.TG_PROXY_PORT&&(Vo=process.env.TG_PROXY_PORT);process.env.TG_API_HOST&&(Zo=process.env.TG_API_HOST);process.env.DD_BOT_TOKEN&&(ua=process.env.DD_BOT_TOKEN,process.env.DD_BOT_SECRET&&(ta=process.env.DD_BOT_SECRET));process.env.QYWX_KEY&&(ea=process.env.QYWX_KEY);process.env.QYWX_AM&&(na=process.env.QYWX_AM);process.env.IGOT_PUSH_KEY&&(ra=process.env.IGOT_PUSH_KEY);process.env.PUSH_PLUS_TOKEN&&(ia=process.env.PUSH_PLUS_TOKEN);process.env.PUSH_PLUS_USER&&(oa=process.env.PUSH_PLUS_USER)}()}let qo="",Ko="",Jo="",Yo="QingLong",zo="",Qo="",Wo="",Vo="",Xo="",Zo="api.telegram.org",ua="",ta="",ea="",na="",ra="",ia="",oa="",aa="",sa="";async function ca(u,t){var e;const n=null===(e=To.config.message)||void 0===e?void 0:e.email;if(!(n&&n.pass&&n.from&&n.host))return;const r=Number(n.port)||465,i=C.createTransport({host:n.host,port:r,secure:465===r,auth:{user:n.from,pass:n.pass}}),o=await i.sendMail({from:`${u} <${n.from}>`,to:n.to,subject:u,headers:{"Content-Type":"text/plain; charset=utf-8"},text:t.replace(/\n/g,"\r\n")});Ii.info(`邮件消息已发送: ${o.messageId}`)}async function Da(u,t){try{const e=To.MESSAGE_API;if(!e)return;const n=e.replace("{title}",u).replace("{text}",t);await Lo.get(n)}catch(u){Ii.info(`自定义接口消息发送失败: ${u}`),Ii.error(u)}}function fa(u,t,e=2100){return new Promise((n=>{if(qo){t=t.replace(/[\n\r]/g,"\n\n");const r={url:qo.includes("SCT")?`https://sctapi.ftqq.com/${qo}.send`:`https://sc.ftqq.com/${qo}.send`,params:`text=${u}&desp=${t}`,headers:{"Content-Type":"application/x-www-form-urlencoded"},timeout:15e3};setTimeout((()=>{Lo.post(r).then((u=>{0===u.errno||0===u.data.errno?Ii.info("server酱发送通知消息成功🎉"):1024===u.errno?Ii.info(`server酱发送通知消息异常: ${u.errmsg}`):Ii.info(`server酱发送通知消息异常\n${JSON.stringify(u)}`)})).catch((u=>{Ii.info("发送通知调用API失败！！"),Ii.info(u)})).finally((()=>{n("")}))}),e)}else n("")}))}function la(u,t){return new Promise((e=>{if(aa){const n={url:`https://push.xuthus.cc/${sa}/${aa}`,headers:{"Content-Type":"application/json"},data:{},params:{}};u=u.replace(/京豆/g,"豆豆"),t=(t=(t=t.replace(/京豆/g,"")).replace(/🐶/g,"")).replace(/红包/g,"H包"),"email"===sa?n.data={t:u,c:t}:n.params=`${u}\n\n${t}`;const r=function(u){switch(u){case"send":return"个人";case"group":return"QQ群";case"wx":return"微信";case"ww":return"企业微信";case"email":return"邮件";default:return"未知方式"}};Lo.post(n).then((u=>{200===u.code?Ii.info(`酷推发送${r(sa)}通知消息成功🎉`):400===u.code?Ii.info(`QQ酷推(Cool Push)发送${r(sa)}推送失败：${u.msg}`):503===u.code?Ii.info(`QQ酷推出错，${u.message}：${u.data}`):Ii.info(`酷推推送异常: ${JSON.stringify(u)}`)})).catch((u=>{Ii.info(`发送${r(sa)}通知调用API失败！！`),Ii.info(u)})).finally((()=>{e("")}))}else e("")}))}function Ca(u,t,e={}){return new Promise((n=>{if(Ko){const r={url:`${Ko}/${encodeURIComponent(u)}/${encodeURIComponent(t)}?sound=${Jo}&group=${Yo}&${M(e)}`,headers:{"Content-Type":"application/x-www-form-urlencoded"},timeout:15e3};Lo.get(r).then((u=>{200===u.code?Ii.info("Bark APP发送通知消息成功🎉"):Ii.info(`Bark APP发送通失败：${u.message}`)})).catch((u=>{Ii.info("Bark APP发送通知调用API失败！！"),Ii.error(u)})).finally((()=>{n("")}))}n("")}))}function da(u,t){return new Promise((e=>{if(zo&&Qo){const n={url:`https://${Zo}/bot${zo}/sendMessage`,params:`chat_id=${Qo}&text=${u}\n\n${t}&disable_web_page_preview=true`,headers:{"Content-Type":"application/x-www-form-urlencoded"},timeout:15e3};if(Wo&&Vo){const u=d.httpsOverHttp({proxy:{host:Wo,port:+Vo,proxyAuth:Xo},maxSockets:1});Object.assign(n,{httpsAgent:u})}Lo.post(n).then((u=>{u.ok?Ii.info("Telegram发送通知消息成功🎉。"):400===u.error_code?Ii.info("请主动给bot发送一条消息并检查接收用户ID是否正确。"):401===u.error_code&&Ii.info("Telegram bot token 填写错误。")})).catch((u=>{Ii.info("telegram发送通知消息失败！！"),Ii.info(u)})).finally((()=>{e("")}))}else e("")}))}function pa(u,t){return new Promise((e=>{const n={url:`https://oapi.dingtalk.com/robot/send?access_token=${ua}`,data:{msgtype:"text",text:{content:` ${u}\n\n${t}`}},headers:{"Content-Type":"application/json"},timeout:15e3};if(ua){if(ta){const u=require("crypto"),t=Date.now(),e=u.createHmac("sha256",ta);e.update(`${t}\n${ta}`);const r=encodeURIComponent(e.digest("base64"));n.url=`${n.url}&timestamp=${t}&sign=${r}`}Lo.post(n).then((u=>{0===u.errcode?Ii.info("钉钉发送通知消息成功🎉。"):Ii.info(`钉钉发送通知失败：${u.errmsg}`)})).catch((u=>{Ii.info("钉钉发送通知消息失败！！"),Ii.info(u)})),e("")}else e("")}))}function Aa(u,t){return new Promise((e=>{const n={url:`https://qyapi.weixin.qq.com/cgi-bin/webhook/send?key=${ea}`,data:{msgtype:"text",text:{content:` ${u}\n\n${t}`}},headers:{"Content-Type":"application/json"},timeout:15e3};ea&&Lo.post(n).then((u=>{0===u.errcode?Ii.info("企业微信发送通知消息成功🎉。"):Ii.info(`企业微信发送通知失败：${u.errmsg}`)})).catch((u=>{Ii.info("企业微信发送通知消息失败！！"),Ii.info(u)})).finally((()=>{e("")})),e("")}))}function Ea(u){const t=na.split(",");if(t[2]){const e=t[2].split("|");let n="";for(let t=0;t<e.length;t++){const r="签到号 "+(t+1);u.match(r)&&(n=e[t])}return n||(n=t[2]),n}return"@all"}function Fa(u,t){return new Promise((e=>{if(na){const n=na.split(","),r={url:"https://qyapi.weixin.qq.com/cgi-bin/gettoken",data:{corpid:`${n[0]}`,corpsecret:`${n[1]}`},headers:{"Content-Type":"application/json"},timeout:15e3};Lo.post(r).then((r=>{const i=t.replace(/\n/g,"<br/>"),o=JSON.parse(r).access_token;let a;switch(n[4]){case"0":a={msgtype:"textcard",textcard:{title:`${u}`,description:`${t}`,url:"https://github.com/whyour/qinglong",btntxt:"更多"}};break;case"1":a={msgtype:"text",text:{content:`${u}\n\n${t}`}};break;default:a={msgtype:"mpnews",mpnews:{articles:[{title:`${u}`,thumb_media_id:`${n[4]}`,author:"智能助手",content_source_url:"",content:`${i}`,digest:`${t}`}]}}}n[4]||(a={msgtype:"text",text:{content:`${u}\n\n${t}`}}),a={url:`https://qyapi.weixin.qq.com/cgi-bin/message/send?access_token=${o}`,data:{touser:`${Ea(t)}`,agentid:`${n[3]}`,safe:"0",...a},headers:{"Content-Type":"application/json"}},Lo.post(a).then((u=>{0===u.errcode?Ii.info("成员ID:"+Ea(t)+"企业微信应用消息发送通知消息成功🎉。"):Ii.info(`企业微信应用：${u.errmsg}`)})).catch((u=>{Ii.info("成员ID:"+Ea(t)+"企业微信应用消息发送通知消息失败！！"),Ii.info(u)})).finally((()=>{e("")}))})).catch((u=>{Ii.error("企业微信应用消息发送通知消息失败！！")}))}else e("")}))}function ga(u,t,e={}){return new Promise((n=>{if(ra){if(!new RegExp("^[a-zA-Z0-9]{24}$").test(ra))return Ii.info("您所提供的IGOT_PUSH_KEY无效"),void n("");const r={url:`https://push.hellyw.com/${ra.toLowerCase()}`,params:`title=${u}&content=${t}&${M(e)}`,headers:{"Content-Type":"application/x-www-form-urlencoded"},timeout:15e3};Lo.post(r).then((u=>{"string"==typeof u&&(u=JSON.parse(u)),0===u.ret?Ii.info("iGot发送通知消息成功🎉"):Ii.info(`iGot发送通知消息失败：${u.errMsg}`)})).catch((u=>{Ii.info("发送通知调用API失败！！"),Ii.info(u)})).finally((()=>{n("")}))}else n("")}))}function ma(u,t){return new Promise((e=>{if(ia){t=t.replace(/[\n\r]/g,"<br>");const n={url:"https://www.pushplus.plus/send",params:{token:`${ia}`,title:`${u}`,content:`${t}`,topic:`${oa}`},headers:{"Content-Type":" application/json"},timeout:15e3};Lo.post(n).then((u=>{200===u.code?Ii.info(`push+发送${oa?"一对多":"一对一"}通知消息完成。`):Ii.info(`push+发送${oa?"一对多":"一对一"}通知消息失败：${u.msg}`)})).catch((u=>{Ii.info(`push+发送${oa?"一对多":"一对一"}通知消息失败！！`),Ii.info(u)})).finally((()=>{e("")}))}else e("")}))}async function ha(u,t){Ii.info("----【消息推送】----"),u=`Bili-${Oo.nickname}-${u}`,await async function(u,t,e={},n){Ho(),t+=n,await Promise.all([fa(u,t),ma(u,t)]),await Promise.all([Ca(u,t,e),da(u,t),pa(u,t),Aa(u,t),Fa(u,t),ga(u,t,e),ca(u,t),Da(u,t),la(u,t)])}(u,t,void 0,"")}const ya=No({baseURL:m,headers:{"user-agent":To.USER_AGENT}}),Ba=No({baseURL:h,headers:{Referer:g,"user-agent":To.USER_AGENT}}),va=No({baseURL:y,headers:{Referer:g,"user-agent":To.USER_AGENT}}),wa=No({baseURL:B,headers:{"user-agent":To.USER_AGENT}}),_a=No({baseURL:v,headers:{"user-agent":To.USER_AGENT}});function ba(u=3394945){const t=(new Date).getTime();return Ba.get(`/xlive/web-room/v1/gift/bag_list?t=${t}&room_id=${u}`)}function $a(u=1,t=10){return u>10&&(u=10),Ba.get(`/xlive/app-ucenter/v1/user/GetMyMedals?page=${u}&page_size=${t}`)}function Sa({ruid:u,gift_num:t,bag_id:e,gift_id:n,roomid:r}){const i=To.BILIJCT,o=i,a={gift_id:n,ruid:u,gift_num:t,bag_id:e,biz_id:r,rnd:(new Date).getTime(),send_ruid:0,storm_beat_id:0,metadata:"",price:0,visit_id:"",csrf:i,platform:"pc",biz_code:"Live",csrf_token:o,uid:To.USERID};return Ba.post("/xlive/revenue/v2/gift/sendBag",a,{headers:{Origin:E}})}function Ta(){return va.get("/x/web-interface/nav",{headers:{Origin:A}})}function Oa(){return va.get("/x/web-interface/coin/today/exp")}function Ia(u=1,t=50,e){return va.get("/x/relation/tag",{params:{tagid:e,pn:u,ps:t}})}function xa(u,t){return va.post("/x/relation/tags/addUsers?cross_domain=true",{fids:u,tagids:t,csrf:To.BILIJCT},{headers:{Origin:F}})}function Pa(u){const t=u.level_info,e=t.current_level;if(e>=To.BILI_TARGET_LEVEL&&(Oo.coinsTask=0),Ii.info(`当前等级: ${t.current_level}`),e>=6){const u=To.config.function;u.shareAndWatch=!1,u.addCoins=!1,u.taskReward=!1,Ii.info("已经满级，不需要再投币了，做个白嫖怪吧")}else{const u=t.next_exp-t.current_exp;Ii.info(`距离升级还需要 ${u} 经验，预计 ${function(u){if(To.BILI_TARGET_COINS<=0)return u/15;const t=10*To.BILI_TARGET_COINS+15,e=u/t,n=Oo.money/(To.BILI_TARGET_COINS-1);return e<n?Math.floor(e):(u-n*t)/25+n}(u).toFixed(2)} 天`)}}async function Na(u){try{var t;const{data:e}=await ya.get("/site/getCoin");Ii.info(`登录成功: ${u.uname}`),Ii.info(`硬币余额: ${e.money||0}`),Oo.nickname=function(u){const t=u.length;return t<=3?u:`${u[0]}**${u[t-1]}`}(u.uname),Oo.money=e.money||0,Oo.userLevel=u.level_info.current_level,Oo.bCoinCouponBalance=(null===(t=u.wallet)||void 0===t?void 0:t.coupon_balance)||0,Pa(u),function(u){let t="";switch(Oo.vipType=u.vipType,u.vipType){case 0:t="无大会员";break;case 1:t="月度大会员";break;case 2:t="年度大会员"}0===u.vipStatus&&(t="无大会员"===t?t:t+"[已过期]"),Ii.info(`大会员状态: ${t}`)}(u)}catch(u){Ii.error(`获取硬币信息异常: ${u.message}`),Ii.debug(u)}}function La(u,t,e=1){return va.post("/x/web-interface/coin/add",{aid:u,multiply:t,selectLike:e,csrf:To.BILIJCT})}function ka(u,t=1){return ko.post("https://www.bilibili.com/audio/music-service-c/web/coin/add",{sid:u,multiply:t,csrf:To.BILIJCT})}const Ra="video",Ua="audio",ja="article";async function Ga(u=!0){try{const n=To.USERID,{data:r,message:i,code:o}=await(u?Ia(t,e,-10):function(u,t,e,n,r){return va.get("/x/relation/followings",{params:{vmid:u,pn:t,ps:e,order:n,order_type:r}})}(n)),a=u?r:r.list;if(!a||0===a.length)return{msg:"-1",data:{}};if(0===o){await Mo();const{mid:u}=H(a)||{};return await qa(u)}return{msg:u?`未获取到特别关注列表: ${o}-${i}`:`未获取到关注列表: ${o}-${i}`,data:{}}}catch(u){return{msg:u.message,data:{}}}var t,e}async function Ma(){const u=H([1,3,4,5,160,22,119]);try{const{data:t,message:e,code:n}=await function(u,t){return va.get("/x/web-interface/ranking/region",{params:{rid:u,day:t}})}(u,3);if(0==n){const{aid:u,title:e,author:n}=H(t);return{msg:"0",data:{id:Number(u),title:e,author:n}}}return{msg:`未获取到排行信息: ${n}-${e}`,data:{}}}catch(u){return{msg:u.message,data:{}}}}async function Ha(){const u=To.BILI_CUSTOMIZE_UP;return 0===u.length?{msg:"-1",data:{}}:await qa(H(u))}async function qa(u){try{const{code:t,data:e,message:n}=await function(u){return va.get(`/x/space/navnum?mid=${u}`)}(u);if(t)return{msg:`通过uid获取视频失败: ${t}-${n}`,data:{}};await Mo();const{video:r,audio:i,article:o}=e,{type:a,page:s,index:c}=function([u,t,e]){const n=u+t+e;if(!n)return;const r=k(0,n-1);let i=r;if(r<u)return{type:Ra,page:L(30,i+1),index:i%30};const o=u+t;return i=r-u,r<o?{type:Ua,page:L(30,i+1),index:i%30}:(i=r-o,{type:ja,page:L(12,i+1),index:i%12})}([r,i,o]),D={[Ra]:Ka,[Ua]:Ja,[ja]:Ya},f=await D[a](u,s,c);return f.message?{msg:f.message,data:{}}:{msg:"0",data:f}}catch(u){return Ii.debug(u),{msg:u.message,data:{}}}}async function Ka(u,t,e){const{code:n,data:r,message:i}=await function(u,t,e=1,n=""){return va.get("/x/space/arc/search",{params:{jsonp:"jsonp",order:"pubdate",keyword:n,pn:e,tid:0,ps:t,mid:u}})}(u,30,t);if(n)return{message:i};const{aid:o,title:a,author:s}=r.list.vlist[e];return{type:Ra,id:o,title:a,author:s}}async function Ja(u,t,e){const{code:n,data:r,msg:i}=await function(u,t,e=1){return va.get("/audio/music-service/web/song/upper",{params:{jsonp:"jsonp",order:1,pn:e,ps:t,uid:u}})}(u,30,t);if(n)return{message:i};const{data:o}=r,{id:a,uname:s,title:c}=o[e];return{type:Ua,id:a,title:c,author:s}}async function Ya(u,t,e){const{code:n,data:r,message:i}=await function(u,t,e=1){return va.get("/x/space/article",{params:{callback:"__test",jsonp:"jsonp",sort:"publish_time",pn:e,ps:t,mid:u},requestOptions:{isJsonp:!0}})}(u,12,t);if(n)return{message:i};const{articles:o}=r,{id:a,title:s,author:{name:c}}=o[e];return{type:ja,id:a,title:s,author:c,mid:u}}const za=function(){const u=[Ha,Ga,()=>Ga(!1),Ma];return To.BILI_CUSTOMIZE_UP||u.shift(),u}();async function Qa(u=0){za.splice(0,Oo.currentStartFun+u);for(let u=0;u<za.length;u++){const t=za[u];let e=Number(To.BILI_COIN_RETRY_NUM??4);for(e=e<1?1:e>8?8:e;e--;){await Mo();const u=await t();if("-1"===u.msg&&(e=0),"0"===u.msg)return u}e<=0&&(Oo.currentStartFun=u)}return{msg:"-1",data:{id:0}}}async function Wa({id:u,coin:t,type:e,mid:n}){const r={[Ra]:La,[Ua]:ka,[ja]:(u,t=1)=>function(u,t,e=1){return va.post("/x/web-interface/coin/add",{aid:t,upid:u,avtype:2,multiply:e,csrf:To.BILIJCT})}(n,u,t)},i=await r[e](Number(u),t);return{code:i.code,message:i.message||i.msg}}async function Va(u){if(await async function(){try{const{data:u,code:t}=await Oa();if(0==t){const t=To.BILI_TARGET_COINS-u/10;Oo.coinsTask=t>0?t:0}}catch(u){}}(),Oo.coinsTask<=0||Oo.money<=0)return!0;const{data:t,msg:e}=await Qa(u.priority);return null!=t&&t.id&&"0"==e?(await Mo(),await async function(u,t){const{id:e,title:n,author:r,type:i,mid:o}=u;try{const u=await Wa({id:e,type:i,mid:o});if(0===u.code)Oo.money--,Oo.coinsTask--,t.num++,Ii.info(`给[${n}--up【${r}】]投币成功`);else if(34005===u.code)t.fillCount++,Ii.verbose(`当前稿件[${e}]不能再投币了`),t.fillCount>=3&&(Ii.warn("自定义用户组投币似乎没有币可投了"),t.priority++);else{if(-111===u.code||-104===u.code)return Ii.warn(`${e} ${u.message} 无法继续进行投币`),!0;if(t.eCount++,Ii.warn(`给${e}投币失败 ${u.code} ${u.message}`),t.prevCode===u.code)return!0;t.prevCode=u.code}}catch(u){t.eCount++,Ii.error(`投币异常 ${u.message}`)}finally{await Mo(1500)}return!1}(t,u)):(u.eCount++,!1)}async function Xa(){try{const{data:u,code:t,message:e}=await _a.get("/link_group/v1/member/my_groups");return 0===t?(null==u?void 0:u.list)||[]:(Ii.warn(`获取自己的应援团异常失败: ${e}`),[])}catch(u){Ii.error(`获取自己的应援团异常: ${u}`)}}const Za=["(⌒▽⌒)","（￣▽￣）","(=・ω・=)","(｀・ω・´)","(〜￣△￣)〜","(･∀･)","(°∀°)ﾉ","(￣3￣)","╮(￣▽￣)╭","_(:3」∠)_","( ´_ゝ｀)","←_←","→_→","(<_<)","(>_>)","(;¬_¬)","(ﾟДﾟ≡ﾟдﾟ)!?","Σ(ﾟдﾟ;)","Σ( ￣□￣||)","(´；ω；`)","（/TДT)/","(^・ω・^ )","(｡･ω･｡)","(●￣(ｴ)￣●)","ε=ε=(ノ≧∇≦)ノ","(´･_･`)","(-_-#)","（￣へ￣）","(￣ε(#￣) Σ","ヽ(`Д´)ﾉ","（#-_-)┯━┯","(╯°口°)╯(┴—┴","←◡←","( ♥д♥)","Σ>―(〃°ω°〃)♡→","⁄(⁄ ⁄•⁄ω⁄•⁄ ⁄)⁄","(╬ﾟдﾟ)▄︻┻┳═一","･*･:≡(　ε:)","(汗)","(苦笑)"].concat("1","2","3","4","5","6","7","8","9","签到","哈哈");async function us(){try{const{code:n,message:r,data:i}=await(u=1,t=256,e=To.USERID,Ba.get(`/xlive/app-ucenter/v1/fansMedal/panel?page=${u}&page_size=${t}&target_id=${e}`));return 0!==n?(Ii.verbose(`获取勋章信息失败 ${n} ${r}`),null):i}catch(u){return Ii.error(`获取勋章异常 ${u.message}`),null}var u,t,e}async function ts(u,t){const e=Za[k(Za.length-1)];try{const{code:n,message:r}=await function(u,t){const e=To.BILIJCT,n=e;return t||(t=k(10).toString()),Ba.post("/msg/send",{color:5566168,fontsize:25,mode:1,msg:t,rnd:Date.now(),roomid:u,bubble:0,csrf:e,csrf_token:n})}(u,e);return 0===n||(11e3===n?(Ii.warn(`【${t}】${u}-可能未开启评论`),!1):(Ii.warn(`【${t}】${u}-发送失败 ${r}`),Ii.verbose(`code: ${n}`),!1))}catch(u){Ii.verbose(`发送弹幕异常 ${u.message}`)}}async function es(){try{const{data:u,message:t,code:e}=await Ta();if(0!==e)return void Ii.warn(`获取用户信息失败：${e} ${t}`);!function(u){var t;Oo.bCoinCouponBalance=(null===(t=u.wallet)||void 0===t?void 0:t.coupon_balance)||0}(u)}catch(u){Ii.error(`获取用户信息异常：${u.message}`)}}var ns;async function rs(u){try{const t=function(u){switch(u){case 1:return"B 币券";case 2:return"大会员优惠券";default:return""}}(u),{code:e,message:n}=await function(u){return va.post("/x/vip/privilege/receive",{csrf:To.BILIJCT,type:u})}(u);let r="成功";return 0===e&&(r=`失败 ${n}`),Ii.info(`领取${t} ${r}`),!0}catch(u){Ii.error(`领取权益出现异常：${u.message}`)}return!1}async function is(u){let t=0,e=!1;for(;!(e||(e=await rs(u),t>2));)t++;return e}!function(u){u[u["成功"]=4]="成功",u[u["低于20电池"]=-2]="低于20电池",u[u["B币不足"]=-4]="B币不足"}(ns||(ns={}));let os=0;async function as(){try{const{data:{list:u}}=await ba();return u.filter((u=>{if(u.expire_at<=0)return!1;const t=(1e3*u.expire_at-(new Date).getTime())/864e5<2,e=![1,30607].includes(u.gift_id);return e&&t&&Ii.info(`${u.gift_name} 即将过期请尽快投喂`),!e&&t}))}catch(u){if(os)return null;await as(),os++}}async function ss(u){try{const{data:{live_room:t,name:e}}=await function(u){return va.get(`/x/space/acc/info?mid=${u}&jsonp=jsonp`)}(u);if(await Mo(),t.roomStatus)return{roomid:t.roomid,name:e}}catch{}}function cs(u,t,e,n){const r=To.BILIJCT,i={is_fav:0,main_id:t,oid:u,detail_id:e,count:n,csrf:r,csrf_token:r};return va.post("/x/esports/guess/add",i)}function Ds(){return Oo.money-To.MATCH_COINS<To.BILI_TARGET_COINS&&(Ii.info(`需要保留${To.BILI_TARGET_COINS}个硬币，任务结束`),!0)}function fs(u,t,e,n,r){const i=Ti(To.COOKIE),o=i,a=[(s=To.COOKIE,Si(s,"LIVE_BUVID")||""),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(u=>{const t=16*Math.random()|0;return("x"===u?t:3&t|8).toString(16)}))];var s;return{ua:To.USER_AGENT,id:[e,t,r,u],csrf_token:i,csrf:o,device:a,uname:n}}async function ls(){try{await ko.get("https://api.live.bilibili.com/relation/v1/Feed/heartBeat")}catch{}}async function Cs(u){const{data:{area_id:t,parent_area_id:e,room_id:n}}=await function(u){return Ba.get(`/room/v1/Room/get_info?room_id=${u}&from=room`)}(u);return{room_id:n,area_id:t,parent_area_id:e}}async function ds(u,t){const e={id:JSON.stringify(u.id),device:JSON.stringify(u.device),ts:(new Date).getTime(),is_patch:0,heart_beat:"[]",ua:u.ua,visit_id:"",csrf:u.csrf,csrf_token:u.csrf_token};try{const{data:n,code:r}=await function(u){return ko.post("https://live-trace.bilibili.com/xlive/data-interface/v1/x25Kn/E",u)}(e);if(0===r)return Ii.info(`进入【${u.uname}】的直播间`),t.v++,n}catch(u){Ii.verbose(u)}}async function ps(u,t,e){if(e.v>6)return;const n={id:JSON.stringify(t.id),device:JSON.stringify(t.device),ets:u.timestamp,benchmark:u.secret_key,time:60,ts:(new Date).getTime(),ua:t.ua},r=function(u,t){const[e,n,r,i]=JSON.parse(u.id),[o,a]=JSON.parse(u.device),{ets:s,time:c,ts:D}=u,f={platform:"web",parent_id:e,area_id:n,seq_id:r,room_id:i,buvid:o,uuid:a,ets:s,time:c,ts:D},C=u.benchmark,d=["MD5","SHA1","SHA256","SHA224","SHA512","SHA384"];let p=JSON.stringify(f);for(const u of t)p=l.createHmac(d[u],C).update(p).digest("hex");return p}(n,u.secret_rule);try{const{data:u,code:i,message:o}=await function(u){return ko.post("https://live-trace.bilibili.com/xlive/data-interface/v1/x25Kn/X",u)}(Object.assign({visit_id:"",csrf:t.csrf,csrf_token:t.csrf_token,s:r},n));return 0===i?(Ii.info(`向【${t.uname}】发送第${e.v}次心跳`),e.v++):Ii.warn(`向【${t.uname}】发送第${e.v}次心跳失败 ${i} ${o}`),u}catch(u){Ii.verbose(u)}}async function As(u=1,t=10){try{const{code:e,message:n,data:r}=await $a(u,t);return 0!==e?(Ii.verbose(`获取直播间失败 ${e} ${n}`),null):r}catch(u){return Ii.verbose(`获取直播间异常 ${u.message}`),null}}async function Es(u=!0){const t=await async function(){let u=0;try{var t,e;const{data:n,code:r}=await ba();return 0!==r||(null===(t=n.list)||void 0===t?void 0:t.length)<=0?24:(null===(e=n.list)||void 0===e||e.forEach((t=>{if(30607===t.gift_id){const e=(1e3*t.expire_at-(new Date).getTime())/864e5;e>6&&e<=7&&(u+=t.gift_num)}})),u>=24?0:24-u)}catch(u){}return 24}();let e;return u?e=await async function(){const{items:u,page_info:t}=await As();let{total_page:e}=t;if(e&&e>1){e=e>3?3:e;for(let t=2;t<=e;t++){const e=await As(t,10);u.push(...e.items)}}return u}():({items:e}=await As()),{fansMedalList:e,heartNum:t}}async function Fs(u,t,e,n){if(!n.v||t[e])return await ls(),await Mo(500),0===n.v?t[e]=await ds(u,n):t[e]=await ps(t[e],u,n),"done"}async function gs(u,t){const e=[];let n=0;for(let r=0;r<6;r++){let i=0;if(i>=t)break;const o=u.length;n=0;for(let a=0;a<o&&!(i>=t);a++){const t=(new Date).getTime(),o=u[a],{roomid:s,uname:c}=o,{room_id:D,area_id:f,parent_area_id:l}=await Cs(s),C=fs(D,f,l,c,r);await Fs(C,e,a,{v:r}),await Mo(2e3),n+=(new Date).getTime()-t,i++}r<5&&await Mo(6e4-n)}return"done"}async function ms(){const{data:u,code:t}=await Ia(1,1,0);if(0!==t)throw new Error(`获取最后一个关注失败: ${t}`);return u[0]}async function hs(u){const{data:t,code:e}=await va.get("/x/relation/tags?jsonp=jsonp&callback=__jp3",{headers:{Referer:"https://space.bilibili.com/1/fans/follow?tagid=0"},requestOptions:{isJsonp:!0}});if(0===e)return t.find((t=>t.name===u));Ii.warn(`获取分组列表失败: ${e}`)}async function ys(u){const t=await hs(u);if(t)return t.tagid;await Mo(300);const{data:e,code:n,message:r}=await(i=u,va.post("/x/relation/tag/create",{tag:i,jsonp:"jsonp",csrf:To.BILIJCT}));var i;if(22106===n){await Mo(300);const t=await hs(u);return t&&t.tagid}return 0!==n&&Ii.warn(`创建分组失败: ${n}-${r}`),e.tagid}async function Bs(u,t){if(0===u.length)return;const e=await ys(t);if(e)for(const t of u){const{code:u,message:n}=await xa(t.mid,e);0!==u&&Ii.warn(`移动【${t.uname}】失败: ${u}-${n}`),await Mo()}}async function vs(u,t,e,n=1){if(u.length>t.length)return;const{data:r,code:i,message:o}=await Ia(n,20,0);if(0===i){for(const{mid:n,uname:i}of r){if(u.length>=t.length)return;if(n===e)return;(t.includes(n)||t.includes(i))&&u.push({mid:n,uname:i})}if(!(r.length<20))return await vs(u,t,e,n+1)}else Ii.warn(`获取关注用户失败: ${i}-${o}`)}const ws=0,_s=1,bs=5,$s=1,Ss=504,Ts=1096;let Os;async function Is(){try{const{data:u,code:t,message:e}=await Ba.get("/xlive/web-interface/v1/index/getWebAreaList?source_id=2");return 0!==t&&Ii.info(`获取直播分区失败: ${t}-${e}`),u.data.map((u=>u.list)).map((u=>u.map((u=>({areaId:u.id,parentId:u.parent_id})))))}catch(u){throw Ii.error(`获取直播分区异常: ${u.message}`),u}}async function xs(u,t,e=1,n="lottery"){try{await Mo(100);const{data:r,code:i,message:o}=await function(u,t,e){return Ba.get(`/xlive/web-interface/v1/second/getList?platform=web&parent_area_id=${u}&area_id=${t}&page=${e}`)}(t,u,e);return 0!==i&&Ii.info(`获取直播间列表失败: ${i}-${o}`),function(u){const t=[],e=[];return u.forEach((u=>{const n=u.pendant_info[2];n&&(n.pendent_id===Ss?t.push(u):n.pendent_id===Ts&&e.push(u))})),{lotteryTime:t,lotteryPacket:e}}(r.list)["lottery"===n?"lotteryTime":"lotteryPacket"]}catch(u){throw Ii.error(`获取直播间列表异常: ${u.message}`),u}}async function Ps(u,t,e=1){const n=await xs(u,t,e),r=[];for(const u of n){const t=await Ns(u);t&&(r.push({...t,uid:u.uid,uname:u.uname}),await Mo(100))}return r}async function Ns(u){if(To.LOTTERY_UP_BLACKLIST.includes(u.uid))return void Ii.info(`跳过黑名单用户: ${u.uname}`);let t,e,n;try{({data:e,code:t,message:n}=await(r=u.roomid,Ba.get(`/xlive/lottery-interface/v1/Anchor/Check?roomid=${r}`)))}catch(t){return void Ii.info(`直播间${u.roomid}检测异常: ${t.message}`)}var r;if(0!==t)return void Ii.debug(`直播间${u.roomid}检测失败: ${t}-${n}`);if(null===e)return;const i=To.LOTTERY_EXCLUDE.some((u=>e.award_name.match(u)));if(!To.LOTTERY_INCLUDE.some((u=>e.award_name.match(u)))&&i)Ii.info(`跳过屏蔽奖品: ${e.award_name}`);else if(e.status!==$s);else if(e.gift_price>0);else{if(e.require_type===ws||e.require_type===_s)return e;if(e.require_type===bs&&Oo.userLevel>=e.require_value)return e}}async function Ls(u){try{const{id:e,gift_id:n,gift_num:r,award_name:i,uid:o,uname:a,require_type:s,require_text:c}=u;Ii.info(`天选主播：【${a}】`),Ii.info(`奖品：${i}`);const{code:D,message:f}=await(t={id:e,gift_id:n,gift_num:r},Ba.post("/xlive/lottery-interface/v1/Anchor/Join",{...t,csrf:To.BILIJCT,csrf_token:To.BILIJCT,visit_id:R(),platform:"pc"}));if(0!==D)return void Ii.info(`天选失败: ${D}-${f}`);if(Ii.info("天选成功 √"),s===_s){U(Os,o);(function(u){const t=(u=u.replace("关注主播","")).split(/\s*\+\s*/);return t.shift(),t})(c).forEach((u=>U(Os,u)))}}catch(u){Ii.info(`天选异常: ${u.message}`)}var t}async function ks(u,t,e=2){for(let n=1;n<=e;n++){const e=await Ps(u,t,n);for(const u of e)await Ls(u),await Mo(300)}}async function Rs(u){try{const{data:t,code:e}=await function(u){return Ba.get(`/xlive/lottery-interface/v1/lottery/getLotteryInfoWeb?roomid=${u}`)}(u);if(0!==e)return;const{popularity_red_pocket:n}=t;if(!n)return;const{lot_id:r,lot_status:i}=n[0];if(2===i)return;return r}catch(u){}}async function Us(u,t,e=1){const n=await xs(u,t,e,"redPack"),r=[];for(const u of n){const t=await Rs(u.roomid);t&&(r.push({uid:u.uid,uname:u.uname,lot_id:t,room_id:u.roomid}),await Mo(100))}return r}async function js(u){try{const{lot_id:e,uid:n,uname:r,room_id:i}=u;Ii.info(`红包主播：【${r}】`);const{code:o,message:a}=await(t={room_id:i,lot_id:e,ruid:n},Ba.post("/xlive/lottery-interface/v1/popularityRedPocket/RedPocketDraw",{...t,spm_id:"444.8.red_envelope.extract",jump_from:"",session_id:"",csrf_token:To.BILIJCT,csrf:To.BILIJCT,visit_id:""}));if(0!==o)return void Ii.info(`红包失败: ${o}-${a}`);Os.push(n),Ii.info("红包成功 √")}catch(u){Ii.info(`红包异常: ${u.message}`)}var t}async function Gs(u,t,e=2){for(let n=1;n<=e;n++){const e=await Us(u,t,n);for(const u of e)await js(u),await Mo(200)}}function Ms({talker_id:u,session_type:t}){return _a.post("/session_svr/v1/session_svr/remove_session",{talker_id:u,session_type:t,build:0,mobi_app:"web",csrf_token:To.BILIJCT,csrf:To.BILIJCT})}async function Hs(u){try{const{code:t,message:e,data:n}=await function({session_type:u}){return _a.get(`/session_svr/v1/session_svr/get_sessions?session_type=${u}&group_fold=1&unfollow_fold=1&sort_rule=2&build=0&mobi_app=web`)}();if(0!==t)return void Ii.warn(`获取会话失败：${t}-${e}`);const{session_list:r}=n;if(r.length<=0)return;return r.filter((({unread_count:t,talker_id:e,is_follow:n,last_msg:r})=>{return u.find((u=>u.mid===e))&&t>0&&e===r.sender_uid&&1===n&&(i=r.timestamp,Date.now()-1e3*i<36e5);var i}))}catch(u){Ii.error(`获取会话异常：${u.message}`)}}async function qs(u){const t=await Hs(u);await Mo(200);try{for(let u=0;u<t.length;u++){const e=t[u];await Ms(e),await Mo(50)}}catch(u){Ii.error(`更新会话异常：${u.message}`)}t.length>=19&&await qs(u)}var Ks={taskReward:async function(){Ii.info("----【每日任务完成情况】----");try{const{data:u,message:t,code:e}=await va.get("/x/member/web/exp/reward");await Mo();const{data:n}=await Oa();if(0!=e)return void Ii.warn(`状态获取失败: ${e} ${t}`);const r=Oo.money-To.BILI_STAY_COINS;let i=0;0===Oo.coinsTask?Ii.info(`今日投币获取经验: ${n}，还需投币0颗，经验够了，不想投了`):r<=0?Ii.info(`今日投币获取经验: ${n}，还需投币0颗，硬币不够了，不投币了`):r<Oo.coinsTask?(i=Oo.coinsTask-r,Ii.info(`投币获取经验: ${n}，还需投币数量: ${i}颗;(目标${Oo.coinsTask}颗，忽略部分投币)`)):(i=Oo.coinsTask-n/10,Ii.info(`投币获取经验: ${n}，还需投币数量: ${i}颗;(目标${Oo.coinsTask}颗)`)),Oo.coinsTask=i,Ii.info("每日分享: "+(u.share?"已完成":"[未完成]")),Ii.info("每日播放: "+(u.watch?"已完成":"[未完成]")),Oo.share=u.share,Oo.watch=u.watch}catch(u){Ii.error(`状态获取异常 ${u.message}`)}},liveSignTask:async function(){Ii.info("----【直播签到】----");try{const{data:u}=await Ba.get("/xlive/web-ucenter/v1/sign/WebGetSignInfo");if(1===u.status)return Ii.info("已签到，跳过签到"),void Ii.info(`已经签到${u.hadSignDays}天，${u.specialText}`)}catch(u){}try{const{code:u,data:t,message:e}=await Ba.get("/xlive/web-ucenter/v1/sign/DoSign");0===u?Ii.info(`直播签到成功: ${t.text}，特别信息: ${t.specialText}，本月签到天数: ${t.hadSignDays}天;`):Ii.warn(`直播签到失败: ${u} ${e}`)}catch(u){Ii.error(`直播签到异常: ${u.message}`)}},shareAndWatch:async function(){if(Ii.info("----【分享/播放视频】----"),Oo.share&&Oo.watch)return void Ii.info("已完成，跳过分享/播放");let u=0;try{let t=await Qa();if("-1"===t.msg&&(t=await Ma()),"0"!==t.msg)return Ii.warn(`获取视频失败 ${t.msg}`),!1;{const{id:e,author:n,title:r}=t.data;u=e,Ii.info(`获取视频: ${r} --up【${n}】`)}}catch(u){return Ii.error(`获取视频出现异常: ${u.message}`),!1}if(!Oo.share){await Mo();try{const{code:t,message:e}=await function(u){const t={csrf:To.BILIJCT,aid:u};return va.post("/x/web-interface/share/add",t)}(u);0===t?Ii.info("分享视频成功!"):Ii.warn(`分享视频失败: ${t} ${e}`)}catch(u){Ii.error(`分享视频异常: ${u.message}`)}}if(!Oo.watch){await Mo();try{const{code:n,message:r}=await(t=u,e=k(4,60),va.post("/x/click-interface/web/heartbeat",{aid:t,played_time:e}));0===n?Ii.info("播放视频成功!"):Ii.warn(`播放视频失败: ${n} ${r}`)}catch(u){Ii.error(`播放视频异常: ${u.message}`)}}var t,e},silver2Coin:async function(){Ii.info("----【银瓜子兑换硬币】----");try{const{data:u,code:t,message:e}=await Ba.get("/xlive/revenue/v1/wallet/getStatus");if(0!=t&&Ii.info(`获取瓜子详情失败 ${e}`),0===u.silver_2_coin_left)Ii.info("今日已兑换一次");else if(u.silver<700)Ii.info("兑换失败，你瓜子不够了");else{const{message:u}=await Ba.post("/xlive/revenue/v1/wallet/silver2coin",{csrf_token:To.BILIJCT,csrf:To.BILIJCT});Ii.info(`兑换硬币： ${u}`),await Ba.get("/xlive/revenue/v1/wallet/myWallet?need_bp=1&need_metal=1&platform=pc")}}catch(u){Ii.error(`操作异常 ${u.message}`)}},addCoins:async function(){if(Ii.info("----【视频投币】----"),!Oo.coinsTask)return void Ii.info("跳过投币，今日已完成");const u={eCount:0,num:0,prevCode:0,fillCount:0,priority:0};let t=!1;for(;Oo.coinsTask&&!t&&u.eCount<5;)t=await Va(u);u.eCount>=5&&Ii.info("出现异常/错误5次，自动退出投币"),Ii.info(`一共成功投币${u.num}颗`),Ii.info(`硬币还剩${Oo.money}颗`)},mangaSign:async function(){Ii.info("----【漫画签到】----");try{const{code:u}=await wa.post("/twirp/activity.v1.Activity/ClockIn",{platform:t});0==u?Ii.info("漫画签到成功"):Ii.warn("漫画签到失败")}catch(t){var u;400===(null===(u=t.response)||void 0===u?void 0:u.status)?Ii.info("已经签到过了，跳过任务"):Ii.error(`漫画签到异常 ${t.message}`)}var t},supGroupSign:async function(){Ii.info("----【应援团签到】----");const u=await Xa();await Mo();let t=0;for(let r=0;r<u.length;){const i=u[r];try{const{data:u,code:r,message:o}=await(e=i.group_id,n=i.owner_uid,_a.get("/link_setting/v1/link_setting/sign_in",{params:{group_id:e,owner_id:n}}));0===r?0===u.status?t++:Ii.info(o):Ii.warn(`[${i.group_name}]签到失败 ${o}`)}catch(u){Ii.error(`签到异常 ${u.message}`)}finally{await Mo()}}var e,n;Ii.info(`签到结束，成功${t}/${u.length}`)},liveSendMessage:async function(){Ii.info("----【发送直播弹幕】----");const u=await async function(){const{list:u,special_list:t}=await us();return u.push(...t),u}(),t=u.length;let e=0,n=0;Ii.info(`一共需要发送${t}个直播间`),Ii.verbose("所需时间可能很长，请耐心等待");for(let r=0;r<t;r++){const{room_info:i,anchor_info:o,medal:a}=u[r];null!=i&&i.room_id?100===a.today_feed||a.guard_level>0?n++:(await ts(i.room_id,o.nick_name)&&e++,r<t-1&&await Mo(k(1e4,25e3))):(Ii.info(`【${o.nick_name}】没有直播间哦`),n++)}Ii.info(`成功发送${e}个弹幕，跳过${n}个`)},charging:async function(){if(Ii.info("----【给目标充电】----"),await es(),await Mo(),function(){const u=N(),t=u.getDate(),e=P(u),n=To.CHARGE_PRESET_TIME;return Oo.bCoinCouponBalance<2?(Ii.info(`剩余券为${Oo.bCoinCouponBalance}，不足2跳过充电`),!1):e===t?(Ii.info("今天是最后一天了"),!0):!(n>t&&(Ii.info(`预设时间为${n}，不符合条件`),1))}())try{const u=Oo.bCoinCouponBalance||0,t=To.CHARGE_ID;let e=0;Ii.info(`b 币券余额${u}`);const n=async()=>{const{code:e,message:n,data:r}=await function(u,t,e=To.USERID,n,r){return va.post("/x/ugcpay/web/v2/trade/elec/pay/quick",{csrf:To.BILIJCT,bp_num:u,is_bp_remains_prior:t,up_mid:e,otype:n,oid:r})}(u,!0,t);0===e?(Ii.info(`【充值结果】${ns[r.status]}`),r.status===ns["成功"]&&(Oo.chargeOrderNo=r.order_no,await Mo(),await async function(){try{if(!Oo.chargeOrderNo)return!1;const u=_[k(0,_.length-1)],{code:t}=await function(u,t){return va.post("/x/ugcpay/trade/elec/message",{csrf:To.BILIJCT,message:t,order_id:u})}(Oo.chargeOrderNo,u);0===t&&Ii.info("留言成功！")}catch{}}())):Ii.warn(`充电失败：${e} ${n}`)};for(Oo.chargeOrderNo="";!(Oo.chargeOrderNo||(await n(),await Mo(),e++>2)););}catch(u){Ii.error(`充电出现异常：${u.message}`)}},getVipPrivilege:async function(){Ii.info("----【领取大会员权益】----"),function(){if(2!==Oo.vipType)return Ii.info("账号非年度大会员，不需要领取权益"),!1;const u=N(),t=u.getDate(),e=P(u);return 1===t||e===t||(Ii.info("今天非预订领取时间，跳过领取"),!1)}()&&(await is(1),await is(2))},giveGift:async function(){Ii.info("----【投喂过期食物】----");try{const u=await as();if(await Mo(),null==u||!u.length)return void Ii.info("没有2天内过期的简单礼物");const t=await async function(){const u=Object.assign([],To.BILI_GIFT_UP),t=()=>u.splice(k(To.BILI_GIFT_UP.length-1),1)[0];for(;u.length;){const u=t(),e=await ss(u);if(e)return{mid:u,...e}}return await async function(){const{data:{count:u,items:t}}=await $a();if(await Mo(),!u)return;const e=t[k(t.length-1)];return{mid:e.target_id,roomid:e.roomid||0,name:e.uname}}()}();if(!t)return void Ii.info("没有找到投喂目标");await async function({roomid:u,mid:t,name:e},n){for(const r of n){await Mo();try{const{code:n,message:i,data:o}=await Sa({roomid:u,ruid:t,bag_id:r.bag_id,gift_id:r.gift_id,gift_num:r.gift_num});if(0!==n){Ii.warn(`向[${e}]投喂[${r.gift_name}]，${i}`);continue}o.gift_list.forEach((u=>{Ii.info(`成功给 [${e}] 投喂${u.gift_name}`)}))}catch{}}}(t,u)}catch(u){Ii.info(`投喂过期食物异常 ${u}`)}},matchGame:async function(){if(Ii.info("----【赛事硬币竞猜】----"),To.MATCH_COINS<=0)return void Ii.info("硬币数量不能小于 0");if(Ds())return;const u=await async function(){try{const{code:e,message:n,data:{list:r,page:i}}=await va.get(`/x/esports/guess/collection/question?pn=1&ps=50&gid=&sids=&stime=${u}&etime=${t}`);return 0!==e?void Ii.warn(`获取赛事错误 ${e} ${n}`):0===i.total?(Ii.info("今日已经无法获取赛事"),null):r}catch(u){}var u,t}();if(await Mo(),!u)return;const t=await async function(u){let t=0;try{for(const e of u){const{contest:u,questions:n}=e,r=u.id,[{id:i,title:o,details:a,is_guess:s}]=n,[c,D]=a;if(Ds())return t;if(s)continue;Ii.info(`${o} <=> ${c.odds}:${D.odds}`);const f=c.odds>D.odds;let l;l=To.MATCH_SELECTION>0?f?D:c:f?c:D,Ii.info(`预测[ ${l.option} ] ${To.MATCH_COINS} 颗硬币`),await Mo();const{code:C}=await cs(r,i,l.detail_id,To.MATCH_COINS);0!==C?Ii.info("预测失败"):(t++,Oo.money-=To.MATCH_COINS)}}catch(u){console.warn(u.message)}return t}(function(u,t){return u.filter((u=>{const{questions:e}=u,[{details:n,is_guess:r}]=e;if(r)return!1;const[i,o]=n;return Math.abs(i.odds-o.odds)>=t}))}(u,To.MATCH_DIFF));Ii.info(`【竞猜结束】一共参与${t}次预测`)},liveHeart:async function(){Ii.info("----【直播心跳】----");const{heartNum:u,fansMedalList:t}=await Es(),e=t&&t.length;if(!e)return void Ii.info("没有勋章列表");const n=Math.ceil(u/e);for(let e=0;e<n;e++)await gs(t,u);Ii.info("完成")},liveLottery:async function(){Ii.info("----【天选时刻】----");try{const u=await ms();Ii.info(`最后一个关注的UP: ${u.uname}`);const t=await async function(){Os=[];const u=await Is();for(const t of u)for(const u of t)await ks(u.areaId,u.parentId,To.LOTTERY_PAGE_NUM);return Os}();Ii.info("扫描完成");const e=[];await vs(e,t,null==u?void 0:u.mid),await Bs(e),Ii.info("移动关注UP到分组成功")}catch(u){Ii.warn(`天选时刻异常: ${u.message}`),Ii.debug(u)}Ii.info("结束天选时刻")},liveRedPack:async function(){Ii.info("----【天选红包】----");try{const u=await ms();Ii.info(`最后一个关注的UP: ${u.uname}`);const t=await async function(){Os=[];const u=await Is();for(const t of u)for(const u of t)await Gs(u.areaId,u.parentId,To.LOTTERY_PAGE_NUM);return Os}();Ii.info("扫描完成，获取新关注的UP");const e=[];await vs(e,t,null==u?void 0:u.mid),Ii.info("开始读取消息"),await qs(e),Ii.info("移动关注UP到分组"),await Bs(e),Ii.info("移动关注UP到分组成功")}catch(u){Ii.warn(`天选时刻异常: ${u.message}`),Ii.debug(u)}Ii.info("结束天选红包")}};var Js=Object.freeze({__proto__:null,dailyTasks:async function(u,...t){Oi.value="";try{await async function(){Ii.info("----【登录】----");const{data:u,message:t,code:e}=await Ta();if(0!==e)throw Ii.error(`登录错误 ${e} ${t}`),new Error(t);if(!u.isLogin)throw new Error("接口返回为未登录");await Mo(),await Na(u)}()}catch(u){return Ii.error(`登录失败: ${u}`),await ha("登录失败",Oi.value),"未完成"}const e=Go([...Object.values(Ks)]);for(const u of e)await u(),await Mo();return u&&await u(...t),await ha("每日完成",Oi.value),"完成"}});
